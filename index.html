<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
   <title>InstaNurse - Advance Medical Calculators</title>
    <meta name="description" content="All-in-One Clinical Tools for Nurses – Drug, IV, BMI, EDD, Pregnancy, Milestones & More!">
    <meta name="keywords" content="medical calculator, bmi calculator, drug dose, pregnancy calculator, age calculator, tbsa, pediatric milestones, menstrual cycle, period tracker, medinest, health app, pincode finder, DASS-21, Creatinine Clearance, MAP Calculator, ABG Analyzer">
    <meta name="author" content="Suresh Didel">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0000ff">
    <link rel="apple-touch-icon" href="icons/icon-512x512.png">
    
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

     <style>
        /* New Theme Colors */
        :root {
            /* Changed primary color for splash screen and theme */
            --primary-color: #0000ff; /* Blue */
            --secondary-color: #0b8aa3; /* Lighter Blue */
            --bg-color: #F8F9FA; /* Very Light Gray */
            --card-bg: #FFFFFF; /* White */
            --text-color: #343A40; /* Dark Gray */
            --heading-color: #212529;
            --light-text-color: #FFFFFF;
            --border-color: #E9ECEF;
            --danger-color: #DC3545;
            --warning-color: #FFC107;
            --success-color: #28A745;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        
 /* Original styles for MediNest - updated for new theme */
        html, body { 
            width: 100%; 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            display: flex; /* Ensure body takes full height for app-container */
            flex-direction: column;
        }
        .app-container { 
            display: flex; 
            flex-direction: column; 
            min-height: 100vh; 
            width: 100%; 
            background-color: var(--bg-color); /* Ensure app-container has bg color */
        }
        .header, .calculator-header { 
            flex-shrink: 0; 
            padding: 10px 20px; 
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); /* Updated gradient */
            box-shadow: 0 2px 8px rgba(0,0,0,0.15); 
            z-index: 10; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            color: var(--light-text-color); 
        }
        .header-main-content { display: flex; flex-direction: column; align-items: flex-start; }
        .header-title { font-size: 1.5em; font-weight: bold; }
        .live-datetime { font-size: 0.7em; font-weight: 400; opacity: 0.8; margin-top: -2px; }
        .language-selector { display: flex; align-items: center; gap: 8px; }
        .globe-icon { font-size: 1.5em; }
        #lang-select { padding: 5px 8px; border-radius: 5px; border: 1px solid rgba(255, 255, 255, 0.4); background: transparent; color: var(--light-text-color); cursor: pointer; }
        #lang-select option { background: var(--secondary-color); color: var(--light-text-color); }
        .footer { 
            flex-shrink: 0; 
            padding: 15px 20px; 
            background: linear-gradient(180deg, var(--card-bg), var(--border-color)); /* Updated gradient */
            text-align: center; 
            font-size: 0.8em; 
            color: var(--text-color); 
            border-top: 1px solid var(--border-color); 
        }
        .footer p { margin-bottom: 8px; }
        .footer-links a { color: var(--primary-color); text-decoration: none; margin: 0 10px; font-weight: 500; }
        .ad-bar { flex-shrink: 0; min-height: 50px; background-color: var(--border-color); display: flex; align-items: center; justify-content: center; color: #adb5bd; font-size: 0.9em; overflow: hidden; }
        .main-content { flex-grow: 1; display: flex; flex-direction: column; }
        .calculator-view .main-content { padding: 0; }
        #home-screen { display: flex; flex-direction: column; flex-grow: 1; }
        .calculator-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); /* Responsive grid */
            grid-auto-rows: .2fr; /* Make rows equal height */
            gap: 15px; 
            flex-grow: 1; 
            padding: 15px; 
        }
        .calculator-card { 
            background: var(--card-bg); 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: all 0.2s ease; 
            text-decoration: none; 
            color: var(--text-color); 
            padding: 10px; 
            text-align: center; 
            aspect-ratio: 1 / 1; /* Force square aspect ratio */
        }
        .calculator-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 123, 255, 0.15); }
        .calculator-card .icon { font-size: 2.5em; margin-bottom: 10px; }
        .calculator-card .name { font-weight: 500; font-size: 1em; }
        /* Removed .card-tbsa specific grid-column span */
        .calculator-view { display: none; flex-direction: column; min-height: 100vh; animation: fadeIn 0.5s ease; }
        .calculator-header { margin-bottom: 0; justify-content: flex-start; }
        .back-button { background: transparent; border: 1px solid rgba(255, 255, 255, 0.4); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background-color 0.2s; }
        .back-button:hover { background: rgba(255, 255, 255, 0.2); }
        .back-button-icon { width: 10px; height: 10px; border-left: 2px solid var(--light-text-color); border-bottom: 2px solid var(--light-text-color); transform: rotate(45deg); }
        .calculator-title { font-size: 1.5em; font-weight: 600; flex-grow: 1; text-align: center; margin-right: 40px; color: var(--light-text-color); }
        .calculator-body { flex-grow: 1; display: flex; flex-direction: column; }
        .calculator-content { padding: 20px 15px; background: var(--bg-color); flex-grow: 1; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 1em; transition: all 0.2s ease-in-out; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--primary-color); }
        .btn-container { text-align: center; margin-top: 20px; display: flex; gap: 10px; justify-content: center; }
        .btn { padding: 12px 20px; font-size: 1em; border: none; border-radius: 5px; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background-color: var(--primary-color); color: var(--light-text-color); }
        .btn-secondary { background-color: #6c757d; color: var(--light-text-color); }
        .btn-clear { background-color: var(--danger-color); color: var(--light-text-color); }
        .result-box { margin-top: 20px; padding: 15px; background-color: #e9f5ff; border-left: 5px solid var(--primary-color); border-radius: 5px; animation: slideInUp 0.5s ease; }
                .tab-container { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 15px; }
        .tab-btn { flex: 1; padding: 10px; text-align: center; cursor: pointer; background: var(--card-bg); border: none; font-weight: 500; border-bottom: 3px solid transparent; transition: all 0.2s; }
        .tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        .bmi-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .progress-bar-container { width: 100%; background: #e9ecef; border-radius: 5px; height: 10px; margin-top: 10px; overflow: hidden; }
        .progress-bar { height: 100%; transition: width 0.5s ease, background-color 0.5s ease; border-radius: 5px; }
        .tbsa-container { display: flex; flex-direction: column; align-items: center; gap: 25px; }
        .tbsa-svg { max-width: 240px; width: 100%; height: auto; }
        .tbsa-svg path { fill: #ccc; stroke: #333; stroke-width: 1.5; cursor: pointer; transition: fill 0.2s; }
        .tbsa-svg path.selected { fill: var(--danger-color); }
        .tbsa-controls { text-align: center; width: 100%; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; z-index: 1000; animation: fadeIn 0.3s; }
        .modal-content { background: var(--card-bg); padding: 25px; border-radius: 12px; width: 90%; max-width: 500px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto; animation: slideInUp 0.4s; }
        .modal-content p { margin-bottom: 1em; line-height: 1.6; }
        .modal-content h3 { margin-top: 1.2em; margin-bottom: 0.5em; }
        .modal-close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.8em; font-weight: bold; color: #888; cursor: pointer; border: none; background: none; }
        /* Styles for Biomedical Waste Tool */
#biomedical-waste-screen .calculator-content {
     background-color: #f0f4f8;
}
#biomedical-waste-screen .result-card, 
#biomedical-waste-screen .clarification-card, 
#biomedical-waste-screen .category-card {
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    animation: fadeIn 0.5s ease-in-out;
}
#biomedical-waste-screen .disclaimer {
    font-size: 0.8rem;
    padding-left: 10px;
    color: #4b5563;
}
#biomedical-waste-screen .category-list {
    columns: 2;
    -webkit-columns: 2;
    -moz-columns: 2;
    gap: 1rem;
}
@media (max-width: 640px) {
    #biomedical-waste-screen .category-list {
        columns: 1;
        -webkit-columns: 1;
        -moz-columns: 1;
    }
}
#biomedical-waste-screen .category-list li {
    break-inside: avoid-column;
    padding-bottom: 0.5rem;
    text-transform: capitalize;
    color: #374151;
}
#biomedical-waste-screen .icon-basket {
    cursor: pointer;
    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
}
#biomedical-waste-screen .icon-basket:hover {
    transform: scale(1.1);
    filter: brightness(1.1);
}
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInUp { from { transform: translateY(50px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
        @media (max-width: 380px) { .bmi-inputs { grid-template-columns: 1fr; } }
         /* Styles for the Unit Converter (Updated to match screenshot) */
        #mass-calc-screen .calculator-body {
            background-color: var(--bg-color);
            justify-content: flex-start;
            align-items: center;
            padding: 20px;
            padding-top: 30px;
        }

        #mass-calc-screen .converter-card {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 24px;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 420px;
        }
        
         #mass-calc-screen .converter-title {
            color: var(--primary-color);
            font-size: 2em;
            font-weight: 700;
            text-align: center;
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        #mass-calc-screen .converter-title span {
            color: var(--warning-color);
            font-size: 1.8em;
            line-height: 1;
        }
        
        /* CORRECTED LAYOUT: Using CSS Grid to prevent overflow */
        #mass-calc-screen .form-row {
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        #mass-calc-screen .form-row label {
             font-weight: 500;
             color: var(--text-color);
             /* Removed fixed width */
        }

        #mass-calc-screen .input-field,
        #mass-calc-screen .select-field {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease-in-out;
            width: 100%; /* Ensure it fills the grid cell */
        }

        #mass-calc-screen .input-field:focus,
        #mass-calc-screen .select-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(9, 21, 235, 0.2);
        }
        
        #mass-calc-screen .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            margin-bottom: 16px;
        }

        #mass-calc-screen .btn {
            flex: 1;
            padding: 12px;
            font-weight: bold;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
         #mass-calc-screen .btn-convert {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: var(--light-text-color);
            box-shadow: 0 4px 15px rgba(9, 21, 235, 0.2);
        }
        #mass-calc-screen .btn-convert:hover {
             transform: translateY(-2px);
             box-shadow: 0 6px 20px rgba(9, 21, 235, 0.3);
        }

        #mass-calc-screen .btn-clear-mass {
            background-color: var(--border-color);
            color: var(--text-color);
        }
        #mass-calc-screen .btn-clear-mass:hover {
            background-color: #dee2e6;
        }

        #mass-calc-screen .result-card {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 16px;
            margin-top: 24px;
            text-align: center;
        }

        #mass-calc-screen .result-card h2 {
            color: var(--primary-color);
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        #mass-calc-screen .result-value {
             color: var(--success-color);
             font-size: 2.8em;
             font-weight: 800;
             line-height: 1.1;
             word-break: break-all;
        }

        #mass-calc-screen .btn-copy {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 8px 16px;
            font-size: 0.9em;
            font-weight: 500;
        }
        #mass-calc-screen .btn-copy:hover {
            background-color: #f1f3f5;
        }

        #mass-calc-screen .message-box-mass {
            transition: opacity 0.3s ease-in-out;
            margin-top: 20px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 500;
            text-align: center;
            font-size: 0.9em;
        }
        #mass-calc-screen .message-box-mass.bg-red-800 { background-color: #FEE2E2; color: #B91C1C; }
        #mass-calc-screen .message-box-mass.bg-green-800 { background-color: #D1FAE5; color: #047857; }
        #mass-calc-screen .message-box-mass.bg-blue-800 { background-color: #DBEAFE; color: #1D4ED8; }
        
         @keyframes resultFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-result {
            animation: resultFadeIn 0.4s ease-out forwards;
        }

/* --- Styles for Job Portal Screen (Scoped) --- */
        @keyframes j4n-pulse {
          0%, 100% { 
            transform: rotate(45deg) scale(1); 
            box-shadow: 0 0 5px rgba(244, 67, 54, 0.5); 
          }
          50% { 
            transform: rotate(45deg) scale(1.05); 
            box-shadow: 0 0 15px rgba(244, 67, 54, 0.8); 
          }
        }

        #job-portal-screen .calculator-body {
          --bg: #f8f9fa;
          --panel: #ffffff;
          --text: #212529;
          --muted: #6c757d;
          --brand: #e91e63;
          --brand-2: #f06292;
          --good: #8bc34a;
          --new: #f44336;
          --chip-brd: #dee2e6;
          --ring: rgba(233, 30, 99, .25);
          --shadow: 0 10px 25px rgba(0, 0, 0, .1);
          --radius-xl: 16px;
          --radius-2xl: 20px;
          font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
          background: var(--bg);
          color: var(--text);
          padding-bottom: 100px;
        }
        #job-portal-screen .j4n-header{
          position: sticky; top:0; z-index: 50;
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(248, 249, 250, 0.7));
          backdrop-filter: blur(12px);
          box-shadow: 0 4px 20px rgba(0,0,0,0.05);
          border-bottom: 1px solid var(--chip-brd);
        }
        #job-portal-screen .j4n-nav{
          max-width:1200px; margin:0 auto; padding: 12px 20px;
          display: flex;
          flex-direction: column;
          gap: 12px;
        }
        #job-portal-screen .top-nav {
          width: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        #job-portal-screen .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text)}
        #job-portal-screen .logo{
          width:42px; height:42px; display:grid; place-items:center; border-radius:12px;
          background: var(--brand);
          box-shadow: 0 8px 20px rgba(233, 30, 99, .2);
          border: 1px solid var(--brand-2);
          font-weight: 800;
          letter-spacing: .5px;
        }
        #job-portal-screen .logo span{font-size:12px;color:#fff}
        #job-portal-screen .title{font-weight:700; font-size:20px; letter-spacing:.3px}
        #job-portal-screen .subtitle{font-size:12px; color:var(--muted)}

        #job-portal-screen .controls{
          width: 100%;
          display:flex; gap:10px; flex-wrap:wrap; align-items: center;
        }
        #job-portal-screen .search-container{
          position: relative;
          flex-grow: 1;
        }
        #job-portal-screen .search-icon {
          position: absolute;
          top: 50%;
          left: 14px;
          transform: translateY(-50%);
          color: var(--muted);
          pointer-events: none;
        }
        #job-portal-screen .input, #job-portal-screen select{
          background: var(--panel); border:1px solid var(--chip-brd); color:var(--text);
          padding: 11px 12px; border-radius:12px; outline: none; width: 100%;
          font-size: 15px;
          transition: box-shadow .2s, border-color .2s;
        }
        #job-portal-screen #search { padding-left: 40px; }
        #job-portal-screen .input:focus, #job-portal-screen select:focus{ box-shadow: 0 0 0 4px var(--ring); border-color: var(--brand); }
        #job-portal-screen .btn{
          background: var(--brand);
          color: #fff; border:none; padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer;
          box-shadow: 0 6px 16px rgba(233, 30, 99, .25);
          transition: transform .08s ease, filter .2s ease;
        }
        #job-portal-screen .btn:hover{ filter:brightness(1.1) }
        #job-portal-screen .btn:active{ transform: translateY(1px) }
        
        #job-portal-screen main{ max-width:1200px; margin: 28px auto 60px; padding: 0 20px; }

        #job-portal-screen .meta{
          display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:16px;
        }
        #job-portal-screen .count{color:var(--muted); font-size:14px}

        #job-portal-screen .grid{
          display:grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap:24px;
        }

        #job-portal-screen .card{
          color: #fff;
          border-radius: var(--radius-2xl);
          padding: 24px;
          box-shadow: var(--shadow);
          transition: transform .12s ease, box-shadow .2s ease;
          display: flex;
          flex-direction: column;
          position: relative;
          overflow: hidden;
        }
        #job-portal-screen .card-theme-pink { background: #e91e63; }
        #job-portal-screen .card-theme-green { background: #2E7D32; }
        #job-portal-screen .card-theme-blue { background: #1565C0; }

        #job-portal-screen .card:hover{
          transform: translateY(-4px);
          box-shadow: 0 14px 30px rgba(0,0,0,.15);
        }
        #job-portal-screen .card hr {
          border: none;
          height: 1px;
          background-color: rgba(255,255,255,0.25);
          margin: 16px 0;
        }
        #job-portal-screen .card-head{
          display:flex; gap:16px; align-items:center;
        }
        #job-portal-screen .card hr {
          border: none;
          height: 1px;
          background-color: rgba(255,255,255,0.25);
          margin: 16px 0;
        }
        #job-portal-screen .card-head{
          display:flex; gap:16px; align-items:center;
        }
        #job-portal-screen .avatar{
          width:50px; height:50px; min-width:50px;
          border-radius: 50%;
          background: #fff;
          border:1px solid rgba(0,0,0,0.1);
          display:grid; place-items:center;
          font-weight:700; font-size: 18px;
        }
        #job-portal-screen .card-theme-pink .avatar { color: #e91e63; }
        #job-portal-screen .card-theme-green .avatar { color: #2E7D32; }
        #job-portal-screen .card-theme-blue .avatar { color: #1565C0; }

        #job-portal-screen .facility-info .facility{ font-weight:700; font-size:20px; line-height: 1.3; }
        #job-portal-screen .facility-info .address{ font-size:14px; opacity: 0.8; }

        #job-portal-screen .card-body { margin: 8px 0; }
        #job-portal-screen .details-grid {
          display: grid;
          grid-template-columns: 100px 1fr;
          gap: 10px;
          font-size: 15px;
        }
        #job-portal-screen .details-grid strong { font-weight: 600; opacity: 0.8; }
        #job-portal-screen .details-grid span { font-weight: 500; }

        #job-portal-screen .card-desc {
          font-size: 14px;
          line-height: 1.6;
          opacity: 0.9;
          margin-top: 16px;
        }

        #job-portal-screen .card-footer{
          display:flex; align-items:center; justify-content:space-between; gap:10px;
          margin-top: auto;
          padding-top: 8px;
        }
        #job-portal-screen .posted{ font-size:13px; opacity: 0.8; }
        #job-portal-screen .apply-btn {
          background: var(--good);
          color: #fff;
          text-decoration: none;
          font-weight: 700;
          font-size: 16px;
          padding: 12px 28px;
          border-radius: 12px;
          transition: transform .1s ease, filter .2s ease;
        }
        #job-portal-screen .apply-btn:hover { filter: brightness(1.1); }
        #job-portal-screen .apply-btn:active { transform: scale(0.98); }

        #job-portal-screen .new-ribbon {
          position: absolute;
          top: 0;
          right: 0;
          width: 80px;
          height: 80px;
          overflow: hidden;
        }
        #job-portal-screen .new-ribbon span {
          position: absolute;
          display: block;
          width: 120px;
          padding: 6px 0;
          background-color: var(--new);
          box-shadow: 0 5px 10px rgba(0,0,0,.2);
          color: #fff;
          font: 700 12px/1 'Inter', sans-serif;
          text-shadow: 0 1px 1px rgba(0,0,0,.2);
          text-transform: uppercase;
          text-align: center;
          right: -25px;
          top: 20px;
          transform: rotate(45deg);
          animation: j4n-pulse 2s ease-in-out infinite;
        }

        #job-portal-screen .share-btn {
          background: rgba(255,255,255,0.15);
          border: 1px solid rgba(255,255,255,0.3);
          color: #fff;
          padding: 8px 10px;
          border-radius: 8px;
          cursor: pointer;
          font-size: 12px;
          margin-left: auto;
        }
        #job-portal-screen .share-btn:hover { background: rgba(255,255,255,0.25); }

        #job-portal-screen .empty{
          grid-column: 1 / -1;
          text-align:center; color:var(--muted); padding:40px; border:1px dashed var(--chip-brd); border-radius:16px; background: rgba(0,0,0,0.02);
        }

        #job-portal-screen #toast {
          position: fixed;
          bottom: -100px;
          left: 50%;
          transform: translateX(-50%);
          background: var(--good);
          color: #fff;
          padding: 16px 24px;
          border-radius: 12px;
          font-weight: 600;
          box-shadow: 0 5px 20px rgba(0,0,0,.15);
          z-index: 100;
          transition: bottom 0.5s ease-in-out;
        }
        #job-portal-screen #toast.show { bottom: 100px; }

        #job-portal-screen .j4n-footer {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          width: auto;
          z-index: 40;
        }
        #job-portal-screen .footer-nav {
          display: flex;
          gap: 8px;
          padding: 8px;
          background: rgba(255, 255, 255, 0.7);
          backdrop-filter: blur(15px);
          border: 1px solid var(--chip-brd);
          border-radius: 999px;
          box-shadow: 0 8px 30px rgba(0,0,0,0.1);
        }
        #job-portal-screen .footer-btn {
          background: none;
          border: none;
          color: var(--muted);
          cursor: pointer;
          padding: 10px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: color .2s, background-color .2s;
        }
        #job-portal-screen .footer-btn:hover {
          color: var(--text);
          background-color: #e9ecef;
        }
        #job-portal-screen .footer-btn svg {
          width: 22px;
          height: 22px;
        }

        #job-portal-screen dialog {
          border: 1px solid var(--chip-brd);
          border-radius: var(--radius-xl);
          background: var(--bg);
          color: var(--text);
          max-width: 680px;
          box-shadow: 0 10px 40px rgba(0,0,0,0.15);
          padding: 0;
          margin: auto;
        }
        #job-portal-screen dialog::backdrop { background: rgba(0,0,0,.5); backdrop-filter: blur(4px); }
        #job-portal-screen .dialog-header {
          padding: 16px 24px;
          border-bottom: 1px solid var(--chip-brd);
        }
        #job-portal-screen .dialog-header h3 {
          margin: 0;
          font-size: 20px;
        }
        #job-portal-screen form.quick { 
          display: grid; 
          grid-template-columns: 1fr 1fr; 
          gap: 16px 20px; 
          padding: 24px;
        }
        #job-portal-screen .form-group {
          display: flex;
          flex-direction: column;
          gap: 6px;
        }
        #job-portal-screen .form-group.full-width {
          grid-column: 1 / -1;
        }
        #job-portal-screen .form-group label {
          font-size: 14px;
          font-weight: 500;
          color: var(--muted);
        }
        #job-portal-screen form.quick input, #job-portal-screen form.quick select, #job-portal-screen form.quick textarea {
          background:var(--panel); border:1px solid var(--chip-brd); color:var(--text); padding:10px 12px; border-radius:10px;
          font-family: inherit; font-size: 15px;
        }
        #job-portal-screen form.quick textarea { min-height: 90px; resize: vertical; }
        #job-portal-screen .actions { 
          grid-column: 1 / -1;
          display:flex; 
          justify-content:flex-end; 
          gap: 12px; 
          padding-top: 12px;
          border-top: 1px solid var(--chip-brd);
        }
        #job-portal-screen .ghost { 
          background: #f1f3f5; 
          border: 1px solid var(--chip-brd); 
          color: var(--text); 
          border-radius:12px; 
          padding:10px 16px; 
          cursor:pointer;
          font-weight: 600;
        }

        @media (max-width: 640px) {
          #job-portal-screen .controls {
            flex-direction: column;
            align-items: stretch;
          }
          #job-portal-screen .grid {
            grid-template-columns: 1fr;
          }
          #job-portal-screen form.quick {
            grid-template-columns: 1fr;
          }
           #job-portal-screen .form-group.full-width {
             grid-column: auto;
          }
        }
        /* --- STYLES FOR PREGNANCY CALCULATOR --- */
        #preg-calc-screen .calculator-content,
        #milestone-calc-screen .calculator-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        #preg-calc-screen .input-card, 
        #preg-calc-screen .result-card-main, 
        #preg-calc-screen .result-card-grid, 
        #preg-calc-screen .result-card-timeline,
        #preg-calc-screen .result-card-info, /* Added style for new card */
        #milestone-calc-screen .input-card {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.07);
        }

        #edd-result-container,
        #milestone-result-container {
            display: none;
            flex-direction: column;
            gap: 20px;
            animation: fadeIn 0.5s ease;
        }

        .result-card-main {
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--light-text-color);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.07);
        }
        .result-card-main .label {
            font-size: 1em;
            opacity: 0.9;
        }
        .result-card-main .value {
            font-size: 2em;
            font-weight: 700;
            margin-top: 5px;
        }
        .progress-section .label { font-size: 0.9em; margin-bottom: 8px; }
        .pregnancy-progress-bar-container { width: 100%; background-color: var(--border-color); border-radius: 50px; height: 12px; overflow: hidden; }
        .pregnancy-progress-bar { height: 100%; background: linear-gradient(90deg, var(--warning-color), var(--success-color)); border-radius: 50px; transition: width 0.8s ease-out; width: 0%; }
        .progress-section .gestational-age { margin-top: 10px; font-weight: 500; }
        .result-card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .info-item { background-color: var(--bg-color); padding: 15px; border-radius: 12px; text-align: center; }
        .info-item .icon { font-size: 1.8em; margin-bottom: 5px; }
         .info-item .label { font-size: 0.8em; color: #6c757d; }
        .info-item .value { font-size: 1.1em; font-weight: 600; color: var(--text-color); }
        .result-card-timeline .timeline-item { display: flex; align-items: center; gap: 15px; padding: 10px 0; }
        .result-card-timeline .timeline-item:not(:last-child) { border-bottom: 1px solid var(--border-color); }
        .timeline-item .icon { font-size: 1.5em; background-color: var(--bg-color); color: var(--primary-color); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .timeline-item .label { font-weight: 500; }
        .timeline-item .date { font-size: 0.9em; color: #6c757d; }
        
        /* New styles for health tips and baby growth */
        .info-section:not(:last-child) {
            margin-bottom: 15px;
        }
        .info-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        #health-tips-content, #baby-growth-content {
            line-height: 1.6;
            font-size: 0.95em;
        }
        
        /* --- NEW STYLES FOR MILESTONE CALCULATOR --- */
        #milestone-calc-screen .age-display-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.07);
            text-align: center;
        }
        #milestone-calc-screen .age-display-card .label { font-size: 1em; color: #6c757d; }
        #milestone-calc-screen .age-display-card .value { font-size: 1.8em; font-weight: 700; color: var(--primary-color); margin-top: 5px;}
        
        #milestone-calc-screen .milestone-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.07);
        }
        #milestone-calc-screen .milestone-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--heading-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 8px;
        }
        #milestone-calc-screen .milestone-category {
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 15px;
            margin-bottom: 8px;
            color: var(--secondary-color);
        }
        #milestone-calc-screen .milestone-list {
            list-style-type: none;
            padding-left: 0;
        }
        #milestone-calc-screen .milestone-list li {
            padding: 8px 0 8px 25px;
            position: relative;
            border-bottom: 1px solid var(--border-color);
            line-height: 1.5;
        }
         #milestone-calc-screen .milestone-list li:last-child {
            border-bottom: none;
        }
        #milestone-calc-screen .milestone-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }

        #milestone-calc-screen .red-flags-card {
            background-color: #FFF9C4; /* Light yellow */
            padding: 20px;
            border-radius: 16px;
            border-left: 5px solid var(--danger-color);
        }
        #milestone-calc-screen .red-flags-card .milestone-title {
            color: var(--danger-color);
            border-bottom-color: var(--danger-color);
        }
         #milestone-calc-screen .red-flags-card .milestone-list li::before {
            content: '⚠️';
        }
        
        /* --- STYLES FOR MENSTRUAL CYCLE CALCULATOR --- */
        #menstrual-calc-screen {
            --primary-color-mens: #6a5acd; /* SlateBlue */
            --secondary-color-mens: #f0e6ff; /* Lavender */
            --text-color-mens: #333;
            --bg-color-mens: #ffffff;
            --highlight-color: #ff69b4; /* HotPink for ovulation */
            --fertile-color: #4682b4;  /* SteelBlue for fertile window */
            --current-phase-color: #20b2aa; /* LightSeaGreen */
            --conception-color: #e53935; /* Red for peak fertility */
            --doctor-info-bg: #fff9e6; /* Light Yellow */
            --doctor-info-border: #ffd700; /* Gold */
            --symptom-bg: #e6f7ff;
            --symptom-border: #91d5ff;
        }

        #menstrual-calc-screen .calculator-content {
            background-color: #f4f7f6;
            display: flex;
            justify-content: flex-start; /* Align content to the top */
            align-items: center; /* Center horizontally */
            flex-direction: column; /* Stack items vertically */
            padding: 20px 10px; /* Adjust padding */
            color: var(--text-color-mens);
            box-sizing: border-box;
            overflow-y: auto; /* Allow scrolling */
        }

        #menstrual-calc-screen .calculator-container {
            background-color: var(--bg-color-mens);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
            transition: all 0.3s ease;
            margin-bottom: 20px; /* Space at the bottom */
        }
        
         #menstrual-calc-screen .calculator-container h1 {
            color: var(--primary-color-mens);
            margin-bottom: 25px;
            font-size: 1.6rem;
        }
        
        #menstrual-calc-screen .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        #menstrual-calc-screen .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        #menstrual-calc-screen .input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        #menstrual-calc-screen .input-group input:focus {
            outline: none;
            border-color: var(--primary-color-mens);
            box-shadow: 0 0 5px rgba(106, 90, 205, 0.2);
        }
        
        #menstrual-calc-screen .results-section.hidden {
            display: none;
        }

        #menstrual-calc-screen .results-section {
            margin-top: 25px;
            text-align: left;
            padding: 20px;
            border-radius: 8px;
            animation: fadeIn 0.5s ease;
        }

        #menstrual-calc-screen #results {
             background-color: var(--secondary-color-mens);
        }
        
        #menstrual-calc-screen .result-item {
            padding: 12px 0;
            border-bottom: 1px solid #dcd0ff;
        }
        
        #menstrual-calc-screen .result-item:last-child {
            border-bottom: none;
        }
        
         #menstrual-calc-screen .result-item strong {
            display: block;
            font-size: 1rem;
            color: var(--primary-color-mens);
            margin-bottom: 4px;
        }
        
        #menstrual-calc-screen .result-item span {
            font-weight: 500;
            font-size: 1rem;
        }
        
        #menstrual-calc-screen .highlight-ovulation { color: var(--highlight-color); font-weight: 600; }
        #menstrual-calc-screen .highlight-fertile { color: var(--fertile-color); font-weight: 600; }
        #menstrual-calc-screen .highlight-current { color: var(--current-phase-color); font-weight: 600; }
        #menstrual-calc-screen .highlight-conception { color: var(--conception-color); font-weight: 600; }

        #menstrual-calc-screen #symptom-tracker {
            background-color: var(--symptom-bg);
            border: 1px solid var(--symptom-border);
        }
        
        #menstrual-calc-screen #symptom-tracker h2, 
        #menstrual-calc-screen #cycle-history h2, 
        #menstrual-calc-screen #doctor-info h2, 
        #menstrual-calc-screen #conception-tips h2,
        #menstrual-calc-screen #educational-tips h2 {
            margin-top: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        #menstrual-calc-screen #symptom-tracker h2 { color: #0050b3; }
        #menstrual-calc-screen #cycle-history h2 { color: var(--primary-color-mens); }
        #menstrual-calc-screen #doctor-info h2 { color: #c78c06; }
        #menstrual-calc-screen #conception-tips h2 { color: var(--conception-color); }
        
        #menstrual-calc-screen .symptom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        #menstrual-calc-screen .symptom-item {
            display: flex;
            align-items: center;
            background: #fff;
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #d9d9d9;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        #menstrual-calc-screen .symptom-item input { margin-right: 8px; }
        #menstrual-calc-screen .symptom-item:hover { border-color: var(--primary-color-mens); }

        #menstrual-calc-screen #cycle-history {
            background-color: #fafafa;
            border: 1px solid #e8e8e8;
        }
         #menstrual-calc-screen #history-list { list-style-type: none; padding: 0; font-size: 0.9rem; }
        #menstrual-calc-screen #history-list li { padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
        #menstrual-calc-screen #history-list li:last-child { border-bottom: none; }

        #menstrual-calc-screen #doctor-info {
            background-color: var(--doctor-info-bg);
            border: 1px solid var(--doctor-info-border);
        }

        #menstrual-calc-screen #doctor-info ul { padding-left: 20px; margin: 0; font-size: 0.9rem; }
        #menstrual-calc-screen #doctor-info li { margin-bottom: 8px; }

        #menstrual-calc-screen #educational-tips {
            background-color: #f6ffed;
            border: 1px solid #b7eb8f;
        }
        #menstrual-calc-screen #educational-tips h2 { color: #389e0d; }
        #menstrual-calc-screen #tip-content { font-size: 0.9rem; }

        #menstrual-calc-screen #conception-tips {
            background-color: #ffebee;
            border: 1px solid #ffcdd2;
        }

        #menstrual-calc-screen .disclaimer {
            font-size: 0.75rem;
            color: #888;
            margin-top: 20px;
            text-align: center;
        }
        
        /* --- STYLES FOR PINCODE FINDER --- */
        #pincode-calc-screen .pincode-container {
            width: 100%;
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.07);
            text-align: center;
        }

        #pincode-calc-screen .pincode-container h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 1.5em;
        }

        #pincode-calc-screen .search-box {
            width: 100%;
            padding: 12px 15px;
            font-size: 1em;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        #pincode-calc-screen .search-box:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 8px rgba(0, 123, 255, 0.25);
        }
        
         #pincode-calc-screen .result-card {
            background-color: #e9f7ef;
            border-left: 5px solid var(--success-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            animation: fadeIn 0.5s ease;
            text-align: left;
        }
        
        #pincode-calc-screen .result-pincode {
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.25em;
            margin-bottom: 8px;
        }
        
        #pincode-calc-screen .result-details p {
            margin: 4px 0;
            font-size: 0.95em;
        }
        
        #pincode-calc-screen .result-details strong {
            color: #555;
        }

        #pincode-calc-screen #pincode-message {
            font-size: 1em;
            font-weight: 500;
            margin-top: 15px;
        }

        /* --- STYLES FOR DASS-21 CALCULATOR --- */
        #dass21-calc-screen .calculator-content {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* --- Question Animation --- */
        #dass21-calc-screen .question-enter {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }
        #dass21-calc-screen .question-enter-active {
            opacity: 1;
            transform: translateY(0);
        }
        #dass21-calc-screen .question-exit {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease-in, transform 0.3s ease-in;
        }
        #dass21-calc-screen .question-exit-active {
            opacity: 0;
            transform: translateY(-20px);
        }
        /* --- Custom Radio Button Styling --- */
        #dass21-calc-screen .option-label {
            transition: all 0.2s ease-in-out;
        }
        #dass21-calc-screen input[type="radio"]:checked + .option-label {
            border-color: #3B82F6; /* blue-500 */
            background-color: #EFF6FF; /* blue-50 */
            color: #1E40AF; /* blue-800 */
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
         /* --- Severity Color Classes --- */
        #dass21-calc-screen .severity-normal { background-color: #D1FAE5; color: #065F46; border-left-color: #10B981; }
        #dass21-calc-screen .severity-mild { background-color: #FEF3C7; color: #92400E; border-left-color: #FBBF24; }
        #dass21-calc-screen .severity-moderate { background-color: #FFE4E6; color: #9A3412; border-left-color: #FB923C; }
        #dass21-calc-screen .severity-severe { background-color: #FEE2E2; color: #991B1B; border-left-color: #EF4444; }
        #dass21-calc-screen .severity-extremely-severe { background-color: #E0BBE4; color: #581C87; border-left-color: #A855F7; }

        /* --- STYLES FOR CREATININE CLEARANCE CALCULATOR --- */
        #ccc-calc-screen .calculator-content {
            background: linear-gradient(to bottom right, #e0e7ff, #c7d2fe);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #ccc-calc-screen .results-fade-in {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.6s ease-in-out, opacity 0.6s ease-in-out, margin-top 0.6s ease-in-out;
        }
        #ccc-calc-screen .results-fade-in.show {
            max-height: 1000px;
            opacity: 1;
            margin-top: 2rem;
        }
        
        /* --- STYLES FOR ANTIDOTE FINDER --- */
#antidote-finder-screen .result-animation {
    animation: slideInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
}
#antidote-finder-screen .header-gradient {
    background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
}
#antidote-finder-screen .agent-link {
    cursor: pointer;
    background-color: #eef2ff;
    color: #3730a3;
    font-weight: 600;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    transition: all 0.2s ease-in-out;
    border: 1px solid #c7d2fe;
}
#antidote-finder-screen .agent-link:hover {
    background-color: #c7d2fe;
    color: #1e1b4b;
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
}
        
        /* --- STYLES FOR MAP CALCULATOR --- */
        #map-calc-screen .calculator-content {
             display: flex;
             justify-content: center;
             align-items: center;
        }
        #map-calc-screen .results-fade-in {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.6s ease-in-out, opacity 0.6s ease-in-out, margin-top 0.6s ease-in-out;
        }
        #map-calc-screen .results-fade-in.show {
            max-height: 1000px; /* Large enough to not clip content */
            opacity: 1;
            margin-top: 2rem; /* Corresponds to mt-8 in Tailwind */
        }
        #map-calc-screen .severity-very-low { background-color: #FEF2F2; color: #991B1B; border-color: #F87171; }
        #map-calc-screen .severity-low { background-color: #FFFBEB; color: #92400E; border-color: #FBBF24; }
         #map-calc-screen .severity-very-low { background-color: #FEF2F2; color: #991B1B; border-color: #F87171; }
        #map-calc-screen .severity-low { background-color: #FFFBEB; color: #92400E; border-color: #FBBF24; }
        #map-calc-screen .severity-normal { background-color: #F0FDF4; color: #166534; border-color: #4ADE80; }
        #map-calc-screen .severity-high { background-color: #FFF1F2; color: #9F1239; border-color: #FB7185; }

        /* --- STYLES FOR ABG ANALYZER --- */
        #abg-calc-screen .calculator-content {
            font-family: 'Rajdhani', sans-serif;
            background-color: #0a0a2a;
            color: #e0e0e0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        #abg-calc-screen .background-grid {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(to right, rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: grid-pan 60s linear infinite;
            z-index: 1;
        }
        @keyframes grid-pan {
            0% { background-position: 0 0; }
            100% { background-position: 1200px 1200px; }
        }
        #abg-calc-screen .abg-main-container {
            background: rgba(10, 10, 42, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 255, 255, 0.1);
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding: 1.5rem;
        }
        #abg-calc-screen .title-font { font-family: 'Orbitron', sans-serif; }
        #abg-calc-screen .neon-text { text-shadow: 0 0 5px rgba(0, 255, 255, 0.8), 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.8); }
        #abg-calc-screen input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 4px; background: rgba(0, 255, 255, 0.2); outline: none; border-radius: 2px; }
        #abg-calc-screen input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: #00ffff; cursor: pointer; border-radius: 50%; border: 2px solid #0a0a2a; box-shadow: 0 0 10px #00ffff; }
        #abg-calc-screen #result-container { transition: all 0.5s ease-in-out; }
         #abg-calc-screen .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, padding 0.5s ease-out; }
        #abg-calc-screen details[open] .accordion-content { max-height: 500px; padding-top: 1rem; }
        #abg-calc-screen details summary::-webkit-details-marker { display: none; }
        #abg-calc-screen details summary { list-style: none; }
        #abg-calc-screen details summary .chevron { transition: transform 0.3s ease-out; }
        #abg-calc-screen details[open] summary .chevron { transform: rotate(180deg); }
        #abg-calc-screen .glass-container {
            background: rgba(10, 10, 42, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 255, 255, 0.1);
        }

        @media (max-width: 640px) {
            .calculator-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            #menstrual-calc-screen .calculator-container { padding: 20px; }
        }
        
        /* --- STYLES FOR FLUID INTAKE CALCULATOR --- */
#fluid-intake-calc-screen .fluid-intake-content {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-grow: 1;
    padding: 1rem;
    background: linear-gradient(135deg, #005c97, #363795);
}

#fluid-intake-calc-screen .fluid-calculator-container {
    width: 100%;
    max-width: 480px;
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 24px;
    border: 1px solid rgba(255, 255, 255, 0.8);
    padding: 2rem;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
}

#fluid-intake-calc-screen .input-group { margin-bottom: 1.5rem; }
#fluid-intake-calc-screen .input-group label { display: block; font-weight: 600; margin-bottom: 0.5rem; }
#fluid-intake-calc-screen .input-wrapper { position: relative; }
#fluid-intake-calc-screen .input-wrapper .unit-icon { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.2rem; pointer-events: none; }
#fluid-intake-calc-screen .input-field { width: 100%; padding: 0.8rem 1rem 0.8rem 3rem; font-size: 1.1rem; border: 2px solid transparent; background-color: rgba(255, 255, 255, 0.7); border-radius: 12px; transition: all 0.3s ease; }
#fluid-intake-calc-screen .input-field:focus { outline: none; border-color: #00b4d8; background-color: #fff; box-shadow: 0 0 0 4px rgba(0, 180, 216, 0.2); }
#fluid-intake-calc-screen .weight-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: linear-gradient(90deg, #00b4d8 0%, rgba(255,255,255,0.5) 0%); border-radius: 5px; outline: none; margin-top: 1rem; cursor: pointer; }
#fluid-intake-calc-screen .weight-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: white; border: 4px solid #363795; border-radius: 50%; cursor: pointer; transition: transform 0.2s ease; }
#fluid-intake-calc-screen .weight-slider::-webkit-slider-thumb:hover { transform: scale(1.1); }
#fluid-intake-calc-screen .btn-reset { width: 100%; padding: 0.8rem 1rem; font-size: 1rem; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; background-color: #e2e8f0; color: #475569; }
#fluid-intake-calc-screen .btn-reset:hover { background-color: #cbd5e1; transform: translateY(-2px); }
#fluid-intake-calc-screen .results-section { text-align: center; max-height: 0; opacity: 0; overflow: hidden; transition: max-height 0.7s ease-in-out, opacity 0.5s ease-in-out, margin-top 0.5s ease-in-out; }
#fluid-intake-calc-screen .results-section.show { max-height: 2000px; opacity: 1; margin-top: 2.5rem; }
#fluid-intake-calc-screen .results-section .label { font-weight: 500; }
#fluid-intake-calc-screen .results-section .value { font-size: 3rem; font-weight: 800; color: #363795; line-height: 1.1; margin-top: 0.25rem; }
#fluid-intake-calc-screen .results-section .unit { font-size: 1.5rem; font-weight: 600; color: #005c97; margin-left: 0.25rem; }
#fluid-intake-calc-screen .calculation-method { font-size: 0.8rem; color: #64748b; margin-top: 0.5rem; background-color: rgba(255, 255, 255, 0.5); padding: 0.5rem; border-radius: 8px; }
#fluid-intake-calc-screen #fluid-chart-container { margin-top: 1.5rem; position: relative; height: 200px; }
#fluid-intake-calc-screen .health-advisory { margin-top: 2.5rem; padding: 1.5rem; background-color: rgba(255, 249, 230, 0.8); border: 1px solid #ffc107; border-radius: 16px; text-align: left; }
#fluid-intake-calc-screen .health-advisory-title { display: flex; align-items: center; font-size: 1.25rem; font-weight: 700; color: #856404; margin-bottom: 1rem; }
#fluid-intake-calc-screen .health-advisory-title svg { width: 28px; height: 28px; margin-right: 0.75rem; flex-shrink: 0; }
#fluid-intake-calc-screen .risk-list { list-style: none; padding: 0; margin-bottom: 1.5rem; }
#fluid-intake-calc-screen .risk-item { display: flex; align-items: flex-start; margin-bottom: 1rem; }
#fluid-intake-calc-screen .risk-item:last-child { margin-bottom: 0; }
#fluid-intake-calc-screen .risk-icon { width: 24px; height: 24px; margin-right: 1rem; color: #363795; flex-shrink: 0; margin-top: 2px; }
#fluid-intake-calc-screen .risk-content h4 { font-weight: 600; margin-bottom: 0.2rem; }
#fluid-intake-calc-screen .risk-content p { font-size: 0.9rem; line-height: 1.5; }
#fluid-intake-calc-screen .recommended-actions { margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px dashed #ffc107; }
#fluid-intake-calc-screen .recommended-actions h4 { font-size: 1.1rem; font-weight: 700; margin-bottom: 0.75rem; }
#fluid-intake-calc-screen .recommended-actions p { font-size: 0.9rem; line-height: 1.6; }
#fluid-intake-calc-screen .recommended-actions strong { color: #005c97; }
        
        /* --- STYLES FOR AUSHADHI GYAN TOOL --- */
#aushadhi-gyan-screen .fade-in { 
    animation: fadeIn 0.4s ease-out forwards; 
}
#aushadhi-gyan-screen .detail-section h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #0e7490;
    margin-bottom: 0.75rem;
    margin-top: 1.5rem;
}
#aushadhi-gyan-screen .detail-section p, 
#aushadhi-gyan-screen .detail-section li {
    font-size: 1rem;
    line-height: 1.7;
    color: #374151;
}
#aushadhi-gyan-screen .detail-section ul {
    list-style-type: disc;
    list-style-position: outside;
    padding-left: 1.5rem;
}
#aushadhi-gyan-screen .detail-section li {
    margin-bottom: 0.5rem;
}
#aushadhi-gyan-screen .loader {
    width: 50px;
    height: 50px;
    border: 5px solid #f3f3f3;
    border-top: 5px solid #0d9488;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
#aushadhi-gyan-screen .gradient-title {
    background: linear-gradient(45deg, #0d9488, #2dd4bf);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-fill-color: transparent;
}
        </style>
     <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
   <div id="app-container" class="app-container">
        <div id="home-screen"><header class="header"><div class="header-main-content"><span class="header-title" data-lang-key="appName"></span><span id="live-datetime" class="live-datetime"></span></div><div class="language-selector"><span class="globe-icon"></span><select id="lang-select"><option value="en">English</option><option value="hi">हिन्दी</option><option value="ta">தமிழ்</option><option value="te">తెలుగు</option><option value="kn">ಕನ್ನಡ</option><option value="gu">ગુજરાતી</option><option value="pa">ਪੰਜਾਬੀ</option><option value="mr">मराठी</option><option value="raj">राजस्थानी</option></select></div></header><div class="ad-bar"></div><main class="main-content"><div class="calculator-grid">
          <a href="#job-portal" class="calculator-card" data-screen="job-portal-screen">
                <div class="icon">🧑‍⚕️</div>
                <div class="name" data-lang-key="job_portal"></div>
              </a>
          <!-- Aushadhi Gyan Card -->
<a href="#aushadhi-gyan" class="calculator-card" data-screen="aushadhi-gyan-screen">
    <div class="icon">🍃</div>
    <div class="name" data-lang-key="aushadhi_gyan"></div>
</a>
          <a href="#antidote" class="calculator-card" data-screen="antidote-finder-screen">
    <div class="icon">⚕️</div>
    <div class="name" data-lang-key="antidote_finder"></div></a>
          <a href="#biomedical-waste" class="calculator-card" data-screen="biomedical-waste-screen">
    <div class="icon">☣️️</div>
    <div class="name" data-lang-key="biomedical_waste"></div>
</a>
            <a href="#drug" class="calculator-card" data-screen="drug-calc-screen"><div class="icon">💊💉</div><div class="name" data-lang-key="drug_calc"></div></a>
            <a href="#bmi" class="calculator-card" data-screen="bmi-calc-screen"><div class="icon">⚖️</div><div class="name" data-lang-key="bmi_calc"></div></a>
            <a href="#age" class="calculator-card" data-screen="age-calc-screen"><div class="icon">📅</div><div class="name" data-lang-key="age_calc"></div></a>
            <a href="#preg" class="calculator-card" data-screen="preg-calc-screen"><div class="icon">🤰</div><div class="name" data-lang-key="preg_calc"></div></a>
            <a href="#tbsa" class="calculator-card" data-screen="tbsa-calc-screen"><div class="icon">🔥</div><div class="name" data-lang-key="tbsa_calc"></div></a>
            <a href="#mass" class="calculator-card" data-screen="mass-calc-screen"><div class="icon">⚛️</div><div class="name" data-lang-key="mass_calc"></div></a>
            <a href="#milestone" class="calculator-card" data-screen="milestone-calc-screen"><div class="icon">👶</div><div class="name" data-lang-key="milestone_calc"></div></a>
            <a href="#menstrual" class="calculator-card" data-screen="menstrual-calc-screen"><div class="icon">🩸</div><div class="name" data-lang-key="menstrual_calc"></div></a>
            <!-- fluid intake calculator cards -->
<a href="#fluid-intake" class="calculator-card" data-screen="fluid-intake-calc-screen">
    <div class="icon">🍹</div>
    <div class="name" data-lang-key="fluid_intake_calc"></div>
</a>
            <a href="#dass21" class="calculator-card" data-screen="dass21-calc-screen"><div class="icon">🧠</div><div class="name" data-lang-key="dass21_calc"></div></a>
            <a href="#ccc" class="calculator-card" data-screen="ccc-calc-screen"><div class="icon">🧪</div><div class="name" data-lang-key="ccc_calc"></div></a>
            <a href="#map" class="calculator-card" data-screen="map-calc-screen"><div class="icon">🫀</div><div class="name" data-lang-key="map_calc"></div></a>
            <a href="#abg" class="calculator-card" data-screen="abg-calc-screen"><div class="icon">🫁</div><div class="name" data-lang-key="abg_calc"></div></a>
            <a href="#pincode" class="calculator-card" data-screen="pincode-calc-screen"><div class="icon">📮</div><div class="name" data-lang-key="pincode_finder"></div></a>
            </div></main><div class="ad-bar"></div><footer class="footer"><p data-lang-key="footer_copyright"></p><div class="footer-links"><a href="#" id="privacy-link" data-lang-key="privacy_policy"></a><a href="#" id="terms-link" data-lang-key="terms_conditions"></a></div></footer></div>
            <div id="biomedical-waste-screen" class="calculator-view">
    <header class="calculator-header">
        <button class="back-button"><div class="back-button-icon"></div></button>
        <h2 class="calculator-title">Biomedical Waste</h2>
    </header>
    <div class="calculator-body">
        <div class="ad-bar"></div>
        <div class="calculator-content">
             <header class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-3">Biomedical Waste Segregation Tool</h1>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">Enter a waste item below or click a container to see what belongs inside.</p>
            </header>
            <div class="max-w-2xl mx-auto mb-8 p-4 bg-white/50 rounded-2xl shadow-sm">
                <div class="flex justify-around items-center gap-2 md:gap-4">
                    <div onclick="showCategoryFromIcon('yellow')" class="icon-basket text-center group">
                        <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto" viewBox="0 0 64 64" fill="#FFC107" xmlns="http://www.w3.org/2000/svg"><path d="M53.3,13.6H42.7V8.3c0-2.3-1.9-4.2-4.2-4.2H25.5c-2.3,0-4.2,1.9-4.2,4.2v5.3H10.7c-2.3,0-4.2,1.9-4.2,4.2v4.2h51.1v-4.2 C57.5,15.5,55.6,13.6,53.3,13.6z M25.5,8.3h12.9v5.3H25.5V8.3z"/><path d="M12.8,55.9c0.1,2.3,2,4.1,4.3,4.1h29.8c2.3,0,4.2-1.8,4.3-4.1L56,26.2H8L12.8,55.9z"/></svg>
                        <span class="text-xs md:text-sm font-semibold text-gray-700 group-hover:text-yellow-600">Yellow</span>
                    </div>
                    <div onclick="showCategoryFromIcon('red')" class="icon-basket text-center group">
                        <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto" viewBox="0 0 64 64" fill="#F44336" xmlns="http://www.w3.org/2000/svg"><path d="M53.3,13.6H42.7V8.3c0-2.3-1.9-4.2-4.2-4.2H25.5c-2.3,0-4.2,1.9-4.2,4.2v5.3H10.7c-2.3,0-4.2,1.9-4.2,4.2v4.2h51.1v-4.2 C57.5,15.5,55.6,13.6,53.3,13.6z M25.5,8.3h12.9v5.3H25.5V8.3z"/><path d="M12.8,55.9c0.1,2.3,2,4.1,4.3,4.1h29.8c2.3,0,4.2-1.8,4.3-4.1L56,26.2H8L12.8,55.9z"/></svg>
                        <span class="text-xs md:text-sm font-semibold text-gray-700 group-hover:text-red-600">Red</span>
                    </div>
                    <div onclick="showCategoryFromIcon('blue')" class="icon-basket text-center group">
                        <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto" viewBox="0 0 64 64" fill="#2196F3" xmlns="http://www.w3.org/2000/svg"><path d="M53.3,13.6H42.7V8.3c0-2.3-1.9-4.2-4.2-4.2H25.5c-2.3,0-4.2,1.9-4.2,4.2v5.3H10.7c-2.3,0-4.2,1.9-4.2,4.2v4.2h51.1v-4.2 C57.5,15.5,55.6,13.6,53.3,13.6z M25.5,8.3h12.9v5.3H25.5V8.3z"/><path d="M12.8,55.9c0.1,2.3,2,4.1,4.3,4.1h29.8c2.3,0,4.2-1.8,4.3-4.1L56,26.2H8L12.8,55.9z"/></svg>
                        <span class="text-xs md:text-sm font-semibold text-gray-700 group-hover:text-blue-600">Blue</span>
                    </div>
                    <div onclick="showCategoryFromIcon('white')" class="icon-basket text-center group">
                        <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto" viewBox="0 0 64 64" fill="#E0E0E0" xmlns="http://www.w3.org/2000/svg"><path d="M53.3,13.6H42.7V8.3c0-2.3-1.9-4.2-4.2-4.2H25.5c-2.3,0-4.2,1.9-4.2,4.2v5.3H10.7c-2.3,0-4.2,1.9-4.2,4.2v4.2h51.1v-4.2 C57.5,15.5,55.6,13.6,53.3,13.6z M25.5,8.3h12.9v5.3H25.5V8.3z"/><path d="M12.8,55.9c0.1,2.3,2,4.1,4.3,4.1h29.8c2.3,0,4.2-1.8,4.3-4.1L56,26.2H8L12.8,55.9z"/></svg>
                        <span class="text-xs md:text-sm font-semibold text-gray-700 group-hover:text-gray-500">White</span>
                    </div>
                    <div onclick="showCategoryFromIcon('black')" class="icon-basket text-center group">
                        <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto" viewBox="0 0 64 64" fill="#212121" xmlns="http://www.w3.org/2000/svg"><path d="M53.3,13.6H42.7V8.3c0-2.3-1.9-4.2-4.2-4.2H25.5c-2.3,0-4.2,1.9-4.2,4.2v5.3H10.7c-2.3,0-4.2,1.9-4.2,4.2v4.2h51.1v-4.2 C57.5,15.5,55.6,13.6,53.3,13.6z M25.5,8.3h12.9v5.3H25.5V8.3z"/><path d="M12.8,55.9c0.1,2.3,2,4.1,4.3,4.1h29.8c2.3,0,4.2-1.8,4.3-4.1L56,26.2H8L12.8,55.9z"/></svg>
                        <span class="text-xs md:text-sm font-semibold text-gray-700 group-hover:text-black">Black</span>
                    </div>
                </div>
            </div>
            <main class="max-w-2xl mx-auto bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="wasteInput" placeholder="e.g., Scalpel, IV Tubing, Placenta..." class="flex-grow w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-blue-200 focus:border-blue-500 outline-none transition duration-300">
                    <button id="segregateBtn" class="w-full sm:w-auto bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg text-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-transform transform hover:scale-105">
                        Segregate
                    </button>
                    <button id="resetBtn" class="w-full sm:w-auto bg-gray-500 text-white font-semibold px-6 py-3 rounded-lg text-lg hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 transition-transform transform hover:scale-105">
                        Reset
                    </button>
                </div>
            </main>
            <section id="result" class="mt-10 max-w-3xl mx-auto">
            </section>
        </div>
        <div class="ad-bar"></div>
    </div>
</div>
        <!-- Aushadhi Gyan Screen -->
<div id="aushadhi-gyan-screen" class="calculator-view">
    <header class="calculator-header">
        <button class="back-button"><div class="back-button-icon"></div></button>
        <h2 id="aushadhi-gyan-title" class="calculator-title" data-lang-key="aushadhi_gyan"></h2>
    </header>
    <div class="calculator-body">
        <div class="ad-bar"></div>
        <div id="aushadhi-gyan-content" class="calculator-content" style="background-color: #f4f7f6; padding: 1rem;">
            <!-- The Aushadhi Gyan tool will be rendered here by JavaScript -->
        </div>
        <div class="ad-bar"></div>
    </div>
</div>
        <div id="drug-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="drug_calc"></h2></header><div class="calculator-body"><div class="ad-bar"></div><div class="calculator-content"><div class="tab-container" id="drug-calc-tabs"><button class="tab-btn active" data-tab="dose-calc-content" data-lang-key="dose_calc_tab"></button><button class="tab-btn" data-tab="fluid-calc-content" data-lang-key="fluid_calc_tab"></button></div><div id="dose-calc-content" class="tab-content active"><div class="form-group"><label for="drug-d" data-lang-key="drug_d_label"></label><input type="number" id="drug-d" placeholder="e.g., 500 mg"></div><div class="form-group"><label for="drug-h" data-lang-key="drug_h_label"></label><input type="number" id="drug-h" placeholder="e.g., 1000 mg"></div><div class="form-group"><label for="drug-v" data-lang-key="drug_v_label"></label><input type="number" id="drug-v" placeholder="e.g., 10 mL"></div><div class="btn-container"><button class="btn btn-primary" id="calc-dose-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-dose-btn" data-lang-key="reset"></button></div><div class="result-box" id="dose-result" style="display:none;"></div></div><div id="fluid-calc-content" class="tab-content"><div class="tab-container" id="fluid-calc-tabs"><button class="tab-btn active" data-tab="mlhr-calc-content" data-lang-key="mlhr_tab"></button><button class="tab-btn" data-tab="dropmin-calc-content" data-lang-key="dropmin_tab"></button></div><div id="mlhr-calc-content" class="tab-content active"><div class="form-group"><label for="fluid-volume-mlhr" data-lang-key="volume_ml"></label><input type="number" id="fluid-volume-mlhr" placeholder="e.g., 1000"></div><div class="form-group"><label for="fluid-time-hr" data-lang-key="time_hr"></label><input type="number" id="fluid-time-hr" placeholder="e.g., 8"></div><div class="btn-container"><button class="btn btn-primary" id="calc-mlhr-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-mlhr-btn" data-lang-key="reset"></button></div></div><div id="dropmin-calc-content" class="tab-content"><div class="form-group"><label for="fluid-volume-drop" data-lang-key="volume_ml"></label><input type="number" id="fluid-volume-drop" placeholder="e.g., 1000"></div><div class="form-group"><label for="fluid-time-min" data-lang-key="time_min"></label><input type="number" id="fluid-time-min" placeholder="e.g., 480"></div><div class="form-group"><label for="drop-factor" data-lang-key="drop_factor"></label><input type="number" id="drop-factor" placeholder="e.g., 15"></div><div class="btn-container"><button class="btn btn-primary" id="calc-dropmin-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-dropmin-btn" data-lang-key="reset"></button></div></div><div class="result-box" id="fluid-result" style="display:none;"></div></div></div><div class="ad-bar"></div></div></div>
        <div id="job-portal-screen" class="calculator-view">
            <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="job_portal">Job Portal</h2>
            </header>
            <div class="calculator-body">
                <div class="j4n-header">
                  <div class="j4n-nav">
                    <div class="top-nav">
                      <a class="brand" href="#" aria-label="Job4Nurse home">
                        <div class="logo"><span>J4N</span></div>
                        <div>
                          <div class="title">Job4Nurse</div>
                          <div class="subtitle">Daily nurse jobs • Apply fast</div>
                        </div>
                      </a>
                      <button id="postBtn" class="btn" title="Quick post a job">+ Post Job</button>
                    </div>
                    <div class="controls">
                      <div class="search-container">
                        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        <input id="search" class="input" type="search" placeholder="Search hospital, department, keyword…" aria-label="Search jobs" />
                      </div>
                      <select id="country" aria-label="Filter by Country">
                        <option value="">All Countries</option>
                        <option value="UAE">UAE</option>
                        <option value="India">India</option>
                      </select>
                      <select id="city" aria-label="Filter by City">
                        <option value="">All Cities</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <main>
                  <div class="meta">
                    <div class="count"><span id="resultCount">0</span> jobs</div>
                  </div>
                  <div id="grid" class="grid"></div>
                </main>

                <div id="toast"></div>

                <div class="j4n-footer">
                  <div class="footer-nav">
                    <button id="footerHomeBtn" class="footer-btn" title="Home">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    </button>
                    <a href="#top" class="footer-btn" title="Latest Posts">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>
                    </a>
                    <button id="footerBackBtn" class="footer-btn" title="Back">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    </button>
                  </div>
                </div>

                <dialog id="postModal">
                  <div class="dialog-header">
                    <h3>Quick Post a Job</h3>
                  </div>
                  <form method="dialog" class="quick" id="postForm">
                    <div class="form-group"><label for="facilityName">Facility Name</label><input id="facilityName" required name="facilityName" /></div>
                    <div class="form-group"><label for="address">Address</label><input id="address" required name="address" /></div>
                    <div class="form-group"><label for="position">Position</label><input id="position" required name="position" /></div>
                    <div class="form-group"><label for="department">Department</label><input id="department" required name="department" /></div>
                    <div class="form-group"><label for="education">Education</label><input id="education" required name="education" /></div>
                    <div class="form-group"><label for="experience">Experience</label><input id="experience" required name="experience" /></div>
                    <div class="form-group"><label for="salary">Salary</label><input id="salary" required name="salary" /></div>
                    <div class="form-group"><label for="applyUrl">Apply URL</label><input id="applyUrl" required name="applyUrl" /></div>
                    <div class="form-group full-width"><label for="notes">Notes (Optional)</label><textarea id="notes" name="notes"></textarea></div>
                    <div class="actions">
                      <button type="button" class="ghost" id="cancelPostBtn">Cancel</button>
                      <button class="btn" value="default">Add Job</button>
                    </div>
                  </form>
                </dialog>
            </div>
        </div>
            
         <div id="bmi-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="bmi_calc"></h2></header><div class="calculator-body"><div class="ad-bar"></div><div class="calculator-content"><div class="bmi-inputs"><div class="form-group"><label data-lang-key="gender"></label><select id="bmi-gender"><option value="male" data-lang-key="male"></option><option value="female" data-lang-key="female"></option></select></div><div class="form-group"><label for="bmi-age" data-lang-key="age_years"></label><input type="number" id="bmi-age" placeholder="e.g., 25"></div><div class="form-group"><label for="bmi-height" data-lang-key="height_cm"></label><input type="number" id="bmi-height" placeholder="e.g., 175"></div><div class="form-group"><label for="bmi-weight" data-lang-key="weight_kg"></label><input type="number" id="bmi-weight" placeholder="e.g., 70"></div></div><div class="btn-container"><button class="btn btn-primary" id="calc-bmi-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-bmi-btn" data-lang-key="reset"></button></div><div class="result-box" id="bmi-result" style="display:none;"><p><span data-lang-key="your_bmi"></span> <strong id="bmi-value"></strong></p><p><span data-lang-key="category"></span> <strong id="bmi-category"></strong></p><div class="progress-bar-container"><div class="progress-bar" id="bmi-progress-bar"></div></div></div></div><div class="ad-bar"></div></div></div>
         <div id="antidote-finder-screen" class="calculator-view">
    <header class="calculator-header">
        <button class="back-button"><div class="back-button-icon"></div></button>
        <h2 class="calculator-title" data-lang-key="antidote_finder"></h2>
    </header>
    <div class="calculator-body">
        <div class="ad-bar"></div>
        <div class="calculator-content" style="background-color: #f0f4f8; padding: 1rem;">
            <div class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <div class="text-center mb-8">
                    <div class="flex justify-center items-center gap-3">
                         <svg class="w-10 h-10 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 tracking-tight">Antidote Finder</h1>
                    </div>
                    <p class="text-gray-500 mt-2">Search for a toxic agent OR an antidote.</p>
                </div>

                <div class="relative flex flex-col sm:flex-row gap-3 mb-6">
                    <input type="text" id="antidote-drug-input" placeholder="e.g., Acetaminophen or N-acetylcysteine..." class="flex-grow w-full pl-5 pr-12 py-3.5 text-gray-700 bg-gray-100 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-200 focus:border-blue-500 transition duration-300">
                    <div class="flex gap-3 mt-2 sm:mt-0">
                         <button id="antidote-find-btn" class="w-full sm:w-auto px-6 py-3.5 bg-blue-600 text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-blue-500 transform hover:-translate-y-0.5 transition-all duration-200">Find</button>
                         <button id="antidote-reset-btn" class="w-full sm:w-auto px-6 py-3.5 bg-gray-700 text-white font-bold rounded-xl shadow-lg hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-400 transition-all transform hover:-translate-y-0.5 transition-all duration-200">Reset</button>
                    </div>
                </div>
                
                <div id="antidote-result-container" class="mt-6 min-h-[100px]">
                    </div>
            </div>
        </div>
        <div class="ad-bar"></div>
    </div>
</div>
         <div id="age-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="age_calc"></h2></header><div class="calculator-body"><div class="ad-bar"></div><div class="calculator-content"><div class="form-group"><label for="dob" data-lang-key="dob"></label><input type="date" id="dob"></div><div class="btn-container"><button class="btn btn-primary" id="calc-age-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-age-btn" data-lang-key="reset"></button></div><div class="result-box" id="age-result" style="display:none;"><p><strong data-lang-key="your_age"></strong></p><p id="age-output"></p><p id="next-birthday-output"></p></div></div><div class="ad-bar"></div></div></div>
         <div id="preg-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="preg_calc"></h2></header><div class="calculator-body"><div class="ad-bar"></div><div class="calculator-content"><div class="input-card"><div class="form-group"><label for="lmp" data-lang-key="lmp_date"></label><input type="date" id="lmp"></div><div class="btn-container"><button class="btn btn-primary" id="calc-edd-btn" data-lang-key="calculate"></button><button class="btn btn-secondary" id="reset-edd-btn" data-lang-key="reset"></button></div></div><div id="edd-result-container"><div class="result-card-main"><div class="label" data-lang-key="edd_title"></div><div id="edd-value" class="value"></div></div><div class="result-card-grid"><div class="progress-section" style="grid-column: 1 / -1;"><div class="label" data-lang-key="progress_label"></div><div class="pregnancy-progress-bar-container"><div id="pregnancy-progress-bar" class="pregnancy-progress-bar"></div></div><div id="gestational-age-value" class="gestational-age"></div></div><div class="info-item"><div class="icon">🗓️</div><div class="label" data-lang-key="current_trimester"></div><div id="trimester-value" class="value"></div></div><div class="info-item"><div class="icon">💕</div><div class="label" data-lang-key="conception_date"></div><div id="conception-date-value" class="value"></div></div><div class="info-item" style="grid-column: 1 / -1;"><div class="icon">⏳</div><div class="label" data-lang-key="days_remaining"></div><div id="days-remaining-value" class="value"></div></div></div><div class="result-card-timeline"><div class="timeline-item"><div class="icon">1️⃣</div><div><div class="label" data-lang-key="end_of_first_trimester"></div><div id="first-trimester-end-date" class="date"></div></div></div><div class="timeline-item"><div class="icon">2️⃣</div><div><div class="label" data-lang-key="end_of_second_trimester"></div><div id="second-trimester-end-date" class="date"></div></div></div><div class="timeline-item"><div class="icon">3️⃣</div><div><div class="label" data-lang-key="end_of_third_trimester"></div><div id="third-trimester-end-date" class="date"></div></div></div></div><div class="result-card-info"><div class="info-section"><h3 class="info-title" data-lang-key="health_tips_title"></h3><p id="health-tips-content"></p></div><div class="info-section"><h3 class="info-title" data-lang-key="baby_growth_title"></h3><p id="baby-growth-content"></p></div></div></div></div><div class="ad-bar"></div></div></div>
          <div id="tbsa-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="tbsa_calc"></h2></header><div class="calculator-body"><div class="ad-bar"></div><div class="calculator-content"><div class="tbsa-container">
<svg class="tbsa-svg" id="tbsa-adult-svg" viewBox="-20 -20 260 350" xmlns="http://www.w3.org/2000/svg"><text x="50" y="0" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">Front</text><text x="170" y="0" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">Back</text><g id="front-view"><path d="M50,5 A25,25 0 1,1 50,55 A25,25 0 0,1 50,5" data-percent="4.5"/><path d="M30,60 h40 l5,50 h-50 z" data-percent="9"/><path d="M25,110 h50 l5,50 h-60 z" data-percent="9"/><path d="M30,65 l-20,70 l10,5 z" data-percent="4.5"/><path d="M70,65 l20,70 l-10,5 z" data-percent="4.5"/><path d="M45,160 h10 v10 h-10 z" data-percent="1"/><path d="M20,170 h25 l-5,120 h-20 z" data-percent="9"/><path d="M55,170 h25 l5,120 h-20 z" data-percent="9"/></g><g id="back-view" transform="translate(120, 0)"><path d="M50,5 A25,25 0 1,1 50,55 A25,25 0 0,1 50,5" data-percent="4.5"/><path d="M30,60 h40 l10,100 h-60 z" data-percent="18"/><path d="M30,65 l-20,70 l10,5 z" data-percent="4.5"/><path d="M70,65 l20,70 l-10,5 z" data-percent="4.5"/><path d="M20,170 h25 l-5,120 h-20 z" data-percent="9"/><path d="M55,170 h25 l5,120 h-20 z" data-percent="9"/></g></svg>
<div class="tbsa-controls"><div class="result-box" style="margin-top:0;"><h3 data-lang-key="total_tbsa"></h3><p style="font-size: 2em; font-weight: bold;"><span id="tbsa-total">0.0</span>%</p></div><div class="btn-container"><button class="btn btn-clear" id="clear-tbsa-btn" data-lang-key="clear"></button></div></div></div></div><div class="ad-bar"></div></div></div>
<div id="mass-calc-screen" class="calculator-view"><header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="mass_calc"></h2></header><div class="calculator-body"><main class="converter-card"><h1 class="converter-title">Unit Converter<span>⚡</span></h1><section class="inputs-section"><div class="form-row"><label for="inputValue">Value to Convert:</label><input type="number" id="inputValue" class="input-field" placeholder="Enter value" min="0" step="any"></div><div class="form-row"><label for="fromUnit">From Unit:</label><select id="fromUnit" class="select-field"><option value="mg">Milligrams (mg)</option><option value="mcg">Micrograms (mcg)</option><option value="gm">Grams (gm)</option></select></div><div class="form-row"><label for="toUnit">To Unit:</label><select id="toUnit" class="select-field"><option value="mcg">Micrograms (mcg)</option><option value="mg" selected>Milligrams (mg)</option><option value="gm">Grams (gm)</option></select></div></section><section class="action-buttons"><button id="convertButton" class="btn btn-convert">Convert</button><button id="clearButton" class="btn btn-clear-mass">Clear</button></section><section class="result-card"><h2>Converted Result:</h2><p id="resultDisplay" class="result-value animate-result">0 <span id="resultUnit">mcg</span></p><button id="copyButton" class="btn btn-copy"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg> Copy Result</button></section><div id="messageBox" class="message-box-mass hidden" role="alert"></div></main><div class="ad-bar"></div></div></div>
        
        <div id="milestone-calc-screen" class="calculator-view">
            <header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="milestone_calc"></h2></header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                    <div class="input-card">
                        <div class="form-group">
                            <label for="milestone-dob" data-lang-key="child_dob"></label>
                            <input type="date" id="milestone-dob">
                        </div>
                        <div class="btn-container">
                            <button class="btn btn-primary" id="calc-milestone-btn" data-lang-key="check_milestones"></button>
                            <button class="btn btn-secondary" id="reset-milestone-btn" data-lang-key="reset"></button>
                        </div>
                    </div>
                    
                    <div id="milestone-result-container">
                        </div>
                </div>
                <div class="ad-bar"></div>
            </div>
        </div>
        
         <div id="menstrual-calc-screen" class="calculator-view">
            <header class="calculator-header"><button class="back-button"><div class="back-button-icon"></div></button><h2 class="calculator-title" data-lang-key="menstrual_calc"></h2></header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                     <div class="calculator-container">
                        <h1 data-lang-key="menstrual_title">Menstrual Cycle & Health Tracker</h1>
                        
                        <div class="input-group">
                            <label for="last-period-date" data-lang-key="last_period_label">First Day of Your Last Period:</label>
                            <input type="date" id="last-period-date" required>
                        </div>

                        <div class="input-group">
                            <label for="cycle-length" data-lang-key="cycle_length_label">Average Cycle Length (in days):</label>
                            <input type="number" id="cycle-length" value="28" min="20" max="45" required>
                        </div>

                        <div class="btn-container">
                             <button id="calculate-btn" class="btn btn-primary" data-lang-key="calculate_update_btn" style="flex:2;">Calculate & Update</button>
                             <button id="reset-menstrual-btn" class="btn btn-secondary" data-lang-key="reset" style="flex:1;">Reset</button>
                        </div>

                        <div id="results" class="results-section hidden">
                            </div>
                        
                        <div id="conception-tips" class="results-section hidden">
                            <h2 data-lang-key="conception_title">❤️ Safe Days for Intercourse to Conceive</h2>
                            <p data-lang-key="conception_desc">Your chances of getting pregnant are highest during your peak fertile window. For this cycle, that is:</p>
                            <p class="highlight-conception" id="peak-fertility-dates" style="font-size: 1.1rem; text-align: center; margin-top: 10px;"></p>
                        </div>

                        <div id="educational-tips" class="results-section hidden">
                            <h2 data-lang-key="health_tip_title">💡 Health Tip for Your Current Phase</h2>
                            <p id="tip-content"></p>
                        </div>
                        
                        <div id="symptom-tracker" class="results-section hidden">
                            <h2 data-lang-key="symptom_log_title">📝 Log Today's Symptoms & Mood</h2>
                            <div class="symptom-grid">
                                </div>
                        </div>
                        
                        <div id="cycle-history" class="results-section hidden">
                            <h2 data-lang-key="cycle_history_title">📜 Recent Cycle History</h2>
                            <ul id="history-list">
                                </ul>
                        </div>

                        <div id="doctor-info" class="results-section hidden">
                            <h2 data-lang-key="consult_doctor_title_mens">👩‍⚕️ When to Consult a Doctor</h2>
                            <p data-lang-key="consult_doctor_desc_mens">Consult a healthcare professional if you experience persistent irregularities, such as:</p>
                            <ul>
                                <li data-lang-key="doctor_cond_1">Your periods suddenly stop for more than 90 days.</li>
                                <li data-lang-key="doctor_cond_2">Your cycles become very erratic after being regular.</li>
                                <li data-lang-key="doctor_cond_3">Your period lasts longer than 7 days or is extremely heavy.</li>
                                <li data-lang-key="doctor_cond_4">Your cycles are consistently shorter than 21 days or longer than 35 days.</li>
                                <li data-lang-key="doctor_cond_5">You experience severe pain, cramping, or nausea during your period.</li>
                            </ul>
                        </div>
                        
                        <p class="disclaimer" data-lang-key="disclaimer_mens">
                            This tracker provides estimations and is not a substitute for professional medical advice.
                        </p>
                    </div>
                </div>
                <div class="ad-bar"></div>
            </div>
        </div>

 <div id="pincode-calc-screen" class="calculator-view">
            <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="pincode_finder"></h2>
            </header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                    <div class="pincode-container">
                        <h1 data-lang-key="pincode_finder_title">Pincode Finder</h1>
                        <form id="pincode-form">
                            <input type="text" id="pincode-search-input" class="search-box" placeholder="Enter City or Village Name...">
                            <div class="btn-container">
                                <button type="submit" class="btn btn-primary" style="flex:2;" data-lang-key="search_btn">Search</button>
                                <button type="button" id="pincode-reset-btn" class="btn btn-secondary" style="flex:1;" data-lang-key="reset">Reset</button>
                            </div>
                        </form>
                        <div id="pincode-result-container">
                            <p id="pincode-message" data-lang-key="pincode_initial_msg">Enter a location and click search to see results.</p>
                            </div>
                    </div>
                </div>
                <div class="ad-bar"></div>
            </div>
        </div>

<!-- Fluid Intake Calculator Screen -->
<div id="fluid-intake-calc-screen" class="calculator-view">
    <header class="calculator-header">
        <button class="back-button"><div class="back-button-icon"></div></button>
        <h2 class="calculator-title" data-lang-key="fluid_intake_calc"></h2>
    </header>
    <div class="calculator-body">
        <div class="ad-bar"></div>
        <div class="fluid-intake-content">
            <div class="fluid-calculator-container">
                <main>
                    <div class="input-group">
                        <label for="weight-input">Patient's Weight</label>
                        <div class="input-wrapper">
                            <span class="unit-icon">⚖️</span>
                            <input type="number" id="weight-input" class="input-field" placeholder="e.g., 70" min="0" max="200">
                        </div>
                        <input type="range" id="weight-slider" class="weight-slider" min="0" max="200" value="0">
                    </div>

                    <button id="fluid-reset-btn" class="btn-reset">Reset</button>

                    <section id="fluid-results-section" class="results-section">
                        <p class="label">Recommended Daily Fluid Intake:</p>
                        <div>
                            <span id="fluid-result-value" class="value">0</span>
                            <span class="unit">mL</span>
                        </div>
                        <p class="calculation-method">
                            Calculation based on the <strong>Holliday-Segar method</strong>.
                        </p>
                        <div id="fluid-chart-container">
                            <canvas id="fluid-breakdown-chart"></canvas>
                        </div>

                        <!-- Health Advisory Section -->
                        <div class="health-advisory">
                            <h3 class="health-advisory-title">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                                <span data-lang-key="health_advisory_title"></span>
                            </h3>
                            <ul class="risk-list">
                                <li class="risk-item">
                                    <svg class="risk-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                                    <div class="risk-content">
                                        <h4 data-lang-key="risk_kidney_title"></h4>
                                        <p data-lang-key="risk_kidney_desc"></p>
                                    </div>
                                </li>
                                <li class="risk-item">
                                    <svg class="risk-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                    <div class="risk-content">
                                        <h4 data-lang-key="risk_cognitive_title"></h4>
                                        <p data-lang-key="risk_cognitive_desc"></p>
                                    </div>
                                </li>
                                 <li class="risk-item">
                                    <svg class="risk-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" /></svg>
                                    <div class="risk-content">
                                        <h4 data-lang-key="risk_digestive_title"></h4>
                                        <p data-lang-key="risk_digestive_desc"></p>
                                    </div>
                                </li>
                            </ul>
                            <div class="recommended-actions">
                                <h4 data-lang-key="actions_title"></h4>
                                <p data-lang-key="actions_desc"></p>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
        </div>
        <div class="ad-bar"></div>
    </div>
</div>

        <!-- NEW: DASS-21 Calculator Screen -->
        <div id="dass21-calc-screen" class="calculator-view">
            <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="dass21_calc"></h2>
            </header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                    <main class="w-full max-w-2xl mx-auto">
                        <!-- Start Screen -->
                        <div id="dass21-start-screen" class="bg-white rounded-2xl shadow-xl p-8 text-center">
                            <h1 class="text-3xl font-bold text-gray-800">Mental Well-being Assessment</h1>
                            <p class="text-gray-600 mt-4 max-w-prose mx-auto">This is the DASS-21, a set of 21 questions to measure the emotional states of depression, anxiety, and stress. Please read each statement and choose the option that indicates how much the statement applied to you <strong class="text-blue-600">over the past week</strong>.</p>
                            <button id="dass21-start-btn" class="mt-8 w-full sm:w-auto bg-blue-600 text-white font-semibold py-3 px-10 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all transform hover:scale-105 shadow-md hover:shadow-lg">
                                Start Test
                            </button>
                        </div>
                        
                        <!-- Quiz Screen -->
                        <div id="dass21-quiz-screen" class="hidden bg-white rounded-2xl shadow-xl p-8">
                            <!-- Progress Bar -->
                            <div class="mb-6">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-600">Progress</span>
                                    <span id="dass21-progress-text" class="text-sm font-bold text-blue-600"></span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div id="dass21-progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300"></div>
                                </div>
                            </div>

                            <!-- Question Area -->
                            <div class="text-center min-h-[100px]">
                                <h2 id="dass21-question-text" class="text-xl md:text-2xl font-semibold text-gray-800"></h2>
                            </div>
                            
                            <!-- Options Area -->
                            <div id="dass21-options-container" class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <!-- Options will be injected by JavaScript -->
                            </div>
                        </div>

                        <!-- Results Screen -->
                        <div id="dass21-results-screen" class="hidden bg-white rounded-2xl shadow-xl p-8">
                            <h1 class="text-3xl font-bold text-gray-800 text-center">Your Results</h1>
                            <p class="text-gray-600 text-center mt-2">Here is your score for each category based on the DASS-21 scale.</p>
                            
                            <div id="dass21-results-grid" class="mt-8 space-y-4">
                                <!-- Result cards will be injected by JavaScript -->
                            </div>

                            <div class="mt-8">
                                <h2 class="text-xl font-bold text-gray-800 mb-4">Recommendations For You</h2>
                                <ul id="dass21-recommendation-list" class="space-y-3">
                                    <!-- Recommendations will be injected here -->
                                </ul>
                            </div>
                            
                            <div class="mt-8 text-center">
                                <p class="text-xs text-gray-500 bg-gray-100 p-3 rounded-lg">
                                    <strong>Disclaimer:</strong> This tool is for informational purposes only and does not provide a diagnosis. The results are based on your self-reported answers. For an accurate assessment of your health, please consult with a qualified doctor or mental health professional.
                                </p>
                                <div class="mt-6 flex flex-col sm:flex-row gap-4">
                                    <button id="dass21-restart-btn" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all transform hover:scale-105">
                                        Take Test Again
                                    </button>
                                     <button id="dass21-exit-btn" class="w-full bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-400 transition-all transform hover:scale-105">
                                        Exit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
                 <div class="ad-bar"></div>
            </div>
        </div>

 <!-- NEW: Creatinine Clearance Calculator Screen -->
        <div id="ccc-calc-screen" class="calculator-view">
            <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="ccc_calc"></h2>
            </header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                     <div class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 md:p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Creatinine Clearance Calculator</h1>
                            <p class="text-gray-500 mt-2">Based on the Cockcroft-Gault Equation</p>
                        </div>
                        <form id="ccc-calculator-form" class="space-y-5">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
                                <div>
                                    <label for="ccc-age" class="block text-sm font-medium text-gray-600 mb-1">Age (years)</label>
                                    <div class="relative">
                                        <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg>
                                        </div>
                                        <input type="number" id="ccc-age" name="age" class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="e.g., 55" required>
                                    </div>
                                </div>
                                <div>
                                    <label for="ccc-weight" class="block text-sm font-medium text-gray-600 mb-1">Weight (kgs)</label>
                                     <div class="relative">
                                        <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.036.243c-2.132 0-4.14-.352-6.07-.993M15.75 4.97a52.966 52.966 0 01-3.75 0M15.75 4.97L11.25 15.7c-.122.499.106 1.028.589 1.202a5.989 5.989 0 002.036.243c2.132 0 4.14-.352 6.07-.993" /></svg>
                                        </div>
                                        <input type="number" id="ccc-weight" name="weight" class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="e.g., 70" required>
                                    </div>
                                </div>
                                <div>
                                  <label for="ccc-creatinine" class="block text-sm font-medium text-gray-600 mb-1">Serum Creatinine (mg/dL)</label>
                                     <div class="relative">
                                        <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M.2 10a11 11 0 0119.6 0A11 11 0 01.2 10zm9.8 4a4 4 0 100-8 4 4 0 000 8z" /></svg>
                                        </div>
                                        <input type="number" step="0.1" id="ccc-creatinine" name="creatinine" class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="e.g., 1.2" required>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-600 mb-2">Gender</label>
                                    <div class="flex items-center space-x-6 h-full -mt-1">
                                        <label class="flex items-center cursor-pointer p-2 rounded-lg hover:bg-gray-100 transition">
                                            <input type="radio" name="ccc-gender" value="male" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                                            <span class="ml-2 text-gray-700">Male</span>
                                        </label>
                                        <label class="flex items-center cursor-pointer p-2 rounded-lg hover:bg-gray-100 transition">
                                            <input type="radio" name="ccc-gender" value="female" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                            <span class="ml-2 text-gray-700">Female</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row gap-4 pt-6">
                                <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all transform hover:-translate-y-1 shadow-md hover:shadow-lg">
                                    Calculate
                                </button>
                                <button type="button" id="ccc-reset-btn" class="w-full bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-400 transition-all transform hover:-translate-y-1 shadow-md hover:shadow-lg">
                                    Reset
                                </button>
                            </div>
                        </form>
                        <div id="ccc-error-message" class="hidden mt-6 text-center text-red-700 bg-red-100 p-3 rounded-lg font-medium"></div>
                        <div id="ccc-results-section" class="results-fade-in">
                          <h2 class="text-xl font-bold text-gray-800 text-center mb-4">Your Results</h2>
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                    <p class="text-sm text-blue-600 font-medium">mL / minute</p>
                                    <p id="ccc-result-ml-min" class="text-3xl font-bold text-blue-800 mt-1"></p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <p class="text-sm text-green-600 font-medium">mL / hour</p>
                                    <p id="ccc-result-ml-hr" class="text-3xl font-bold text-green-800 mt-1"></p>
                                </div>
                                <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                                    <p class="text-sm text-indigo-600 font-medium">Liter / hour</p>
                                    <p id="ccc-result-l-hr" class="text-3xl font-bold text-indigo-800 mt-1"></p>
                                </div>
                            </div>
                            <div id="ccc-recommendation-card" class="mt-6 p-5 rounded-lg transition-colors duration-300">
                                <h3 id="ccc-recommendation-title" class="text-lg font-semibold mb-3 flex items-center"></h3>
                                <ul id="ccc-recommendation-list" class="space-y-2 text-sm">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="ad-bar"></div>
            </div>
        </div>
        
         <!-- NEW: MAP Calculator Screen -->
        <div id="map-calc-screen" class="calculator-view">
             <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="map_calc"></h2>
            </header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                    <div class="w-full max-w-lg bg-white rounded-2xl shadow-xl p-6 md:p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-2xl md:text-3xl font-extrabold text-gray-800">Mean Arterial Pressure (MAP) Calculator</h1>
                            <p class="text-gray-500 mt-2">Calculate MAP to assess organ perfusion.</p>
                        </div>
                        <form id="map-calculator-form" class="space-y-6">
                            <div>
                                <label for="map-systolic" class="block text-sm font-medium text-gray-700 mb-1">Systolic Blood Pressure (SBP)</label>
                                <div class="relative">
                                    <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                                    </div>
                                    <input type="number" id="map-systolic" name="systolic" class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="e.g., 120 mmHg" required>
                                </div>
                            </div>
                            <div>
                                <label for="map-diastolic" class="block text-sm font-medium text-gray-700 mb-1">Diastolic Blood Pressure (DBP)</label>
                                <div class="relative">
                                     <div class="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                                    </div>
                                    <input type="number" id="map-diastolic" name="diastolic" class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="e.g., 80 mmHg" required>
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                              <button type="submit" class="w-full bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition-all transform hover:-translate-y-1 shadow-md hover:shadow-lg">
                                    Calculate MAP
                                </button>
                                <button type="button" id="map-reset-btn" class="w-full bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-400 transition-all transform hover:-translate-y-1 shadow-md hover:shadow-lg">
                                    Reset
                                </button>
                            </div>
                        </form>
                        <div id="map-error-message" class="hidden mt-6 text-center text-red-700 bg-red-100 p-3 rounded-lg font-medium"></div>
                        <div id="map-results-section" class="results-fade-in">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-center">
                                <div id="map-card" class="p-4 rounded-lg border-l-4 transition-colors duration-300">
                                    <p class="text-sm font-medium">Mean Arterial Pressure (MAP)</p>
                                    <p id="map-value" class="text-4xl font-extrabold mt-1"></p>
                                    <p id="map-level" class="text-md font-semibold"></p>
                                </div>
                                <div class="bg-gray-100 p-4 rounded-lg border-l-4 border-gray-400">
                                    <p class="text-sm font-medium text-gray-600">Pulse Pressure (PP)</p>
                                    <p id="map-pp-value" class="text-4xl font-extrabold text-gray-800 mt-1"></p>
                                    <p id="map-pp-level" class="text-md font-semibold text-gray-700"></p>
                                </div>
                            </div>
                            <div class="mt-8">
                                <h2 class="text-xl font-bold text-gray-800 mb-4">Recommendations For You</h2>
                                <ul id="map-recommendation-list" class="space-y-3">
                                </ul>
                            </div>
                            <div class="mt-8 text-center">
                                <p class="text-xs text-gray-500 bg-gray-100 p-3 rounded-lg">
                                    <strong>Disclaimer:</strong> This tool provides information based on general knowledge and is not a substitute for professional medical advice. Always consult with your doctor for any health concerns.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="ad-bar"></div>
            </div>
        </div>

 <!-- NEW: ABG Analyzer Screen -->
        <div id="abg-calc-screen" class="calculator-view">
             <header class="calculator-header">
                <button class="back-button"><div class="back-button-icon"></div></button>
                <h2 class="calculator-title" data-lang-key="abg_calc"></h2>
            </header>
            <div class="calculator-body">
                <div class="ad-bar"></div>
                <div class="calculator-content">
                    <div class="background-grid"></div>
                    <main class="abg-main-container">
                        <header class="text-center mb-8">
                            <h1 class="title-font text-3xl md:text-4xl font-bold neon-text">
                                Comprehensive ABG Analyzer
                            </h1>
                            <p class="text-cyan-300 mt-2">Clinical Interpretation with Causes & Interventions</p>
                        </header>

                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                            
                            <div class="lg:col-span-2 space-y-6">
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <label for="ph" class="font-semibold text-lg">pH <span class="text-sm text-gray-400">(7.35-7.45)</span></label>
                                        <input type="number" id="ph_val" class="w-24 bg-transparent border-b-2 border-cyan-500 text-center text-lg font-bold" value="7.40" step="0.01">
                                    </div>
                                    <input type="range" id="ph" min="6.8" max="8.0" value="7.40" step="0.01" class="w-full">
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <label for="pco2" class="font-semibold text-lg">pCO₂ <span class="text-sm text-gray-400">(35-45 mmHg)</span></label>
                                        <input type="number" id="pco2_val" class="w-24 bg-transparent border-b-2 border-cyan-500 text-center text-lg font-bold" value="40" step="1">
                                    </div>
                                    <input type="range" id="pco2" min="10" max="100" value="40" step="1" class="w-full">
                                </div>

                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <label for="hco3" class="font-semibold text-lg">HCO₃⁻ <span class="text-sm text-gray-400">(22-28 mEq/L)</span></label>
                                        <input type="number" id="hco3_val" class="w-24 bg-transparent border-b-2 border-cyan-500 text-center text-lg font-bold" value="25" step="1">
                                       </div>
                                    <input type="range" id="hco3" min="5" max="50" value="25" step="1" class="w-full">
                                </div>
<div class="flex flex-col sm:flex-row gap-4 mt-4">
    <button id="analyzeBtn" class="w-full bg-cyan-500 hover:bg-cyan-400 text-gray-900 font-bold py-3 px-4 rounded-lg text-lg title-font transition-all duration-300 transform hover:scale-105 shadow-[0_0_15px_rgba(0,255,255,0.5)]">
        ANALYZE
    </button>
    <button id="abg-reset-btn" class="w-full bg-transparent border-2 border-cyan-700 text-cyan-400 font-bold py-3 px-4 rounded-lg text-lg title-font transition-all duration-300 hover:bg-cyan-500 hover:text-gray-900 hover:shadow-[0_0_15px_rgba(0,255,255,0.5)]">
        RESET
    </button>
</div>
                                
                            </div>

                            <div id="result-container" class="lg:col-span-3 glass-container rounded-lg p-6 border border-cyan-700">
                                <div id="result-header" class="text-center">
                                    <h2 id="result-title" class="title-font text-2xl font-bold text-white mb-2">Awaiting Analysis...</h2>
                                    <p id="result-subtitle" class="text-lg text-cyan-300 mb-4">Enter values for interpretation</p>
                                </div>
                                <div id="result-details" class="mt-4 space-y-4">
                                    <!-- Dynamic content will be injected here -->
                                </div>
                            </div>

                        </div>
                    </main>
                </div>
                <div class="ad-bar"></div>
            </div>
        </div>
        
        <div id="policy-modal" class="modal-overlay"><div class="modal-content"><button class="modal-close-btn">×</button><h2 id="modal-title"></h2><div id="modal-text"></div></div></div>
        <div id="rate-us-modal" class="modal-overlay"><div class="modal-content" style="text-align: center;"><button class="modal-close-btn">×</button><h2 data-lang-key="rate_us_title"></h2><p data-lang-key="rate_us_desc"></p><br><button class="btn btn-primary" id="rate-now-btn" data-lang-key="rate_now"></button></div></div>
    </div>
    
    <script>
 
 document.addEventListener('DOMContentLoaded', function() {
        const translations = {
            'en': { 
                appName: 'InstaNurse', adSpace: '', footer_copyright: '2025@InstaNurse: All Rights Reserved.', privacy_policy: 'Privacy Policy', terms_conditions: 'Terms & Condition', 
                drug_calc: 'Drug Calculator', bmi_calc: 'BMI Calculator',appName: 'InstaNurse',
                job_portal: 'Job Portal', age_calc: 'Age Calculator', preg_calc: 'Pregnancy EDD', tbsa_calc: 'TBSA Burn Calculator', mass_calc: 'Unit Converter', milestone_calc: 'Pediatric Milestones', menstrual_calc: 'Menstrual Cycle', pincode_finder: 'Pincode Finder', fluid_intake_calc: 'Fluid Intake Calculator', 
                biomedical_waste: 'Biomedical Waste',
    health_advisory_title: 'Health Advisory: Risks of Insufficient Intake',
    risk_kidney_title: 'Kidney Stones & UTIs',
    risk_kidney_desc: 'Dehydration leads to concentrated urine, increasing the risk of mineral crystal formation (stones) and allowing bacteria to multiply, causing Urinary Tract Infections (UTIs).',
    risk_cognitive_title: 'Cognitive & Mood Impairment',
    risk_cognitive_desc: 'Research shows even mild dehydration (1-2% of body weight) can impair concentration, alertness, and short-term memory, while also increasing feelings of fatigue and anxiety.',
    risk_digestive_title: 'Constipation & Digestive Issues',
    risk_digestive_desc: 'Water is essential for proper digestion and forming soft stool. Insufficient intake is a primary cause of constipation and can disrupt the gut microbiome.',
    actions_title: 'Highly Recommended Actions',
    actions_desc: 'This calculation is a baseline for a healthy, resting individual. <strong>Always increase intake</strong> during exercise, high heat, fever, or illness (diarrhea/vomiting). Listen to your body—thirst is a direct signal to drink. If you experience symptoms like dark urine, dizziness, or extreme fatigue, prioritize rehydration immediately. <strong>This tool is not a substitute for professional medical advice.</strong>',
                aushadhi_gyan: 'Aushadhi Gyan',
                dass21_calc: 'Mental Well-being Assessment', ccc_calc: 'Creat Clearance Calculator', map_calc: 'MAP Calculator', abg_calc: 'ABG Analyzer',
                antidote_finder: 'Antidote Finder',
                calculate: 'Calculate', reset: 'Reset', clear: 'Clear', search_btn: 'Search',
                dose_calc_tab: 'Dose', fluid_calc_tab: 'Fluid', drug_d_label: 'D (Desired Dose)', drug_h_label: 'H (Stock Dose)', drug_v_label: 'V (Stock Volume)', 
                mlhr_tab: 'mL/hr', dropmin_tab: 'Drop/min', volume_ml: 'Volume (mL)', time_hr: 'Time (hr)', time_min: 'Time (min)', drop_factor: 'Drop Factor (gtt/mL)', 
                gender: 'Gender', male: 'Male', 'female': 'Female', age_years: 'Age (years)', height_cm: 'Height (cm)', weight_kg: 'Weight (kg)', 
                your_bmi: 'Your BMI is:', category: 'Category:', underweight: 'Underweight', normal_weight: 'Normal Weight', overweight: 'Overweight', obesity: 'Obesity', 
                dob: 'Date of Birth', your_age: 'Your Age is:', next_birthday_in: 'Next Birthday 🎂 in', years: 'Years', months: 'Months', days: 'Days', 
                lmp_date: 'First Day of Last Menstrual Period', edd_title: 'Estimated Due Date', progress_label: 'Pregnancy Progress', current_trimester: 'Current Trimester', conception_date: 'Est. Conception Date', days_remaining: 'Days Remaining', 
                end_of_first_trimester: 'End of 1st Trimester', end_of_second_trimester: 'End of 2nd Trimester', end_of_third_trimester: 'End of 3rd Trimester (EDD)',
                health_tips_title: 'Health Tips for You', baby_growth_title: "Baby's Growth this Trimester",
                trimester1_health_tips: "Focus on hydration, take prenatal vitamins (especially folic acid), and get plenty of rest. Avoid raw meat and unpasteurized dairy. Light exercise like walking is beneficial.",
                trimester1_baby_growth: "Your baby's brain, spinal cord, and other organs are beginning to form. The heart begins to beat. By the end, fingers and toes are developing.",
                trimester2_health_tips: "You may feel more energetic. Continue with a balanced diet rich in iron and calcium. Regular, moderate exercise is great. Start doing Kegel exercises.",
                trimester2_baby_growth: "Baby's features are becoming more defined. They can now hear your voice. The skeleton is developing, and they begin to move, kick, and turn.",
                trimester3_health_tips: "Rest as much as possible. Eat smaller, frequent meals to combat heartburn. Monitor baby's movements. Prepare your hospital bag and learn the signs of labor.",
                trimester3_baby_growth: "The baby is rapidly gaining weight and their brain is developing quickly. Lungs are maturing, and they are getting into position for birth, usually head-down.",
                weeks: 'weeks', day: 'day', total_tbsa: 'Total TBSA', 
                rate_us_title: 'Rate InstaNurse! ⭐⭐⭐⭐⭐', rate_us_desc: 'If you enjoy this app, please take a moment to rate it.', rate_now: 'Rate Now', 
                privacy_title:'<strong>Privacy Policy</strong>', privacy_text: `<h3>Our Commitment to Your Privacy</h3><p>Thank you for using InstaNurse ("we," "us," or "our"). Your privacy is important to us. This Privacy Policy explains what information is collected when you use our mobile application (the "App") and how that information is used. By using the InstaNurse app, you agree to the terms outlined in this policy. <h1><strong>Important Medical Disclaimer:</h1></strong><h2>1. This App is for educational and informational purposes only. The content provided within InstaNurse is not intended to be a substitute for professional medical advice, diagnosis, or treatment.</h2>
<h1>2. Always seek the advice of your physician or another qualified health provider with any questions you may have regarding a medical condition. Never disregard professional medical advice or delay in seeking it because of something you have read or accessed through this App. If you think you may have a medical emergency, call your doctor or emergency services immediately.</h1>
<h3>3. Information We Collect Our commitment is to collect as little information as possible.</h3></p><h3><strong>1. Information We Do Not Collect</strong></h3><p>
<h1>We do not collect any personally identifiable information from you. This includes: Your name, email address, or phone number. Your location. Photos, contacts, or other files from your device.<h1>
<h2>You are not required to create an account to use InstaNurse.</h2>

<p><strong>2. Information Collected by Our Advertising Partners</strong></p>
<h1>To keep the App free, we work with third-party advertising partners to display advertisements.</h1>
These partners may collect non-personal or pseudonymous information to provide ads that are more relevant to you. This may include:
<p><h1><strong>Device Identifiers:</strong> Such as the Advertising ID (GAID on Android or IDFA on iOS).
IP Address: To infer general geographic location.</h1></p>
<p><h1><strong>Device Information:</strong> Such as your device type, operating system, and network information.</h1></p>
<p>This data is collected and used by our partners according to their own privacy policies. We do not have direct access to this information.</p>

<strong>How We Use Information
The sole purpose of the information collected by our partners is:</strong>
<p><strong>To Support Our App:</strong> By displaying advertisements, which allows us to offer InstaNurse for free.</p>
<p><strong>To Provide Relevant Ads:</strong> To personalize the ad experience and ensure the ads you see are not repetitive.</p>
<p><strong>Third-Party Advertising:</strong>
We use third-party advertising services to serve ads when you use our App. Please be aware that these companies have their own privacy policies that govern their data collection practices.</p>

<p><strong>Our advertising partner(s) include:
Adsterra</strong></p>
<p>We recommend that you review the privacy policy of our advertising partner(s) to understand</p>
<p>how they handle your data. For example, you can find adsterra policy here:
<h1>https://adsterra.com/privacy-policy-managed/</h1></p>

<p><strong>Children's Privacy</strong></p>
<p>This App is not intended for use by children under the age of 13 (or 16 in the European Union/UK). We do not knowingly collect any information from children. Because our app is supported by advertising that may collect device identifiers, it is not suitable for children.</p>
<p>Changes to This Privacy Policy We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy within the App. You are advised to review this page periodically for any changes.</p>
<p><strong>JOB PORTAL DISCLAIMER</strong></p>

<p><strong>1. Our Role as a Service Provider</strong></p>
InstaNurse (Job4Nurse) is a job aggregation and information service. We are not a recruitment agency and do not directly offer or announce any job vacancies. Our platform is designed to help you find and access job opportunities that have been officially published by healthcare organizations on their career websites.

<p><strong>2. No Fees or Charges</strong></p>
This service is completely free for all users. InstaNurse will never ask for any payment, fees, or financial information in exchange for job applications, interviews, or placement services. Please be cautious of any fraudulent communication claiming to be from us that requests money.

<p><strong>3. Third-Party Websites and Application Process</strong></p>
When you click on an "Apply Now" link for a job listing, you will be redirected to the official career portal of the hiring organization. InstaNurse (job4nurse) not responsible for the content, application process, or data collection practices of these external websites.
<p><strong>4. Data Privacy and Your Responsibility</strong></p>
InstaNurse (job4nurse) is not responsible for any personal data you submit to third-party organizations during your application process. We strongly recommend that you review the privacy policy and terms of service of each organization before submitting your personal information.
<p><strong>5. Commitment to Authenticity</strong></p>
<h1>We are committed to providing authentic and verified job listings. We strive to:</h1>

<h2>Share opportunities that are currently active on official organizational websites.</h2>

<h3>Avoid posting fraudulent links, contact numbers, or unverified job profiles circulating on social media.</h3>

<h4>By using the InstaNurse Job Portal, you acknowledge and agree to the terms outlined in this disclaimer.</h4>

<h><strong>Contact Us</strong></h>
<h1>If you have any questions about this Privacy Policy, please contact us at:</h1>
<strong>Email: didels940@gmail.com</strong></p>`, 
                terms_title: 'Terms & Conditions', terms_text: `<h3>1. Medical Disclaimer</h3><p><strong>For Informational Purposes Only:</strong> The calculations and information provided by InstaNurse are for informational and educational purposes only. They are NOT a substitute for professional medical advice, diagnosis, or treatment.</p><p><strong>Always Seek Professional Help:</strong> Always consult a qualified health provider with any questions regarding a medical condition. Never disregard professional medical advice because of something you have calculated on this App.</p><h3>2. User Responsibility</h3><p>You are solely responsible for any decisions or actions taken based on the information from this App. All calculations should be verified by a qualified medical professional before clinical use.</p><h3>3. Limitation of Liability</h3><p>In no event shall InstaNurse be liable for any damages resulting from the use of this Service. Your use of the App is at your sole risk.</p>`, 
                child_dob: "Child's Date of Birth", check_milestones: 'Check Milestones', current_age: 'Current Age', milestone_group_title: 'Expected Milestones for {age_range}', gross_motor: 'Gross Motor', fine_motor: 'Fine Motor', social_language: 'Social & Language', cognitive: 'Cognitive', consult_doctor_title: 'When to Consult a Doctor (Red Flags)', over_age_limit: 'This calculator is for children up to 24 months old.', month: 'month', 
                menstrual_title: 'Menstrual Cycle & Health Tracker', last_period_label: 'First Day of Your Last Period:', cycle_length_label: 'Average Cycle Length (in days):', calculate_update_btn: 'Calculate & Update',
                conception_title: '❤️ Best Days for Intercourse to Conceive', conception_desc: 'Your chances of getting pregnant are highest during your peak fertile window. For this cycle, that is:', 
                health_tip_title: '💡 Health Tip for Your Current Phase', symptom_log_title: "📝 Log Today's Symptoms & Mood", cycle_history_title: '📜 Recent Cycle History', 
                consult_doctor_title_mens: '👩‍⚕️ When to Consult a Doctor', consult_doctor_desc_mens: 'Consult a healthcare professional if you experience persistent irregularities, such as:', 
                doctor_cond_1: 'Your periods suddenly stop for more than 90 days.', doctor_cond_2: 'Your cycles become very erratic after being regular.', doctor_cond_3: 'Your period lasts longer than 7 days or is extremely heavy.', doctor_cond_4: 'Your cycles are consistently shorter than 21 days or longer than 35 days.', doctor_cond_5: 'You experience severe pain, cramping, or nausea during your period.', 
                disclaimer_mens: 'This tracker provides estimations and is not a substitute for professional medical advice.',
                pincode_finder_title: 'Pincode Finder', pincode_initial_msg: 'Enter a location and click search to see results.'
            },
            'hi': { 
                appName: 'इंस्टा नर्स', adSpace: '', footer_copyright: '२०२५@इंस्टा नर्स: सर्वाधिकार सुरक्षित।', privacy_policy: 'गोपनीयता नीति', terms_conditions: 'नियम और शर्तें', 
                drug_calc: 'दवा कैलकुलेटर', bmi_calc: 'बीएमआई कैलकुलेटर',appName: 'इंस्टा नर्स',
                job_portal: 'नौकरी पोर्टल', age_calc: 'आयु कैलकुलेटर', preg_calc: 'गर्भावस्था EDD', tbsa_calc: 'टीबीएसए बर्न कैलकुलेटर', mass_calc: 'यूनिट कनवर्टर', milestone_calc: 'बाल विकास मील के पत्थर', menstrual_calc: 'मासिक धर्म चक्र', pincode_finder: 'पिनकोड खोजक',
                biomedical_waste: 'बायोमेडिकल कचरा',
    fluid_intake_calc: 'द्रव सेवन कैलकुलेटर',
    health_advisory_title: 'स्वास्थ्य सलाह: अपर्याप्त सेवन के जोखिम',
    risk_kidney_title: 'गुर्दे की पथरी और यूटीआई',
    risk_kidney_desc: 'निर्जलीकरण से मूत्र सांद्रित होता है, जिससे खनिज क्रिस्टल बनने (पथरी) का खतरा बढ़ जाता है और बैक्टीरिया को गुणा करने की अनुमति मिलती है, जिससे मूत्र पथ के संक्रमण (यूटीआई) होते हैं।',
    risk_cognitive_title: 'संज्ञानात्मक और मूड हानि',
    risk_cognitive_desc: 'शोध से पता चलता है कि हल्का निर्जलीकरण (शरीर के वजन का 1-2%) भी एकाग्रता, सतर्कता और अल्पकालिक स्मृति को बाधित कर सकता है, साथ ही थकान और चिंता की भावनाओं को भी बढ़ा सकता है।',
    risk_digestive_title: 'कब्ज और पाचन संबंधी समस्याएं',
    risk_digestive_desc: 'उचित पाचन और नरम मल बनाने के लिए पानी आवश्यक है। अपर्याप्त सेवन कब्ज का एक प्रमुख कारण है और आंत माइक्रोबायोम को बाधित कर सकता है।',
    actions_title: 'अत्यधिक अनुशंसित कार्रवाइयां',
    actions_desc: 'यह गणना एक स्वस्थ, आराम करने वाले व्यक्ति के लिए एक आधार रेखा है। व्यायाम, तेज गर्मी, बुखार, या बीमारी (दस्त/उल्टी) के दौरान <strong>हमेशा सेवन बढ़ाएं</strong>। अपने शरीर की सुनें—प्यास पीने का सीधा संकेत है। यदि आप गहरे रंग के मूत्र, चक्कर आना, या अत्यधिक थकान जैसे लक्षणों का अनुभव करते हैं, तो तुरंत पुनर्जलीकरण को प्राथमिकता दें। <strong>यह उपकरण पेशेवर चिकित्सा सलाह का विकल्प नहीं है।</strong>',
                aushadhi_gyan: 'औषधि ज्ञान',
                dass21_calc: 'DASS-21 मूल्यांकन', ccc_calc: 'क्रिएटिनिन क्लीयरेंस', map_calc: 'MAP कैलकुलेटर', abg_calc: 'ABG एनालाइजर',
                antidote_finder: 'एंटीडोट खोजक',
                calculate: 'गणना करें', reset: 'रीसेट करें', clear: 'साफ़ करें', search_btn: 'खोजें',
                lmp_date: 'अंतिम माहवारी का पहला दिन', edd_title: 'अनुमानित डिलीवरी की तारीख', progress_label: 'गर्भावस्था की प्रगति', current_trimester: 'वर्तमान तिमाही', conception_date: 'अनुमानित गर्भाधान तिथि', days_remaining: 'शेष दिन', 
                end_of_first_trimester: ' पहली तिमाही का अंत', end_of_second_trimester: 'दूसरी तिमाही का अंत', end_of_third_trimester: 'तीसरी तिमाही का अंत (EDD)',
                health_tips_title: 'आपके लिए स्वास्थ्य सुझाव', baby_growth_title: 'इस तिमाही में शिशु का विकास',
                trimester1_health_tips: "हाइड्रेशन पर ध्यान दें, प्रसवपूर्व विटामिन (विशेषकर फोलिक एसिड) लें और भरपूर आराम करें। कच्चे मांस और बिना पाश्चुरीकृत डेयरी से बचें। पैदल चलने जैसा हल्का व्यायाम फायदेमंद है।",
                trimester1_baby_growth: "आपके बच्चे का मस्तिष्क, रीढ़ की हड्डी और अन्य अंग बनने लगते हैं। दिल धड़कना शुरू हो जाता है। अंत तक, उंगलियां और पैर की उंगलियां विकसित हो रही हैं।",
                trimester2_health_tips: "आप अधिक ऊर्जावान महसूस कर सकती हैं। आयरन और कैल्शियम से भरपूर संतुलित आहार जारी रखें। नियमित, मध्यम व्यायाम बहुत अच्छा है। कीगल व्यायाम करना शुरू करें।",
                trimester2_baby_growth: "बच्चे की विशेषताएं अधिक परिभाषित हो रही हैं। वे अब आपकी आवाज सुन सकते हैं। कंकाल विकसित हो रहा है, और वे हिलना, लात मारना और मुड़ना शुरू कर देते हैं।",
                trimester3_health_tips: "जितना हो सके आराम करें। सीने में जलन से निपटने के लिए छोटे, लगातार भोजन करें। बच्चे की हरकतों पर नजर रखें। अपना अस्पताल का बैग तैयार करें और प्रसव के संकेतों को जानें।",
                trimester3_baby_growth: "बच्चे का वजन तेजी से बढ़ रहा है और उनका मस्तिष्क तेजी से विकसित हो रहा है। फेफड़े परिपक्व हो रहे हैं, और वे जन्म के लिए स्थिति में आ रहे हैं, आमतौर पर सिर नीचे।",
                weeks: 'सप्ताह', day: 'दिन', days: 'दिन', 
                rate_us_title: 'इंस्टा नर्स को रेट करें!', rate_us_desc: 'यदि आपको यह ऐप पसंद है, तो कृपया इसे रेट करें।', rate_now: 'अभी रेट करें', 
                privacy_title: 'गोपनीयता नीति', privacy_text: 'हम आपका कोई भी व्यक्तिगत डेटा एकत्र या संग्रहीत नहीं करते हैं। सभी गणनाएं आपके डिवाइस पर स्थानीय रूप से की जाती हैं।', 
                terms_title: 'नियम और शर्तें', terms_text: 'यह ऐप केवल सूचनात्मक उद्देश्यों के लिए है और पेशेवर चिकित्सा सलाह का विकल्प नहीं है।', 
                child_dob: "बच्चे की जन्म तिथि", check_milestones: 'मील के पत्थर जांचें', current_age: 'वर्तमान आयु', gross_motor: 'सकल मोटर', fine_motor: 'ठीक मोटर', social_language: 'सामाजिक और भाषा', cognitive: 'संज्ञानात्मक', consult_doctor_title: 'डॉक्टर से कब सलाह लें (रेड फ्लैग्स)', 
                menstrual_title: 'मासिक धर्म चक्र और स्वास्थ्य ट्रैकर', last_period_label: 'आपकी अंतिम माहवारी का पहला दिन:', cycle_length_label: 'औसत चक्र लंबाई (दिनों में):', calculate_update_btn: 'गणना और अपडेट करें',
                pincode_finder_title: 'पिनकोड खोजक', pincode_initial_msg: 'परिणाम देखने के लिए एक स्थान दर्ज करें और खोजें पर क्लिक करें।'
            },
            'ta': { appName: 'இன்ஸ்டா நர்ஸ்', privacy_policy: 'தனியுரிமைக் கொள்கை', terms_conditions: 'விதிமுறைகள்', drug_calc: 'மருந்து கால்குலேட்டர்', bmi_calc: 'பிஎம்ஐ கால்குலேட்டர்', age_calc: 'வயது கால்குலேட்டர்', preg_calc: 'கர்ப்பம் EDD', tbsa_calc: 'TBSA பர்ன் கால்குலேட்டர்', mass_calc: 'அலகு மாற்றி', milestone_calc: 'குழந்தை வளர்ச்சி மைல்கற்கள்', menstrual_calc: 'மாதவிடாய் சுழற்சி', pincode_finder: 'பின்கோடு கண்டுபிடிப்பான்', dass21_calc: 'DASS-21 மதிப்பீடு', ccc_calc: 'கிரியேட்டினின் క్లియరెన్స్', map_calc: 'MAP கால்குலேட்டர்', abg_calc: 'ABG பகுப்பாய்வி', calculate: 'கணக்கிடு', reset: 'மீட்டமை', clear: 'அழி', search_btn: 'தேடு'},
            'te': { appName: 'ఇన్‌స్టా నర్స్', privacy_policy: 'గోప్యతా విధానం', terms_conditions: 'నిబంధనలు', drug_calc: 'మందుల కాలిక్యులేటర్', bmi_calc: 'BMI కాలిక్యులేటర్', age_calc: 'వయస్సు కాలిక్యులేటర్', preg_calc: 'గర్భం EDD', tbsa_calc: 'TBSA బర్న్ కాలిక్యులేటర్', mass_calc: 'యూనిట్ కన్వర్టర్', milestone_calc: 'శిశు మైలురాళ్ళు', menstrual_calc: 'రుతుచక్రం', pincode_finder: 'పిన్‌కోడ్ ఫైండర్', dass21_calc: 'DASS-21 అంచనా', ccc_calc: 'క్రియేటినిన్ క్లియరెన్స్', map_calc: 'MAP కాలిక్యులేటర్', abg_calc: 'ABG ఎనలైజర్', calculate: 'లెక్కించు', reset: 'రీసెట్', clear: 'క్లియర్', search_btn: 'వెతకండి'},
            'kn': { appName: 'ಇನ್‌ಸ್ಟಾ ನರ್ಸ್', privacy_policy: 'ಗೌಪ್ಯತೆ ನೀತಿ', terms_conditions: 'ನಿಯಮಗಳು', drug_calc: 'ಔಷಧ ಕ್ಯಾಲ್ಕುಲೇಟರ್', bmi_calc: 'BMI ಕ್ಯಾಲ್ಕುಲೇಟರ್', age_calc: 'ವಯಸ್ಸು ಕ್ಯಾಲ್ಕುಲೇಟರ್', preg_calc: 'ಗರ್ಭಧಾರಣೆ EDD', tbsa_calc: 'TBSA ಬರ್ನ್ ಕ್ಯಾಲ್ಕುಲೇಟರ್', mass_calc: 'ಘಟಕ ಪರಿವರ್ತಕ', milestone_calc: 'ಬಾಲಕರ ಮೈಲಿಗಲ್ಲುಗಳು', menstrual_calc: 'ಮುಟ್ಟಿನ ಚಕ್ರ', pincode_finder: 'ಪಿನ್‌ಕೋಡ್ ಫೈಂಡರ್', dass21_calc: 'DASS-21 ಮೌಲ್ಯಮಾಪನ', ccc_calc: 'ಕ್ರಿಯೇಟಿನೈನ್ ಕ್ಲಿಯರೆನ್ಸ್', map_calc: 'MAP ಕ್ಯಾಲ್ಕುಲೇಟರ್', abg_calc: 'ABG ವಿಶ್ಲೇಷಕ', calculate: 'ಲೆಕ್ಕಾಚಾರ', reset: 'ಮರುಹೊಂದಿಸಿ', clear: 'ಅಳಿಸಿ', search_btn: 'ಹುಡುಕಿ'},
            'gu': { appName: 'ઇન્સ્ટા નર્સ', privacy_policy: 'ગોપનીયતા નીતિ', terms_conditions: 'શરતો', drug_calc: 'દવા કેલ્ક્યુલેટર', bmi_calc: 'BMI કેલ્ક્યુલેટર', age_calc: 'ઉંમર કેલ્ક્યુલેટર', preg_calc: 'ગર્ભાવસ્થા EDD', tbsa_calc: 'TBSA બર્ન કેલ્ક્યુલેટર', mass_calc: 'એકમ કન્વર્ટર', milestone_calc: 'બાળ વિકાસ માઇલસ્ટોન્સ', menstrual_calc: 'માસિક ચક્ર', pincode_finder: 'પિનકોડ શોધક', dass21_calc: 'DASS-21 આકારણી', ccc_calc: 'ક્રિએટિનાઇન ક્લિયરન્સ', map_calc: 'MAP કેલ્ક્યુલેટર', abg_calc: 'ABG વિશ્લેષક', calculate: 'ગણતરી', reset: 'રીસેટ', clear: 'સાફ', search_btn: 'શોધો'},
            'pa': { appName: 'ਇੰਸਟਾ ਨਰਸ', privacy_policy: 'ਗੋਪਨੀਯਤਾ ਨੀਤੀ', terms_conditions: 'ਸ਼ਰਤਾਂ', drug_calc: 'ਦਵਾਈ ਕੈਲਕੁਲੇਟਰ', bmi_calc: 'BMI ਕੈਲਕੁਲੇਟਰ', age_calc: 'ਉਮਰ ਕੈਲਕੁਲੇਟਰ', preg_calc: 'ਗਰਭ ਅਵਸਥਾ EDD', tbsa_calc: 'TBSA ਬਰਨ ਕੈਲਕੁਲੇਟਰ', mass_calc: 'ਯੂਨਿਟ ਪਰਿਵਰਤਕ', milestone_calc: 'ਬਾਲ ਵਿਕਾਸ ਮੀਲ ਪੱਥਰ', menstrual_calc: 'ਮਾਹਵਾਰੀ ਚੱਕਰ', pincode_finder: 'ਪਿੰਨਕੋਡ ਖੋਜਕ', dass21_calc: 'DASS-21 ਮੁਲਾਂਕਣ', ccc_calc: 'ਕ੍ਰਿਏਟੀਨਾਈਨ ਕਲੀਅਰੈਂਸ', map_calc: 'MAP ਕੈਲਕੁਲੇਟਰ', abg_calc: 'ABG ਵਿਸ਼ਲੇਸ਼ਕ', calculate: 'ਗਣਨਾ', reset: 'ਰੀਸੈਟ', clear: 'ਸਾਫ਼', search_btn: 'ਖੋਜ'},
            'mr': { appName: 'इन्स्टा नर्स', privacy_policy: 'गोपनीयता धोरण', terms_conditions: 'अटी', drug_calc: 'औषध कॅल्क्युलेटर', bmi_calc: 'BMI कॅल्क्युलेटर', age_calc: 'वय कॅल्क्युलेटर', preg_calc: 'गर्भधारणा EDD', tbsa_calc: 'TBSA बर्न कॅल्क्युलेटर', mass_calc: 'युनिट कन्व्हर्टर', milestone_calc: 'बाल विकास टप्पे', menstrual_calc: 'मासिक पाळी', pincode_finder: 'पिनकोड शोधक', dass21_calc: 'DASS-21 मूल्यांकन', ccc_calc: 'क्रिएटिनिन क्लीयरन्स', map_calc: 'MAP कॅल्क्युलेटर', abg_calc: 'ABG विश्लेषक', calculate: 'गणना', reset: 'रीसेट', clear: 'साफ', search_btn: 'शोधा'},
            'raj': { appName: 'इंस्टा नर्स', privacy_policy: 'निजता नीति', terms_conditions: 'शर्तें', drug_calc: 'दवा कैलकुलेटर', bmi_calc: 'बीएमआई कैलकुलेटर', age_calc: 'उमर कैलकुलेटर', preg_calc: 'गर्भावस्था EDD', tbsa_calc: 'टीबीएसए बर्न कैलकुलेटर', mass_calc: 'यूनिट कनवर्टर', milestone_calc: 'बाल विकास रा मील का पत्थर', menstrual_calc: 'मासिक धर्म चक्र', pincode_finder: 'पिनकोड खोजक', dass21_calc: 'DASS-21 मूल्यांकन', ccc_calc: 'क्रिएटिनिन क्लीयरेंस', map_calc: 'MAP कैलकुलेटर', abg_calc: 'ABG एनालाइजर', calculate: 'गणना', reset: 'रीसेट', clear: 'साफ', search_btn: 'खोजो' }
        };
        const langSelect = document.getElementById('lang-select');
        let currentLang = 'en';
        const setLanguage = (lang) => { if (!translations[lang]) lang = 'en'; currentLang = lang; localStorage.setItem('medinest-lang', lang); document.documentElement.lang = lang; langSelect.value = lang; document.querySelectorAll('[data-lang-key]').forEach(el => { const key = el.getAttribute('data-lang-key'); if (translations[lang]?.[key] || translations['en'][key]) { el.innerHTML = translations[lang][key] || translations['en'][key]; }}); };
        langSelect.addEventListener('change', (e) => setLanguage(e.target.value));
        
        const screens = document.querySelectorAll('.calculator-view, #home-screen');
         let currentScreenId = 'home-screen';
        const showScreen = (screenId) => { screens.forEach(s => s.style.display = 'none'); const targetScreen = document.getElementById(screenId); if(targetScreen) { targetScreen.style.display = 'flex'; currentScreenId = screenId; window.scrollTo(0,0); }};
        document.querySelectorAll('.calculator-card').forEach(card => card.addEventListener('click', (e) => { e.preventDefault(); showScreen(card.dataset.screen); }));
        document.querySelectorAll('.back-button').forEach(button => button.addEventListener('click', () => showScreen('home-screen')));
        const policyModal = document.getElementById('policy-modal');
        const rateModal = document.getElementById('rate-us-modal');
        const showPolicyModal = (type) => { const titleKey = type === 'privacy' ? 'privacy_title' : 'terms_title'; const textKey = type === 'privacy' ? 'privacy_text' : 'terms_text'; document.getElementById('modal-title').innerHTML = translations[currentLang][titleKey] || translations['en'][titleKey]; document.getElementById('modal-text').innerHTML = translations[currentLang][textKey] || translations['en'][textKey]; policyModal.style.display = 'flex'; };
        const hideAllModals = () => { policyModal.style.display = 'none'; rateModal.style.display = 'none'; };
        
        document.getElementById('privacy-link').addEventListener('click', (e) => { e.preventDefault(); showPolicyModal('privacy'); });
        
        document.getElementById('terms-link').addEventListener('click', (e) => { e.preventDefault(); showPolicyModal('terms'); });
        document.querySelectorAll('.modal-close-btn').forEach(btn => btn.addEventListener('click', hideAllModals));
        document.getElementById('rate-now-btn').addEventListener('click', () => { window.open('https://play.google.com/store/apps/details?id=com.your.app.id', '_blank'); hideAllModals(); });
        
        history.pushState(null, null, location.href);
        window.addEventListener('popstate', function (event){ if(currentScreenId !== 'home-screen'){ showScreen('home-screen'); history.pushState(null, null, location.href); } else { rateModal.style.display = 'flex'; } });
        
        document.getElementById('reset-dose-btn').addEventListener('click', () => { document.getElementById('drug-d').value = ''; document.getElementById('drug-h').value = ''; document.getElementById('drug-v').value = ''; document.getElementById('dose-result').style.display = 'none'; });
        document.getElementById('reset-mlhr-btn').addEventListener('click', () => { document.getElementById('fluid-volume-mlhr').value = ''; document.getElementById('fluid-time-hr').value = ''; document.getElementById('fluid-result').style.display = 'none'; });
        document.getElementById('reset-dropmin-btn').addEventListener('click', () => { document.getElementById('fluid-volume-drop').value = ''; document.getElementById('fluid-time-min').value = ''; document.getElementById('drop-factor').value = ''; document.getElementById('fluid-result').style.display = 'none'; });
         document.getElementById('reset-dropmin-btn').addEventListener('click', () => { document.getElementById('fluid-volume-drop').value = ''; document.getElementById('fluid-time-min').value = ''; document.getElementById('drop-factor').value = ''; document.getElementById('fluid-result').style.display = 'none'; });
        document.getElementById('reset-age-btn').addEventListener('click', () => { document.getElementById('dob').value = ''; document.getElementById('age-result').style.display = 'none'; });
        document.getElementById('reset-edd-btn').addEventListener('click', () => { document.getElementById('lmp').value = ''; document.getElementById('edd-result-container').style.display = 'none'; });
        document.getElementById('reset-bmi-btn').addEventListener('click', () => {document.getElementById('bmi-height').value = ''; document.getElementById('bmi-weight').value = ''; document.getElementById('bmi-age').value = ''; document.getElementById('bmi-result').style.display = 'none';});
        document.getElementById('clear-tbsa-btn').addEventListener('click', () => {document.getElementById('tbsa-adult-svg').querySelectorAll('path.selected').forEach(part => part.classList.remove('selected')); document.getElementById('tbsa-total').textContent = '0.0';});
        document.getElementById('reset-milestone-btn').addEventListener('click', () => { document.getElementById('milestone-dob').value = ''; document.getElementById('milestone-result-container').style.display = 'none'; });
        document.getElementById('reset-menstrual-btn').addEventListener('click', () => { 
            const menstrualScreen = document.getElementById('menstrual-calc-screen');
            menstrualScreen.querySelector('#last-period-date').value = '';
            menstrualScreen.querySelector('#cycle-length').value = '28';
            menstrualScreen.querySelectorAll('.results-section').forEach(el => el.classList.add('hidden'));
        });
        document.getElementById('pincode-reset-btn').addEventListener('click', () => {
            const pincodeScreen = document.getElementById('pincode-calc-screen');
            pincodeScreen.querySelector('#pincode-search-input').value = '';
            const resultContainer = pincodeScreen.querySelector('#pincode-result-container');
            const messageEl = pincodeScreen.querySelector('#pincode-message');
            resultContainer.innerHTML = '';
            messageEl.textContent = translations[currentLang].pincode_initial_msg || translations['en'].pincode_initial_msg;
            messageEl.style.color = 'var(--text-color)';
            resultContainer.appendChild(messageEl);
        });

 function setupTabs(containerId) {const container = document.getElementById(containerId); if(!container) return; const tabButtons = container.querySelectorAll(':scope > .tab-btn'); const tabContents = container.parentElement.querySelectorAll(':scope > .tab-content'); tabButtons.forEach(button => {button.addEventListener('click', () => {tabButtons.forEach(btn => btn.classList.remove('active')); button.classList.add('active'); tabContents.forEach(content => content.classList.remove('active')); const activeContentId = button.dataset.tab; const activeContent = document.getElementById(activeContentId); if(activeContent) activeContent.classList.add('active');});});}
        setupTabs('drug-calc-tabs'); setupTabs('fluid-calc-tabs');
        document.getElementById('calc-dose-btn').addEventListener('click', () => {const d = parseFloat(document.getElementById('drug-d').value); const h = parseFloat(document.getElementById('drug-h').value); const v = parseFloat(document.getElementById('drug-v').value); const resultBox = document.getElementById('dose-result'); if (isNaN(d) || isNaN(h) || isNaN(v) || h === 0) {resultBox.innerHTML = 'Please enter valid numbers.'; resultBox.style.display = 'block'; return;} const dose = (d / h) * v; resultBox.innerHTML = `Administer: <strong>${dose.toFixed(2)} mL</strong>`; resultBox.style.display = 'block';});
        document.getElementById('calc-mlhr-btn').addEventListener('click', () => {const vol = parseFloat(document.getElementById('fluid-volume-mlhr').value); const time = parseFloat(document.getElementById('fluid-time-hr').value); const resultBox = document.getElementById('fluid-result'); if (isNaN(vol) || isNaN(time) || time === 0) {resultBox.innerHTML = 'Please enter valid numbers.'; resultBox.style.display = 'block'; return;} const rate = vol / time; resultBox.innerHTML = `Flow Rate: <strong>${rate.toFixed(2)} mL/hr</strong>`; resultBox.style.display = 'block';});
        document.getElementById('calc-dropmin-btn').addEventListener('click', () => {const vol = parseFloat(document.getElementById('fluid-volume-drop').value); const time = parseFloat(document.getElementById('fluid-time-min').value); const factor = parseFloat(document.getElementById('drop-factor').value); const resultBox = document.getElementById('fluid-result'); if (isNaN(vol) || isNaN(time) || isNaN(factor) || time === 0) {resultBox.innerHTML = 'Please enter valid numbers.'; resultBox.style.display = 'block'; return;} const rate = (vol / time) * factor; resultBox.innerHTML = `Flow Rate: <strong>${rate.toFixed(2)} gtt/min</strong>`; resultBox.style.display = 'block';});
         document.getElementById('calc-bmi-btn').addEventListener('click', () => {const height = parseFloat(document.getElementById('bmi-height').value); const weight = parseFloat(document.getElementById('bmi-weight').value); const resultBox = document.getElementById('bmi-result'); if (isNaN(height) || isNaN(weight) || height <= 0 || weight <= 0) { document.getElementById('bmi-category').textContent = 'Invalid input'; resultBox.style.display = 'block'; return;} const heightInMeters = height / 100; const bmi = weight / (heightInMeters * heightInMeters); document.getElementById('bmi-value').textContent = bmi.toFixed(2); let category = '', color = '', progress = 0; if (bmi < 18.5) {category = translations[currentLang].underweight; color = 'var(--warning-color)'; progress = (bmi / 18.5) * 25;} else if (bmi < 25) {category = translations[currentLang].normal_weight; color = 'var(--success-color)'; progress = 25 + ((bmi - 18.5) / 6.5) * 25;} else if (bmi < 30) {category = translations[currentLang].overweight; color = 'var(--warning-color)'; progress = 50 + ((bmi - 25) / 5) * 25;} else {category = translations[currentLang].obesity; color = 'var(--danger-color)'; progress = 75 + Math.min(((bmi - 30) / 10) * 25, 25);} document.getElementById('bmi-category').textContent = category; const progressBar = document.getElementById('bmi-progress-bar'); progressBar.style.width = `${Math.max(5, progress)}%`; progressBar.style.backgroundColor = color; resultBox.style.display = 'block';});
        
        document.getElementById('calc-age-btn').addEventListener('click', () => {const dobString = document.getElementById('dob').value; if (!dobString) return; const dob = new Date(dobString); const today = new Date(); let years = today.getFullYear() - dob.getFullYear(); let months = today.getMonth() - dob.getMonth(); let days = today.getDate() - dob.getDate(); if (days < 0) { months--; days += new Date(today.getFullYear(), today.getMonth(), 0).getDate(); } if (months < 0) { years--; months += 12; } document.getElementById('age-output').innerHTML = `<strong>${years}</strong> ${translations[currentLang].years}, <strong>${months}</strong> ${translations[currentLang].months}, <strong>${days}</strong> ${translations[currentLang].days}`; let nextBirthday = new Date(today.getFullYear(), dob.getMonth(), dob.getDate()); if (today > nextBirthday) nextBirthday.setFullYear(today.getFullYear() + 1); let timeDiff = nextBirthday.getTime() - today.getTime(); let totalDaysLeft = Math.ceil(timeDiff / (1000 * 3600 * 24)); let monthsLeft = Math.floor(totalDaysLeft / 30.44); let daysLeft = Math.floor(totalDaysLeft % 30.44); document.getElementById('next-birthday-output').innerHTML = `${translations[currentLang].next_birthday_in} <strong>${monthsLeft}</strong> ${translations[currentLang].months}, <strong>${daysLeft}</strong> ${translations[currentLang].days}`; document.getElementById('age-result').style.display = 'block';});
        
         // --- UPDATED PREGNANCY CALCULATOR LOGIC ---
        document.getElementById('calc-edd-btn').addEventListener('click', () => {
            const lmpString = document.getElementById('lmp').value; 
            if (!lmpString) return; 
            
            const lmp = new Date(lmpString); 
            const today = new Date(); 
            today.setHours(0, 0, 0, 0); 
            
            const edd = new Date(lmp); 
            edd.setDate(edd.getDate() + 280); 
            
            const daysSinceLmp = Math.floor((today - lmp) / (1000 * 60 * 60 * 24)); 
            if (daysSinceLmp < 0) { 
                document.getElementById('edd-result-container').style.display = 'none'; 
                alert("Please select a past date for the Last Menstrual Period."); 
                return; 
            } 
            
            const gestationalWeeks = Math.floor(daysSinceLmp / 7); 
            const gestationalDays = daysSinceLmp % 7; 
            
            let trimester = 1; 
            if (gestationalWeeks >= 28) trimester = 3; 
            else if (gestationalWeeks >= 14) trimester = 2; 
            
            const conceptionDate = new Date(lmp); 
            conceptionDate.setDate(conceptionDate.getDate() + 14); 
            
            const daysRemaining = Math.ceil((edd - today) / (1000 * 60 * 60 * 24)); 
            const progressPercentage = Math.min((daysSinceLmp / 280) * 100, 100); 
            
            const firstTrimesterEnd = new Date(lmp); 
            firstTrimesterEnd.setDate(firstTrimesterEnd.getDate() + (13 * 7) + 6); 
            
            const secondTrimesterEnd = new Date(lmp); 
            secondTrimesterEnd.setDate(secondTrimesterEnd.getDate() + (27 * 7) + 6);
            
            // The end of the third trimester is the Estimated Due Date (EDD)
            const thirdTrimesterEnd = edd;

            const options = { year: 'numeric', month: 'long', day: 'numeric' }; 
            const locale = currentLang.replace(/_/, '-') || 'en-US'; 
            
            document.getElementById('edd-value').textContent = edd.toLocaleDateString(locale, options); 
            document.getElementById('gestational-age-value').innerHTML = `<strong>${gestationalWeeks}</strong> ${translations[currentLang].weeks}, <strong>${gestationalDays}</strong> ${gestationalDays === 1 ? translations[currentLang].day : translations[currentLang].days}`; 
            document.getElementById('pregnancy-progress-bar').style.width = `${progressPercentage}%`; 
            document.getElementById('trimester-value').textContent = trimester; 
            document.getElementById('conception-date-value').textContent = conceptionDate.toLocaleDateString(locale, { month: 'short', day: 'numeric' }); 
            document.getElementById('days-remaining-value').textContent = `${daysRemaining} ${translations[currentLang].days}`; 
            document.getElementById('first-trimester-end-date').textContent = firstTrimesterEnd.toLocaleDateString(locale, options); 
            document.getElementById('second-trimester-end-date').textContent = secondTrimesterEnd.toLocaleDateString(locale, options);
            document.getElementById('third-trimester-end-date').textContent = thirdTrimesterEnd.toLocaleDateString(locale, options);
            // Health Tips and Baby Growth data based on language
            const healthTips = {
                1: translations[currentLang].trimester1_health_tips || translations['en'].trimester1_health_tips,
                2: translations[currentLang].trimester2_health_tips || translations['en'].trimester2_health_tips,
                3: translations[currentLang].trimester3_health_tips || translations['en'].trimester3_health_tips
            };
            const babyGrowth = {
                1: translations[currentLang].trimester1_baby_growth || translations['en'].trimester1_baby_growth,
                2: translations[currentLang].trimester2_baby_growth || translations['en'].trimester2_baby_growth,
                3: translations[currentLang].trimester3_baby_growth || translations['en'].trimester3_baby_growth
            };

            // Populate the new info sections
            document.getElementById('health-tips-content').textContent = healthTips[trimester];
            document.getElementById('baby-growth-content').textContent = babyGrowth[trimester];

            document.getElementById('edd-result-container').style.display = 'flex';
        });
        
         const tbsaSvg = document.getElementById('tbsa-adult-svg'); const tbsaTotalEl = document.getElementById('tbsa-total'); tbsaSvg.addEventListener('click', (e) => {const part = e.target.closest('path'); if (part && part.dataset.percent) {part.classList.toggle('selected'); updateTbsaTotal();}}); function updateTbsaTotal() {let total = 0; tbsaSvg.querySelectorAll('path.selected').forEach(part => {total += parseFloat(part.dataset.percent);}); tbsaTotalEl.textContent = total.toFixed(1);}
        
        // --- PEDIATRIC MILESTONE LOGIC ---
        const pediatricMilestones = [
            { maxAge: 2, title: "0-2 Months", gross: ["Lifts head briefly when on stomach", "Moves head from side to side", "Makes jerky, quivering arm movements"], fine: ["Keeps hands in tight fists", "Brings hands to face", "Strong grasp reflex"], social: ["Stares at faces", "Follows objects with eyes", "Responds to parent's voice"], cognitive: ["Startles at loud noises", "Briefly looks at objects"], red_flags: ["Doesn't respond to loud sounds", "Doesn't watch things as they move", "Is very floppy or stiff"] },
            { maxAge: 4, title: "2-4 Months", gross: ["Pushes up to elbows on tummy", "Holds head steady, unsupported", "May roll over from tummy to back"], fine: ["Opens and shuts hands", "Brings hands to mouth", "Swats at dangling objects"], social: ["Begins to smile socially", "Coos and makes gurgling sounds", "Copies some facial expressions"], cognitive: ["Recognizes familiar people and things at a distance", "Tracks moving objects with eyes"], red_flags: ["Doesn't follow moving things with eyes", "Doesn't smile at people", "Can't hold head steady"] },
            { maxAge: 6, title: "4-6 Months", gross: ["Rolls over in both directions (front to back, back to front)", "Begins to sit without support", "Supports weight on legs when standing"], fine: ["Reaches for toy with one hand", "Transfers objects from hand to hand", "Uses raking grasp"], social: ["Responds to own name", "Laughs and squeals", "Likes to play with others, especially parents"], cognitive: ["Finds partially hidden object", "Explores things with hands and mouth"], red_flags: ["Shows no affection for caregivers", "Doesn't try to get things that are in reach", "Seems very stiff, with tight muscles"] },
            { maxAge: 9, title: "6-9 Months", gross: ["Sits without support", "Crawls", "Pulls to stand"], fine: ["Developing pincer grasp (thumb and index finger)", "Picks up things like cereal o's", "Bangs two objects together"], social: ["May be afraid of strangers (stranger anxiety)", "Has favorite toys", "Understands 'no'"], cognitive: ["Plays peek-a-boo", "Looks for things he sees you hide", "Babbles 'mama' and 'dada' (non-specific)"], red_flags: ["Doesn't bear weight on legs with support", "Doesn't babble", "Doesn't look where you point"] },
            { maxAge: 12, title: "9-12 Months", gross: ["Cruises (walks holding on to furniture)", "May stand alone", "May take a few steps without support"], fine: ["Puts things in a container, takes things out", "Lets go of objects voluntarily", "Pokes with index finger"], social: ["Is shy or nervous with strangers", "Cries when mom or dad leaves (separation anxiety)", "Waves 'bye-bye'"], cognitive: ["Says 'dada' and 'mama' (specific)", "Copies gestures", "Follows simple directions"], red_flags: ["Doesn't crawl", "Can't stand when supported", "Loses skills he once had"] },
            { maxAge: 18, title: "12-18 Months", gross: ["Walks alone", "May walk up steps and run", "Pulls toys while walking"], fine: ["Scribbles on his own", "Can drink from a cup", "Can use a spoon"], social: ["May have temper tantrums", "Points to show others something interesting", "Plays simple pretend, such as feeding a doll"], cognitive: ["Says several single words", "Points to one body part", "Understands simple commands"], red_flags: ["Can't walk", "Doesn't know what familiar things are for", "Doesn't copy others"] },
            { maxAge: 24, title: "18-24 Months (2 Years)", gross: ["Kicks a ball", "Stands on tiptoe", "Runs"], fine: ["Builds tower of 4 or more blocks", "Makes or copies straight lines and circles", "Can undress self"], social: ["Shows more and more independence", "Gets excited when with other children", "Plays mainly beside other children, but is beginning to include them"], cognitive: ["Follows two-step instructions", "Says sentences with 2 to 4 words", "Sorts shapes and colors"], red_flags: ["Doesn't use 2-word phrases", "Doesn't follow simple instructions", "Walks unsteadily"] }
        ];
        
        
        document.getElementById('calc-milestone-btn').addEventListener('click', () => {
            const dobString = document.getElementById('milestone-dob').value;
            const resultContainer = document.getElementById('milestone-result-container');
            if (!dobString) return;

            const dob = new Date(dobString);
            const today = new Date();
            
            if (dob > today) {
                alert("Date of birth cannot be in the future.");
                return;
            }

            let years = today.getFullYear() - dob.getFullYear();
            let months = today.getMonth() - dob.getMonth();
            let days = today.getDate() - dob.getDate();
            if (days < 0) { months--; days += new Date(today.getFullYear(), today.getMonth(), 0).getDate(); }
            if (months < 0) { years--; months += 12; }
            const totalMonths = (years * 12) + months;
            
            const ageString = `<strong>${totalMonths}</strong> ${translations[currentLang][totalMonths === 1 ? 'month' : 'months']}, <strong>${days}</strong> ${translations[currentLang].days}`;
            
            let resultHTML = `<div class="age-display-card">
                                <div class="label" data-lang-key="current_age">${translations[currentLang].current_age || 'Current Age'}</div>
                                <div class="value">${ageString}</div>
                              </div>`;

            if (totalMonths > 24) {
                 resultHTML += `<div class="milestone-card"><p>${translations[currentLang].over_age_limit || 'This calculator is for children up to 24 months old.'}</p></div>`;
            } else {
                const milestoneGroup = pediatricMilestones.find(m => totalMonths < m.maxAge);
                if (milestoneGroup) {
                    const { title, gross, fine, social, cognitive, red_flags } = milestoneGroup;
                    
                    const createList = (items) => items.map(item => `<li>${item}</li>`).join('');

                    resultHTML += `<div class="milestone-card">
                        <h2 class="milestone-title">${translations[currentLang].milestone_group_title.replace('{age_range}', title)}</h2>
                        
                        <h3 class="milestone-category">${translations[currentLang].gross_motor}</h3>
                        <ul class="milestone-list">${createList(gross)}</ul>
                        
                        <h3 class="milestone-category">${translations[currentLang].fine_motor}</h3>
                        <ul class="milestone-list">${createList(fine)}</ul>

                        <h3 class="milestone-category">${translations[currentLang].social_language}</h3>
                        <ul class="milestone-list">${createList(social)}</ul>

                        <h3 class="milestone-category">${translations[currentLang].cognitive}</h3>
                        <ul class="milestone-list">${createList(cognitive)}</ul>
                    </div>`;

                     resultHTML += `<div class="red-flags-card">
                        <h2 class="milestone-title">${translations[currentLang].consult_doctor_title}</h2>
                        <ul class="milestone-list">${createList(red_flags)}</ul>
                    </div>`;
                }
            }

            resultContainer.innerHTML = resultHTML;
            resultContainer.style.display = 'flex';
        });
        
         // --- MENSTRUAL CYCLE CALCULATOR LOGIC ---
        const menstrualScreen = document.getElementById('menstrual-calc-screen');
        if (menstrualScreen) {
            const calculateBtn = menstrualScreen.querySelector('#calculate-btn');
            const resultsContainer = menstrualScreen.querySelector('#results');
            const doctorInfoContainer = menstrualScreen.querySelector('#doctor-info');
            const symptomTrackerContainer = menstrualScreen.querySelector('#symptom-tracker');
            const cycleHistoryContainer = menstrualScreen.querySelector('#cycle-history');
            const educationalTipsContainer = menstrualScreen.querySelector('#educational-tips');
            const conceptionTipsContainer = menstrualScreen.querySelector('#conception-tips');
            const tipContentEl = menstrualScreen.querySelector('#tip-content');
            const historyListEl = menstrualScreen.querySelector('#history-list');
            const peakFertilityEl = menstrualScreen.querySelector('#peak-fertility-dates');

            const symptoms = [
                { id: 'cramps', label: 'Cramps' }, { id: 'bloating', label: 'Bloating' },
                { id: 'headache', label: 'Headache' }, { id: 'acne', label: 'Acne' },
                { id: 'tender_breasts', label: 'Tender Breasts' }, { id: 'fatigue', label: 'Fatigue' },
                { id: 'happy', label: 'Happy' }, { id: 'sad', label: 'Sad' },
                { id: 'anxious', label: 'Anxious' }, { id: 'irritable', label: 'Irritable' },
                { id: 'energetic', label: 'Energetic' }, { id: 'craving', label: 'Cravings' }
            ];

            function initializeSymptomTracker() {
                const symptomGrid = symptomTrackerContainer.querySelector('.symptom-grid');
                symptomGrid.innerHTML = '';
                symptoms.forEach(symptom => {
                    const item = document.createElement('div');
                    item.className = 'symptom-item';
                    item.innerHTML = `
                        <input type="checkbox" id="${symptom.id}" name="symptom" value="${symptom.label}">
                        <label for="${symptom.id}">${symptom.label}</label>
                    `;
                    symptomGrid.appendChild(item);
                });
            }

            function getCycleHistory() {
                return JSON.parse(localStorage.getItem('cycleHistory')) || [];
            }

function saveCycleHistory(entry) {
                let history = getCycleHistory();
                if (!history.some(h => h.startDate === entry.startDate)) {
                    history.unshift(entry);
                    if (history.length > 3) history.pop();
                    localStorage.setItem('cycleHistory', JSON.stringify(history));
                }
            }

            function displayCycleHistory() {
                const history = getCycleHistory();
                historyListEl.innerHTML = '';
                if (history.length === 0) {
                    historyListEl.innerHTML = '<li>No history yet. Your first calculation will be saved.</li>';
                } else {
                    history.forEach(entry => {
                        const li = document.createElement('li');
                        li.textContent = `Started: ${new Date(entry.startDate).toLocaleDateString()} - Length: ${entry.length} days`;
                        historyListEl.appendChild(li);
                    });
                }
            }

            const tips = {
                menstrual: "Your body is shedding its uterine lining. It's a good time for rest and gentle activities like walking or yoga. Iron-rich foods like spinach and lentils can be beneficial.",
                follicular: "Your energy levels may start to rise as estrogen increases. This can be a great time for more intense workouts and creative projects.",
                ovulation: "This is your most fertile time. You might feel a peak in energy and libido. Pay close attention to your body's signals if you are trying to conceive.",
                luteal: "Progesterone is rising, which can sometimes lead to PMS symptoms like bloating or moodiness. Focus on nutrient-dense foods and calming activities to manage symptoms.",
                unknown: "Please enter your last period date to get personalized tips for your current cycle phase."
            };

            calculateBtn.addEventListener('click', () => {
                const lastPeriodDateInput = menstrualScreen.querySelector('#last-period-date').value;
                const cycleLength = parseInt(menstrualScreen.querySelector('#cycle-length').value, 10);

                if (!lastPeriodDateInput || isNaN(cycleLength) || cycleLength < 20 || cycleLength > 45) {
                    alert("Please fill in both fields. Cycle length must be between 20 and 45 days.");
                    return;
                }

                const today = new Date();
                today.setHours(0, 0, 0, 0);

                const lutealPhaseLength = 14;
                const lastPeriodDate = new Date(lastPeriodDateInput);
                
                lastPeriodDate.setMinutes(lastPeriodDate.getMinutes() + lastPeriodDate.getTimezoneOffset());
                lastPeriodDate.setHours(0, 0, 0, 0);

                const ovulationDate = new Date(lastPeriodDate);
                ovulationDate.setDate(lastPeriodDate.getDate() + (cycleLength - lutealPhaseLength));

                const nextPeriodDate = new Date(lastPeriodDate);
                nextPeriodDate.setDate(lastPeriodDate.getDate() + cycleLength);

                const fertileWindowStart = new Date(ovulationDate);
                fertileWindowStart.setDate(ovulationDate.getDate() - 5);
                
                const peakFertilityStart = new Date(ovulationDate);
                peakFertilityStart.setDate(ovulationDate.getDate() - 2);

                let currentPhaseKey = 'unknown';
                const menstrualPhaseEnd = new Date(lastPeriodDate);
                menstrualPhaseEnd.setDate(lastPeriodDate.getDate() + 4);
                
                if (today >= lastPeriodDate && today <= menstrualPhaseEnd) currentPhaseKey = "menstrual";
                else if (today > menstrualPhaseEnd && today < ovulationDate) currentPhaseKey = "follicular";
                else if (today.getTime() === ovulationDate.getTime()) currentPhaseKey = "ovulation";
                else if (today > ovulationDate && today < nextPeriodDate) currentPhaseKey = "luteal";

                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const locale = currentLang.replace(/_/, '-') || 'en-US';
                const nextPeriodStr = nextPeriodDate.toLocaleDateString(locale, options);
                const ovulationStr = ovulationDate.toLocaleDateString(locale, options);
                const fertileWindowStr = `${fertileWindowStart.toLocaleDateString(locale, options)} - ${ovulationDate.toLocaleDateString(locale, options)}`;
                const peakFertilityStr = `${peakFertilityStart.toLocaleDateString(locale, options)} - ${ovulationDate.toLocaleDateString(locale, options)}`;

                resultsContainer.innerHTML = `
                    <div class="result-item">
                        <strong>Current Phase (Today)</strong>
                        <span class="highlight-current">${tips[currentPhaseKey] ? currentPhaseKey.charAt(0).toUpperCase() + currentPhaseKey.slice(1) + ' Phase' : 'Update date'}</span>
                    </div>
                    <div class="result-item">
                        <strong>Estimated Next Period</strong>
                        <span>${nextPeriodStr}</span>
                    </div>
                    <div class="result-item">
                        <strong>Approximate Fertile Window</strong>
                        <span class="highlight-fertile">${fertileWindowStr}</span>
                    </div>
                    <div class="result-item">
                        <strong>Estimated Ovulation Day</strong>
                        <span class="highlight-ovulation">${ovulationStr}</span>
                    </div>
                `;
                
                peakFertilityEl.textContent = peakFertilityStr;
                tipContentEl.textContent = tips[currentPhaseKey];

                saveCycleHistory({ startDate: lastPeriodDate.toISOString().split('T')[0], length: cycleLength });
                displayCycleHistory();

                [resultsContainer, doctorInfoContainer, symptomTrackerContainer, cycleHistoryContainer, educationalTipsContainer, conceptionTipsContainer].forEach(el => {
                    el.classList.remove('hidden');
                });
            });

            initializeSymptomTracker();
            displayCycleHistory();
            if (getCycleHistory().length > 0) {
                cycleHistoryContainer.classList.remove('hidden');
            }
        }
        
         // --- PINCODE FINDER LOGIC ---
        const pincodeScreen = document.getElementById('pincode-calc-screen');
        if (pincodeScreen) {
            const pincodeForm = pincodeScreen.querySelector('#pincode-form');
            const searchInput = pincodeScreen.querySelector('#pincode-search-input');
            const resultContainer = pincodeScreen.querySelector('#pincode-result-container');
            const messageEl = pincodeScreen.querySelector('#pincode-message');

            pincodeForm.addEventListener('submit', function(event) {
                event.preventDefault(); 
                const searchTerm = searchInput.value.trim();

                if (searchTerm === '') {
                    messageEl.textContent = 'Please enter a location to search.';
                    messageEl.style.color = 'var(--danger-color)';
                    resultContainer.innerHTML = '';
                    resultContainer.appendChild(messageEl);
                    return;
                }
                findPincode(searchTerm);
            });

            async function findPincode(location) {
                const apiUrl = `https://api.postalpincode.in/postoffice/${location}`;
                
                messageEl.textContent = 'Searching...';
                messageEl.style.color = 'var(--text-color)';
                resultContainer.innerHTML = '';
                resultContainer.appendChild(messageEl);

                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();
                    resultContainer.innerHTML = '';

                    if (data && data[0].Status === 'Success') {
                        displayPincodeResults(data[0].PostOffice);
                    } else {
                        messageEl.textContent = `No results found for "${location}". Please check the spelling or try another location.`;
                        messageEl.style.color = 'var(--danger-color)';
                        resultContainer.appendChild(messageEl);
                    }
                } catch (error) {
                    console.error('Error fetching data:', error);
                    messageEl.textContent = 'An error occurred. Please check your internet connection and try again.';
                    messageEl.style.color = 'var(--danger-color)';
                    resultContainer.appendChild(messageEl);
                }
            }
            
            function displayPincodeResults(postOffices) {
                if (postOffices.length === 0) {
                    messageEl.textContent = 'No post offices found for the given location.';
                    messageEl.style.color = 'var(--danger-color)';
                    resultContainer.appendChild(messageEl);
                    return;
                }
                
                postOffices.forEach(office => {
                    const resultCard = document.createElement('div');
                    resultCard.className = 'result-card';
                    resultCard.innerHTML = `
                        <p class="result-pincode">Pincode: ${office.Pincode}</p>
                        <div class="result-details">
                            <p><strong>Location:</strong> ${office.Name}</p>
                            <p><strong>District:</strong> ${office.District}</p>
                            <p><strong>State:</strong> ${office.State}</p>
                        </div>
                    `;
                    resultContainer.appendChild(resultCard);
                });
            }
        }


        const dateTimeElement = document.getElementById('live-datetime');
        function updateLiveDateTime() { const now = new Date(); const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }; const locale = currentLang.replace(/_/, '-') || 'en-US'; dateTimeElement.textContent = now.toLocaleString(locale, options); }
        setInterval(updateLiveDateTime, 1000);
        
         // --- UPDATED ADVERTISEMENT LOGIC with user's script ---
        function loadAds() {
            const adKey = '1e7e84fedd27c00dba60e5ac89fc55ac';
            const adUrl = `//www.highperformanceformat.com/${adKey}/invoke.js`;
            document.querySelectorAll('.ad-bar').forEach(adBar => {
                adBar.innerHTML = ''; // Clear previous ads
                const script1 = document.createElement('script');
                script1.type = 'text/javascript';
                script1.innerHTML = `atOptions = {'key' : '${adKey}','format' : 'iframe','height' : 50,'width' : 320,'params' : {}};`;
                
                const script2 = document.createElement('script');
                script2.type = 'text/javascript';
                script2.src = adUrl;

                adBar.appendChild(script1);
                adBar.appendChild(script2);
            });
        }
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js', { scope: '/' })
                    .then(registration => { console.log('ServiceWorker registration successful:', registration); })
                    .catch(error => { console.log('ServiceWorker registration failed:', error); });
            });
        }
        
        // --- BIOMEDICAL WASTE SEGREGATION SCRIPT ---
const biomedicalWasteScreen = document.getElementById('biomedical-waste-screen');
if (biomedicalWasteScreen) {
    const wasteData = {
        'human anatomical waste': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Human Anatomical Waste', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'animal anatomical waste': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Animal Anatomical Waste', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'soiled waste': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Soiled Waste (Contaminated with blood/body fluids)', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'expired or discarded medicines': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Expired/Discarded Medicines & Cytotoxic Drugs', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'chemical waste': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Chemical Waste', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'microbiology & biotechnology waste': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Microbiology & Biotechnology Waste', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'contaminated blood & body fluids': { category: 'Yellow', containerDesc: 'Yellow Bag (Non-chlorinated)', type: 'Contaminated Blood & Body Fluids', treatment: 'Incineration, Plasma Pyrolysis, Deep Burial' },
        'contaminated recyclable waste': { category: 'Red', containerDesc: 'Red Bag (Non-chlorinated)', type: 'Contaminated Recyclable Waste (Plastics, Rubber)', treatment: 'Autoclaving / Microwaving / Hydroclaving → Recycling' },
        'sharps waste': { category: 'White', containerDesc: 'White (Translucent, puncture-proof container)', type: 'Sharps Waste (whether contaminated or not)', treatment: 'Autoclaving/Dry heat sterilization → Shredding → Metal recovery' },
        'glassware waste': { category: 'Blue', containerDesc: 'Blue Bag/Container', type: 'Glassware Waste', treatment: 'Disinfection/Autoclaving → Recycling' },
        'metallic implants': { category: 'Blue', containerDesc: 'Blue Bag/Container', type: 'Metallic Implants', treatment: 'Disinfection/Autoclaving → Recycling' },
        'general waste': { category: 'Black', containerDesc: 'Black Bag', type: 'General / Domestic Waste (Non-Biomedical)', treatment: 'Landfill / Municipal Solid Waste Handling' },
    };

    const wasteKeywords = {
        'human tissue': 'human anatomical waste', 'organ': 'human anatomical waste', 'body part': 'human anatomical waste', 'amputated parts': 'human anatomical waste', 'placenta': 'human anatomical waste', 'umbilical cord': 'human anatomical waste', 'fetus': 'human anatomical waste',
        'animal carcasse': 'animal anatomical waste', 'experimental animal': 'animal anatomical waste', 'animal tissues': 'animal anatomical waste',
        'cotton swab': 'soiled waste', 'dressing': 'soiled waste', 'bandage': 'soiled waste', 'gauze piece': 'soiled waste', 'disposable bed sheet': 'soiled waste', 'towel': 'soiled waste', 'pillow cover': 'soiled waste', 'bedding': 'soiled waste', 'linen': 'soiled waste', 'plaster cast': 'soiled waste', 'sanitary pad': 'soiled waste',
        'expired drug': 'expired or discarded medicines', 'discarded medicine': 'expired or discarded medicines', 'cytotoxic drug': 'expired or discarded medicines', 'chemotherapy drug': 'expired or discarded medicines', 'antibiotics': 'expired or discarded medicines', 'pharmaceuticals': 'expired or discarded medicines',
        'laboratory culture': 'microbiology & biotechnology waste', 'stock specimen': 'microbiology & biotechnology waste', 'petri dish': 'microbiology & biotechnology waste', 'agar plate': 'microbiology & biotechnology waste', 'live vaccine': 'microbiology & biotechnology waste', 'attenuated vaccine': 'microbiology & biotechnology waste', 'residual waste from laboratory': 'microbiology & biotechnology waste',
        'used disinfectant': 'chemical waste', 'sodium hypochlorite': 'chemical waste', 'phenol': 'chemical waste', 'glutaraldehyde': 'chemical waste', 'formalin': 'chemical waste', 'insecticide': 'chemical waste', 'pesticide': 'chemical waste', 'solvent': 'chemical waste', 'fixative': 'chemical waste', 'residue from chemical treatment': 'chemical waste',
        'infected blood bag': 'contaminated blood & body fluids', 'residual blood': 'contaminated blood & body fluids', 'pleural fluid': 'contaminated blood & body fluids', 'ascitic fluid': 'contaminated blood & body fluids', 'peritoneal fluid': 'contaminated blood & body fluids', 'body fluids': 'contaminated blood & body fluids',
        'dialysis waste': 'soiled waste', 'dialyzer': 'soiled waste', 'highly infectious material': 'soiled waste',
        'iv sets': 'contaminated recyclable waste', 'iv set': 'contaminated recyclable waste', 'iv tubing': 'contaminated recyclable waste', 'tube': 'contaminated recyclable waste', 'iv bottle': 'contaminated recyclable waste', 'ns': 'contaminated recyclable waste', 'rl': 'contaminated recyclable waste', 'dns': 'contaminated recyclable waste', 'd5': 'contaminated recyclable waste', 'plastic bottle': 'contaminated recyclable waste', 'bottle': 'contaminated recyclable waste', 'iv infusion sets': 'contaminated recyclable waste', 'extension line': 'contaminated recyclable waste', 'catheters': 'contaminated recyclable waste', 'urinary catheters': 'contaminated recyclable waste', 'condom catheter': 'contaminated recyclable waste', 'catheter': 'contaminated recyclable waste', 'central line': 'contaminated recyclable waste', 'foleys': 'contaminated recyclable waste', 'foleys catheter': 'contaminated recyclable waste', 'arterial line': 'contaminated recyclable waste', 'cannula': 'contaminated recyclable waste', 'tegaderm': 'contaminated recyclable waste', 'iv fixer': 'contaminated recyclable waste', 'dianaplast': 'contaminated recyclable waste', 'icd': 'contaminated recyclable waste', 'intra costal drainage': 'contaminated recyclable waste', 'central venous catheters': 'contaminated recyclable waste', 'endotracheal tubes': 'contaminated recyclable waste', 'et tube': 'contaminated recyclable waste', 'ryles tube': 'contaminated recyclable waste', 'perentral': 'contaminated recyclable waste', 'intra peripheral venous catheter': 'contaminated recyclable waste', 'urine bags': 'contaminated recyclable waste', 'urine collection bag': 'contaminated recyclable waste', 'stoma bag': 'contaminated recyclable waste', 'drainage bag': 'contaminated recyclable waste', 'emesis bag': 'contaminated recyclable waste', 'syringes without needles': 'contaminated recyclable waste', 'gloves': 'contaminated recyclable waste', 'examination gloves': 'contaminated recyclable waste', 'surgical gloves': 'contaminated recyclable waste', 'latex gloves': 'contaminated recyclable waste', 'nitrile gloves': 'contaminated recyclable waste', 'ryle’s tube': 'contaminated recyclable waste', 'nasogastric tube': 'contaminated recyclable waste', 'suction tube': 'contaminated recyclable waste', 'dialysis tubing': 'contaminated recyclable waste', 'oxygen mask': 'contaminated recyclable waste', 'ventilator circuits': 'contaminated recyclable waste', 'peg tube': 'contaminated recyclable waste', 'empty saline bag': 'contaminated recyclable waste', 'iv fluid bag': 'contaminated recyclable waste', 'blood bag': 'contaminated recyclable waste', 'apron': 'contaminated recyclable waste', 'gown': 'contaminated recyclable waste', 'cap': 'contaminated recyclable waste', 'shoe cover': 'contaminated recyclable waste', 'face masks': 'contaminated recyclable waste', 'surgical mask': 'contaminated recyclable waste', 'n95': 'contaminated recyclable waste', 'plastic pipette tip': 'contaminated recyclable waste', 'microcentrifuge tube': 'contaminated recyclable waste', 'plastic syringe without fixed needle': 'contaminated recyclable waste', 'disposable plastic container': 'contaminated recyclable waste',
        'needles': 'sharps waste', 'syringe with fixed needle': 'sharps waste', 'scalpels': 'sharps waste', 'blades': 'sharps waste', 'glass sharps': 'sharps waste', 'scalp': 'sharps waste', 'knife': 'sharps waste', 'trocher': 'sharps waste', 'metal stylete': 'sharps waste',
        'broken glass': 'glassware waste', 'discarded laboratory glassware': 'glassware waste', 'laboratory glassware': 'glassware waste', 'glassware': 'glassware waste', 'ampoule': 'glassware waste', 'vial': 'glassware waste',
        'metallic implant': 'metallic implants', 'orthopedic plate': 'metallic implants', 'plate': 'metallic implants', 'screws': 'metallic implants', 'nail': 'metallic implants', 'prosthetic': 'metallic implants', 'prosthetics': 'metallic implants',
        'paper': 'general waste', 'cardboard': 'general waste', 'food': 'general waste', 'packaging': 'general waste', 'sweeping': 'general waste', 'garden waste': 'general waste', 'canteen waste': 'general waste', 'water bottle': 'general waste', 'wrapper': 'general waste'
    };
    const ambiguousItems = {
        'cotton': { question: "Is the <strong>Cotton</strong> contaminated with body fluids (blood, etc.)?", yesKey: 'soiled waste', noKey: 'general waste' },
        'tissue': { question: "Is the <strong>Tissue</strong> contaminated with body fluids (blood, etc.)?", yesKey: 'soiled waste', noKey: 'general waste' },
        'gauze': { question: "Is the <strong>Gauze</strong> contaminated with body fluids (blood, etc.)?", yesKey: 'soiled waste', noKey: 'general waste' },
        'syringe': { question: "Does the <strong>Syringe</strong> have a needle attached?", yesKey: 'sharps waste', noKey: 'contaminated recyclable waste' },
    };
    const medicineSuffixes = ['cillin', 'mycin', 'cycline', 'vir', 'razole', 'statin', 'lol', 'pril', 'sartan', 'pam', 'lam', 'tine', 'done', 'fenac', 'profen', 'xicam', 'mab', 'nib', 'zole'];
    const DISCLAIMER_TEXT = "<strong>Disclaimer:</strong> This tool provides guidance based on standard BMW management rules. The generator of the waste is responsible for its proper segregation. Always follow your institution's specific protocols and local regulations.";

    const wasteInput = biomedicalWasteScreen.querySelector('#wasteInput');
    const segregateBtn = biomedicalWasteScreen.querySelector('#segregateBtn');
    const resetBtn = biomedicalWasteScreen.querySelector('#resetBtn');
    const resultDiv = biomedicalWasteScreen.querySelector('#result');

    segregateBtn.addEventListener('click', findWasteCategory);
    resetBtn.addEventListener('click', resetTool);
    wasteInput.addEventListener('keyup', (event) => { if (event.key === 'Enter') findWasteCategory(); });

    const levenshtein = (s1, s2) => {
        if (s1.length > s2.length) [s1, s2] = [s2, s1];
        const distances = Array.from({ length: s1.length + 1 }, (_, i) => i);
        for (let j = 0; j < s2.length; j++) {
            let prev = distances[0];
            distances[0]++;
            for (let i = 0; i < s1.length; i++) {
                const temp = distances[i + 1];
                distances[i + 1] = Math.min(prev + (s1[i] !== s2[j] ? 1 : 0), distances[i] + 1, distances[i + 1] + 1);
                prev = temp;
            }
        }
        return distances[s1.length];
    };

    function findWasteCategory() {
        const query = wasteInput.value.trim().toLowerCase();
        if (!query) {
            displayError('Please enter a waste item or color category.');
            return;
        }
        const colors = ['yellow', 'red', 'white', 'blue', 'black'];
        const foundColor = colors.find(c => query.includes(c));
        if (foundColor) {
            displayCategoryList(foundColor);
            return;
        }
        if (ambiguousItems[query]) {
            displayClarification(query, ambiguousItems[query]);
            return;
        }
        if (wasteKeywords[query]) {
            displayResult(query, wasteData[wasteKeywords[query]]);
            return;
        }
        let minDistance = Infinity;
        let bestMatch = null;
        for (const keyword in wasteKeywords) {
            const distance = levenshtein(query, keyword);
            if (distance < minDistance) {
                minDistance = distance;
                bestMatch = keyword;
            }
        }
        if (bestMatch && minDistance <= 2) {
            displayResult(query, wasteData[wasteKeywords[bestMatch]], bestMatch);
            return;
        }
        if (medicineSuffixes.some(s => query.endsWith(s)) || ['tablet', 'capsule', 'syrup', 'drug', 'ointment'].some(m => query.includes(m))) {
            displayResult(query, wasteData['expired or discarded medicines']);
            return;
        }
        displayNotFound(query);
    }

    function resetTool() {
        wasteInput.value = '';
        resultDiv.innerHTML = '';
        wasteInput.focus();
    }

    window.showCategoryFromIcon = function(color) {
        wasteInput.value = '';
        displayCategoryList(color);
    }

    function displayCategoryList(color) {
        const data = Object.values(wasteData).find(d => d.category.toLowerCase() === color);
        if (!data) return;
        const items = Object.keys(wasteKeywords).filter(k => wasteData[wasteKeywords[k]].category.toLowerCase() === color);
        const listHtml = items.length > 0 ? `<ul class="category-list list-disc list-inside mt-4">` + items.map(item => `<li>${item}</li>`).join('') + `</ul>` : `<p class="mt-4">No specific items listed.</p>`;
        const colors = { 'Yellow': { bg: 'bg-yellow-50', text: 'text-yellow-800', border: 'border-yellow-400' }, 'Red': { bg: 'bg-red-50', text: 'text-red-800', border: 'border-red-400' }, 'White': { bg: 'bg-gray-200', text: 'text-gray-800', border: 'border-gray-400' }, 'Blue': { bg: 'bg-blue-50', text: 'text-blue-800', border: 'border-blue-400' }, 'Black': { bg: 'bg-gray-800', text: 'text-gray-100', border: 'border-gray-600' } };
        const colorStyles = colors[data.category];
        resultDiv.innerHTML = `<div class="category-card ${colorStyles.bg} rounded-xl shadow-lg overflow-hidden border-t-8 ${colorStyles.border}"><div class="p-6 md:p-8"><h2 class="text-2xl md:text-3xl font-bold ${colorStyles.text}">${data.category} Category Items</h2><p class="text-md font-semibold text-gray-600 mt-1">Container: <span class="font-normal">${data.containerDesc}</span></p><div class="mt-4 pt-4 border-t"><p class="text-md ${colorStyles.text}"><strong class="font-semibold">Common Items Include:</strong></p>${listHtml}</div></div></div>`;
    }

    function displayClarification(item, data) {
        resultDiv.innerHTML = `<div class="clarification-card border-l-8 border-blue-500 bg-white rounded-lg p-6 shadow-md text-center"><h3 class="text-xl font-bold text-blue-800">Justification Needed</h3><p class="text-lg text-gray-700 mt-2">${data.question}</p><div class="mt-4 flex flex-col sm:flex-row justify-center gap-4"><button onclick="handleClarificationChoice('${data.yesKey}', '${item}')" class="w-full sm:w-auto bg-yellow-500 text-white font-bold px-6 py-2 rounded-lg hover:bg-yellow-600">Yes</button><button onclick="handleClarificationChoice('${data.noKey}', '${item}')" class="w-full sm:w-auto bg-gray-700 text-white font-bold px-6 py-2 rounded-lg hover:bg-gray-800">No</button></div></div>`;
    }

    window.handleClarificationChoice = function(wasteKey, originalQuery) {
        displayResult(originalQuery, wasteData[wasteKey]);
    }

    function displayResult(query, data, correctedQuery = null) {
        const colors = { 'Yellow': { bg: 'bg-yellow-50', text: 'text-yellow-800', border: 'border-yellow-400', iconBg: 'bg-yellow-100' }, 'Red': { bg: 'bg-red-50', text: 'text-red-800', border: 'border-red-400', iconBg: 'bg-red-100' }, 'White': { bg: 'bg-gray-200', text: 'text-gray-800', border: 'border-gray-400', iconBg: 'bg-white' }, 'Blue': { bg: 'bg-blue-50', text: 'text-blue-800', border: 'border-blue-400', iconBg: 'bg-blue-100' }, 'Black': { bg: 'bg-gray-800', text: 'text-gray-100', border: 'border-gray-600', iconBg: 'bg-gray-700' } };
        const color = colors[data.category];
        const correctionNotice = correctedQuery ? `<p class="text-sm text-gray-500 -mt-2 mb-2">(Showing result for "<strong>${correctedQuery}</strong>")</p>` : '';
        resultDiv.innerHTML = `<div class="result-card bg-white rounded-xl shadow-lg overflow-hidden border-t-8 ${color.border}"><div class="p-6 md:p-8"><div class="flex items-center gap-6"><div class="flex-shrink-0 w-24 h-24 rounded-full flex items-center justify-center ${color.iconBg}"><svg class="w-16 h-16 ${color.text}" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.583 2.5l-1.5-2.5h-4.166l-1.5 2.5h-5.417c-1.287 0-2.333 1.046-2.333 2.333v2.334h25v-2.334c0-1.287-1.046-2.333-2.333-2.333h-5.251zM3.25 10.333l2.333 11.667c.058 1.287 1.146 2.292 2.442 2.292h9.95c1.296 0 2.384-1.005 2.442-2.292l2.333-11.667h-19.5z"/></svg></div><div><div class="uppercase tracking-wide text-sm ${color.text} font-bold">${data.containerDesc}</div><h2 class="block mt-1 text-3xl leading-tight font-extrabold text-black capitalize">${query}</h2>${correctionNotice}</div></div><div class="mt-6 pt-4 border-t"><p class="text-gray-600"><strong class="font-semibold text-gray-800">Waste Type:</strong> ${data.type}</p><p class="text-gray-600 mt-2"><strong class="font-semibold text-gray-800">Treatment & Disposal:</strong> ${data.treatment}</p></div></div><div class="px-6 pb-4 md:px-8 md:pb-6 bg-gray-50/50 border-t"><div class="disclaimer border-l-4 border-gray-400"><p>${DISCLAIMER_TEXT}</p></div></div></div>`;
    }

    function displayError(message) {
         resultDiv.innerHTML = `<div class="result-card border-l-8 border-red-500 bg-white rounded-lg p-6 shadow-md"><p class="font-semibold text-red-800">${message}</p></div>`;
    }

    function displayNotFound(query) {
        resultDiv.innerHTML = `<div class="result-card bg-white rounded-xl shadow-lg overflow-hidden"><div class="p-6 md:p-8"><h2 class="text-2xl font-bold text-gray-800 capitalize">"${query}"</h2><p class="text-lg font-semibold mt-1 text-red-600">Category Not Found</p><p class="mt-2 text-gray-600">Please check the spelling. If the item is non-contaminated general waste (e.g., food, paper), it belongs in the Black Bag. For all other biomedical waste, please refer to your facility's guidelines.</p><div class="disclaimer mt-4 pt-4 border-t"><p>${DISCLAIMER_TEXT}</p></div></div></div>`;
    }
}

// --- ANTIDOTE FINDER SCRIPT ---
const antidoteScreen = document.getElementById('antidote-finder-screen');
if (antidoteScreen) {
    const antidoteData = {
        'paracetamol': { name: 'N-acetylcysteine (NAC)', class: 'Acetaminophen antidote', dose: 'Loading dose: 140 mg/kg orally. Maintenance: 70 mg/kg every 4 hours.', frequency: 'Every 4 hours', route: 'Oral (PO) or Intravenous (IV)', indications: 'Acetaminophen overdose.', contraindications: 'Hypersensitivity to acetylcysteine.' },
        'opioids': { name: 'Naloxone', class: 'Opioid antagonist', dose: '0.4 mg to 2 mg IV/IM/SC.', frequency: 'Repeat every 2-3 minutes as needed', route: 'IV, IM, SC, Intranasal', indications: 'Opioid overdose, respiratory depression.', contraindications: 'Hypersensitivity.' },
        'benzodiazepines': { name: 'Flumazenil', class: 'Benzodiazepine receptor antagonist', dose: 'Initial: 0.2 mg IV over 15 seconds.', frequency: 'Repeat at 1-min intervals if needed', route: 'Intravenous (IV)', indications: 'Reversal of benzodiazepine sedation.', contraindications: 'TCA overdose, seizure history.' },
        'organophosphates': { name: 'Atropine + Pralidoxime (2-PAM)', class: 'Anticholinergic, Cholinesterase reactivator', dose: 'Atropine: 2-4 mg IV. Pralidoxime: 1-2 g IV.', frequency: 'As needed', route: 'Intravenous (IV)', indications: 'Organophosphate and nerve agent poisoning.', contraindications: 'Use with caution in cardiac disease.' },
        'dimercaprol_poisoning': { name: 'Dimercaprol (BAL)', class: 'Chelating Agent', dose: '3-5 mg/kg deep IM.', frequency: 'Every 4 hours', route: 'Intramuscular (IM)', indications: 'Arsenic, gold, inorganic mercury poisoning.', contraindications: 'Not for iron poisoning, renal impairment.' },
        'methemoglobinemia': { name: 'Methylene Blue', class: 'Enzyme cofactor', dose: '1-2 mg/kg IV over 5 minutes.', frequency: 'May repeat in 1 hour', route: 'Intravenous (IV)', indications: 'Drug-induced methemoglobinemia.', contraindications: 'G6PD deficiency, severe renal failure.' },
        'heparin': { name: 'Protamine Sulfate', class: 'Heparin antagonist', dose: '1 mg per 100 units of heparin.', frequency: 'Single dose', route: 'Intravenous (IV)', indications: 'Heparin overdose.', contraindications: 'Hypersensitivity to protamine.' },
        'warfarin': { name: 'Vitamin K (Phytonadione)', class: 'Clotting factor synthesis promoter', dose: '2.5 to 10 mg.', frequency: 'Single dose, may repeat', route: 'Oral (PO), IV', indications: 'Reversal of warfarin.', contraindications: 'Known hypersensitivity.' },
        'digoxin': { name: 'Digoxin Immune Fab (DigiFab)', class: 'Antidigoxin immunotherapy', dose: 'Varies based on digoxin load.', frequency: 'Single dose', route: 'Intravenous (IV)', indications: 'Life-threatening digoxin toxicity.', contraindications: 'Hypersensitivity.' },
        'iron': { name: 'Deferoxamine (Desferal)', class: 'Chelating Agent', dose: '15 mg/kg/hour IV infusion.', frequency: 'Continuous infusion', route: 'IV or IM', indications: 'Acute iron poisoning or chronic iron overload.', contraindications: 'Severe renal disease.' },
        'ethylene_glycol': { name: 'Fomepizole or Ethanol', class: 'Alcohol Dehydrogenase Inhibitor', dose: 'Fomepizole: 15 mg/kg loading dose.', frequency: 'Every 12 hours', route: 'Intravenous (IV)', indications: 'Ethylene glycol or methanol poisoning.', contraindications: 'Hypersensitivity.' },
        'cyanide': { name: 'Hydroxocobalamin or Sodium Thiosulfate + Sodium Nitrite', class: 'Cyanide Antidote Kit', dose: 'Varies by kit component.', frequency: 'Single dose, may repeat', route: 'Intravenous (IV)', indications: 'Cyanide poisoning.', contraindications: 'Nitrites can cause hypotension.' },
        'lead': { name: 'Succimer (DMSA), EDTA, Dimercaprol (BAL)', class: 'Chelating Agent', dose: 'Varies by agent and severity.', frequency: 'Varies', route: 'PO, IV, IM', indications: 'Mild to severe lead poisoning.', contraindications: 'Renal impairment.' }
    };
    const aliases = { 'acetaminophen': 'paracetamol', 'acetaminophen overdose': 'paracetamol', 'tylenol': 'paracetamol', 'opiates': 'opioids', 'morphine': 'opioids', 'opioid overdose': 'opioids', 'benzodiazepine overdose': 'benzodiazepines', 'organophosphate poisoning': 'organophosphates', 'carbamates': 'organophosphates', 'nerve agent poisoning': 'organophosphates', 'arsenic': 'dimercaprol_poisoning', 'arsenic poisoning': 'dimercaprol_poisoning', 'gold': 'dimercaprol_poisoning', 'mercury poisoning': 'dimercaprol_poisoning', 'drug-induced methemoglobinemia': 'methemoglobinemia', 'digitalis glycoside toxicity': 'digoxin', 'iron overload': 'iron', 'ethylene glycol poisoning': 'ethylene_glycol', 'methanol poisoning': 'ethylene_glycol', 'cyanide poisoning': 'cyanide', 'lead poisoning': 'lead' };
    const reverseAntidoteData = {};
    for (const toxicAgent in antidoteData) { const antidoteInfo = antidoteData[toxicAgent]; if (antidoteInfo && antidoteInfo.name) { const cleanedNames = antidoteInfo.name.toLowerCase().split('(')[0].split(/ \+ |,| or |\//).map(name => name.trim()).filter(name => name && name.length > 2); cleanedNames.forEach(antidoteName => { if (!reverseAntidoteData[antidoteName]) { reverseAntidoteData[antidoteName] = []; } reverseAntidoteData[antidoteName].push(toxicAgent); }); } }
    for (const antidoteName in reverseAntidoteData) { reverseAntidoteData[antidoteName] = [...new Set(reverseAntidoteData[antidoteName])]; }
    const drugInput = antidoteScreen.querySelector('#antidote-drug-input');
    const findBtn = antidoteScreen.querySelector('#antidote-find-btn');
    const resetBtn = antidoteScreen.querySelector('#antidote-reset-btn');
    const resultContainer = antidoteScreen.querySelector('#antidote-result-container');
    window.searchAgent = function(agentName) { drugInput.value = agentName; findAntidote(); }
    const displayResult = (data, query) => { resultContainer.innerHTML = ''; let resultHTML = `<div class="bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden result-animation"><div class="p-5 header-gradient text-white flex items-center gap-4"><svg class="w-8 h-8 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" /></svg><div><h2 class="text-xl font-bold">Antidote Information</h2><p class="text-sm opacity-80 capitalize">For: <span class="font-semibold">${query}</span></p></div></div><div class="p-6 bg-gray-50"><div class="mb-4"><p class="text-sm text-gray-500">${data.class}</p><h3 class="text-3xl font-extrabold text-gray-800 tracking-tight">${data.name}</h3></div><div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-5 text-sm"><div><strong class="block text-gray-600 font-semibold">Dose:</strong> <span class="text-gray-800">${data.dose}</span></div><div><strong class="block text-gray-600 font-semibold">Route:</strong> <span class="text-gray-800">${data.route}</span></div><div class="md:col-span-2"><strong class="block text-gray-600 font-semibold">Indications:</strong> <span class="text-gray-800">${data.indications}</span></div><div class="md:col-span-2"><strong class="block text-gray-600 font-semibold">Contraindications:</strong> <span class="text-gray-800">${data.contraindications}</span></div></div></div></div>`; resultContainer.innerHTML = resultHTML; displayDisclaimer(); };
    const displayReverseResult = (antidoteQuery, toxicAgents) => { resultContainer.innerHTML = ''; const agentListHTML = toxicAgents.map(agent => `<li class="capitalize"><button onclick="searchAgent('${agent}')" class="agent-link">${agent.replace(/_poisoning/g, '').replace(/_/g, ' ')}</button></li>`).join(''); let resultHTML = `<div class="bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden result-animation"><div class="p-5 header-gradient text-white flex items-center gap-4"><svg class="w-8 h-8 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg><div><h2 class="text-xl font-bold">Antidote Application</h2><p class="text-sm opacity-80 capitalize">Antidote: <span class="font-semibold">${antidoteQuery}</span></p></div></div><div class="p-6 bg-gray-50"><div class="mb-4"><p class="text-sm text-gray-500">Used to Treat the Following:</p><ul class="mt-3 flex flex-wrap gap-3">${agentListHTML}</ul></div></div></div>`; resultContainer.innerHTML = resultHTML; displayDisclaimer(); };
    const displayMessage = (title, message) => { resultContainer.innerHTML = `<div class="bg-yellow-50 text-yellow-800 p-5 rounded-xl border-2 border-yellow-300 result-animation flex items-start gap-4"><svg class="w-6 h-6 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg><div><p class="font-bold">${title}</p><p class="text-sm">${message}</p></div></div>`; };
    const displayDisclaimer = () => { const disclaimer = document.createElement('div'); disclaimer.className = 'mt-6 text-center text-xs text-gray-500 result-animation'; disclaimer.innerHTML = `<p><strong class="font-semibold">Disclaimer:</strong> This information is for educational and informational purposes only and is not a substitute for professional medical advice, diagnosis, or treatment. Always consult with a qualified healthcare provider.</p>`; resultContainer.appendChild(disclaimer); };
    const findAntidote = () => { const query = drugInput.value.trim().toLowerCase(); if (!query) { displayMessage('Input Required', 'Please enter a drug or toxic agent name.'); return; } const primaryKey = antidoteData[query] ? query : aliases[query]; const result = antidoteData[primaryKey]; if (result) { displayResult(result, drugInput.value.trim()); return; } const reverseResult = reverseAntidoteData[query]; if (reverseResult) { displayReverseResult(query, reverseResult); return; } displayMessage('Not Found', 'The agent or antidote you entered is not in our database. Please check the spelling.'); };
    const resetFinder = () => { drugInput.value = ''; resultContainer.innerHTML = ''; drugInput.focus(); };
    findBtn.addEventListener('click', findAntidote);
    resetBtn.addEventListener('click', resetFinder);
    drugInput.addEventListener('keyup', (event) => { if (event.key === 'Enter') findAntidote(); });
}

 // --- Unit Converter JavaScript ---
        const massCalcScreen = document.getElementById('mass-calc-screen');
        const inputValue = massCalcScreen.querySelector('#inputValue');
        const fromUnit = massCalcScreen.querySelector('#fromUnit');
        const toUnit = massCalcScreen.querySelector('#toUnit');
        const convertButton = massCalcScreen.querySelector('#convertButton');
        const clearButton = massCalcScreen.querySelector('#clearButton');
        const copyButton = massCalcScreen.querySelector('#copyButton');
        const resultDisplay = massCalcScreen.querySelector('#resultDisplay');
        const resultUnitSpan = massCalcScreen.querySelector('#resultUnit');
        const messageBox = massCalcScreen.querySelector('#messageBox');
        const conversionFactors = { 'mcg': 0.001, 'mg': 1, 'gm': 1000 };
        function showMessage(message, type) { messageBox.textContent = message; messageBox.classList.remove('hidden', 'bg-red-800', 'bg-green-800', 'bg-blue-800'); if (type === 'error') { messageBox.classList.add('bg-red-800'); } else if (type === 'success') { messageBox.classList.add('bg-green-800'); } else { messageBox.classList.add('bg-blue-800'); } messageBox.classList.remove('hidden'); }
        function hideMessageBox() { if (!messageBox.classList.contains('hidden')) { messageBox.classList.add('hidden'); messageBox.textContent = ''; } }
        function convertUnits() { hideMessageBox(); const value = parseFloat(inputValue.value); const from = fromUnit.value; const to = toUnit.value; const resultValueElement = resultDisplay.firstChild; resultValueElement.parentElement.classList.remove('animate-result'); void resultValueElement.parentElement.offsetWidth; if (isNaN(value) || value < 0) { resultValueElement.textContent = 'Invalid'; resultUnitSpan.textContent = 'Input'; showMessage('Please enter a valid positive number.', 'error'); return; } if (from === to) { resultValueElement.textContent = value; resultUnitSpan.textContent = from; showMessage('Units are the same. No conversion needed.', 'info'); resultValueElement.parentElement.classList.add('animate-result'); return; } try { const valueInMg = value * conversionFactors[from]; const convertedValue = valueInMg / conversionFactors[to]; const formattedResult = parseFloat(convertedValue.toPrecision(10)); resultValueElement.textContent = formattedResult + " "; resultUnitSpan.textContent = to; resultValueElement.parentElement.classList.add('animate-result'); } catch (error) { console.error("Conversion error:", error); resultValueElement.textContent = 'Error'; resultUnitSpan.textContent = ''; showMessage('An error occurred during conversion. Please try again.', 'error'); } }
         function clearInputsAndResult() { inputValue.value = ''; resultDisplay.firstChild.textContent = '0 '; resultUnitSpan.textContent = toUnit.value; hideMessageBox(); resultDisplay.classList.remove('animate-result'); }
        function copyResultToClipboard() { const textToCopy = resultDisplay.firstChild.textContent.trim(); if (isNaN(parseFloat(textToCopy))) { showMessage('Nothing to copy.', 'error'); return; } try { navigator.clipboard.writeText(textToCopy).then(() => { showMessage('Result copied to clipboard!', 'success'); }, () => { throw new Error("Clipboard write failed"); }); } catch (err) { try { const tempInput = document.createElement('textarea'); tempInput.value = textToCopy; document.body.appendChild(tempInput); tempInput.select(); document.execCommand('copy'); document.body.removeChild(tempInput); showMessage('Result copied to clipboard!', 'success'); } catch (fallbackErr) { console.error('Failed to copy text: ', fallbackErr); showMessage('Failed to copy result. Please copy manually.', 'error'); } } }
        if(convertButton) convertButton.addEventListener('click', convertUnits);
        if(clearButton) clearButton.addEventListener('click', clearInputsAndResult);
        if(copyButton) copyButton.addEventListener('click', copyResultToClipboard);
        if(inputValue) inputValue.addEventListener('input', convertUnits);
        if(fromUnit) fromUnit.addEventListener('change', convertUnits);
        if(toUnit) toUnit.addEventListener('change', () => { if(inputValue.value) { convertUnits(); } else { resultUnitSpan.textContent = toUnit.value; } });
        
         // --- DASS-21 SCRIPT ---
        (() => {
            const dassScreen = document.getElementById('dass21-calc-screen');
            if (!dassScreen) return;
            const questions = [
                { text: "I found it hard to wind down.", category: 'S' }, { text: "I was aware of dryness of my mouth.", category: 'A' }, { text: "I couldn't seem to experience any positive feeling at all.", category: 'D' }, { text: "I experienced breathing difficulty (e.g. excessively rapid breathing, breathlessness in the absence of physical exertion).", category: 'A' }, { text: "I found it difficult to work up the initiative to do things.", category: 'D' }, { text: "I tended to over-react to situations.", category: 'S' }, { text: "I experienced trembling (e.g. in the hands).", category: 'A' }, { text: "I felt that I was using a lot of nervous energy.", category: 'S' }, { text: "I was worried about situations in which I might panic and make a fool of myself.", category: 'A' }, { text: "I felt that I had nothing to look forward to.", category: 'D' }, { text: "I found myself getting agitated.", category: 'S' }, { text: "I found it difficult to relax.", category: 'S' }, { text: "I felt down-hearted and blue.", category: 'D' }, { text: "I was intolerant of anything that kept me from getting on with what I was doing.", category: 'S' }, { text: "I felt I was close to panic.", category: 'A' }, { text: "I was unable to become enthusiastic about anything.", category: 'D' }, { text: "I felt I wasn't worth much as a person.", category: 'D' }, { text: "I felt that I was rather touchy.", category: 'S' }, { text: "I was aware of the action of my heart in the absence of physical exertion (e.g. sense of heart rate increase, heart missing a beat).", category: 'A' }, { text: "I felt scared without any good reason.", category: 'A' }, { text: "I felt that life was meaningless.", category: 'D' }
            ];
            const options = [
                { text: "Did not apply to me at all", value: 0 }, { text: "Applied to me to some degree, or some of the time", value: 1 }, { text: "Applied to me to a considerable degree, or a good part of time", value: 2 }, { text: "Applied to me very much, or most of the time", value: 3 }
            ];
            const scoring = { Depression: { normal: 9, mild: 13, moderate: 20, severe: 27, extremelySevere: Infinity }, Anxiety: { normal: 7, mild: 9, moderate: 14, severe: 19, extremelySevere: Infinity }, Stress: { normal: 14, mild: 18, moderate: 25, severe: 33, extremelySevere: Infinity } };
            const recommendations = {
                normal: ["Continue practicing healthy habits like regular exercise and a balanced diet.", "Maintain strong social connections with friends and family.", "Engage in hobbies and activities you enjoy to manage everyday stress."],
                mild: ["Incorporate mindfulness or meditation into your daily routine.", "Ensure you are getting adequate sleep (7-9 hours per night).", "Consider talking to a trusted friend or family member about how you're feeling."],
                moderate: ["It is advisable to speak with a doctor or a mental health professional.", "Explore stress-management techniques like deep breathing exercises or journaling.", "Prioritize self-care and be mindful of your workload and commitments."],
                severe: ["It is strongly recommended to seek professional help from a therapist or counselor.", "A healthcare provider can offer guidance and discuss potential treatment options.", "Avoid self-medication and rely on professional medical advice."],
                extremelySevere: ["Please seek immediate professional help. Your well-being is a priority.", "Contact a mental health crisis line or a healthcare provider without delay.", "A structured treatment plan from a professional is essential."]
            };
            const startScreen = dassScreen.querySelector('#dass21-start-screen');
            const quizScreen = dassScreen.querySelector('#dass21-quiz-screen');
            const resultsScreen = dassScreen.querySelector('#dass21-results-screen');
            const startBtn = dassScreen.querySelector('#dass21-start-btn');
            const restartBtn = dassScreen.querySelector('#dass21-restart-btn');
            const exitBtn = dassScreen.querySelector('#dass21-exit-btn');
            const progressBar = dassScreen.querySelector('#dass21-progress-bar');
            const progressText = dassScreen.querySelector('#dass21-progress-text');
            const questionText = dassScreen.querySelector('#dass21-question-text');
            const optionsContainer = dassScreen.querySelector('#dass21-options-container');
            const resultsGrid = dassScreen.querySelector('#dass21-results-grid');
            const recommendationList = dassScreen.querySelector('#dass21-recommendation-list');
            let currentQuestionIndex = 0; let scores = { D: 0, A: 0, S: 0 };
            function startQuiz() { currentQuestionIndex = 0; scores = { D: 0, A: 0, S: 0 }; startScreen.classList.add('hidden'); resultsScreen.classList.add('hidden'); quizScreen.classList.remove('hidden'); showQuestion(); }
            function exitToStart() { resultsScreen.classList.add('hidden'); quizScreen.classList.add('hidden'); startScreen.classList.remove('hidden'); }
            function showQuestion() { const question = questions[currentQuestionIndex]; questionText.parentElement.classList.add('question-exit', 'question-exit-active'); setTimeout(() => { progressText.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`; progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`; questionText.textContent = question.text; optionsContainer.innerHTML = ''; options.forEach(option => { const optionEl = document.createElement('div'); optionEl.innerHTML = `<input type="radio" name="dass21-option" value="${option.value}" id="dass21-option${option.value}" class="sr-only"><label for="dass21-option${option.value}" class="option-label block w-full p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-blue-400"><span class="font-semibold">${option.text}</span></label>`; optionsContainer.appendChild(optionEl); }); questionText.parentElement.classList.remove('question-exit', 'question-exit-active'); questionText.parentElement.classList.add('question-enter'); requestAnimationFrame(() => { questionText.parentElement.classList.add('question-enter-active'); }); }, 300); }
            function handleAnswer(e) { const selectedValue = e.target.value; if (selectedValue) { const question = questions[currentQuestionIndex]; scores[question.category] += parseInt(selectedValue); currentQuestionIndex++; if (currentQuestionIndex < questions.length) { showQuestion(); } else { showResults(); } } }
            function getSeverity(category, score) { const thresholds = scoring[category]; if (score <= thresholds.normal) return { level: 'Normal', className: 'severity-normal' }; if (score <= thresholds.mild) return { level: 'Mild', className: 'severity-mild' }; if (score <= thresholds.moderate) return { level: 'Moderate', className: 'severity-moderate' }; if (score <= thresholds.severe) return { level: 'Severe', className: 'severity-severe' }; return { level: 'Extremely Severe', className: 'severity-extremely-severe' }; }
            function showResults() { quizScreen.classList.add('hidden'); resultsScreen.classList.remove('hidden'); const finalScores = { Depression: scores.D * 2, Anxiety: scores.A * 2, Stress: scores.S * 2 }; resultsGrid.innerHTML = ''; let highestSeverityLevel = 'normal'; const severityOrder = ['normal', 'mild', 'moderate', 'severe', 'extremelySevere']; Object.keys(finalScores).forEach(category => { const score = finalScores[category]; const { level, className } = getSeverity(category, score); const resultCard = document.createElement('div'); resultCard.className = `p-4 rounded-lg border-l-4 ${className}`; resultCard.innerHTML = `<div class="flex justify-between items-center"><span class="text-xl font-bold">${category}</span><span class="text-2xl font-bold">${score}</span></div><p class="text-md font-semibold">${level}</p>`; resultsGrid.appendChild(resultCard); const currentLevelKey = level.toLowerCase().replace(' ', ''); if (severityOrder.indexOf(currentLevelKey) > severityOrder.indexOf(highestSeverityLevel)) { highestSeverityLevel = currentLevelKey; } }); const recs = recommendations[highestSeverityLevel.replace('extremelysevere', 'extremelySevere')]; recommendationList.innerHTML = ''; recs.forEach(rec => { const li = document.createElement('li'); li.className = 'flex items-start text-gray-700'; li.innerHTML = `<svg class="w-5 h-5 mr-3 mt-0.5 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>${rec}</span>`; recommendationList.appendChild(li); }); }
            startBtn.addEventListener('click', startQuiz); restartBtn.addEventListener('click', startQuiz); exitBtn.addEventListener('click', exitToStart); optionsContainer.addEventListener('change', handleAnswer);
        })();

        // --- CREATININE CLEARANCE SCRIPT ---
        (() => {
            const cccScreen = document.getElementById('ccc-calc-screen');
            if (!cccScreen) return;
            const calculatorForm = cccScreen.querySelector('#ccc-calculator-form');
            const resetBtn = cccScreen.querySelector('#ccc-reset-btn');
            const resultsSection = cccScreen.querySelector('#ccc-results-section');
            const errorMessage = cccScreen.querySelector('#ccc-error-message');
            const resultMlMin = cccScreen.querySelector('#ccc-result-ml-min');
            const resultMlHr = cccScreen.querySelector('#ccc-result-ml-hr');
            const resultLHr = cccScreen.querySelector('#ccc-result-l-hr');
            const recommendationCard = cccScreen.querySelector('#ccc-recommendation-card');
            const recommendationTitle = cccScreen.querySelector('#ccc-recommendation-title');
            const recommendationList = cccScreen.querySelector('#ccc-recommendation-list');
            calculatorForm.addEventListener('submit', (e) => { e.preventDefault(); resultsSection.classList.remove('show'); errorMessage.classList.add('hidden'); const age = parseFloat(cccScreen.querySelector('#ccc-age').value); const weight = parseFloat(cccScreen.querySelector('#ccc-weight').value); const creatinine = parseFloat(cccScreen.querySelector('#ccc-creatinine').value); const gender = cccScreen.querySelector('input[name="ccc-gender"]:checked').value; if (isNaN(age) || isNaN(weight) || isNaN(creatinine)) { showError("Please fill in all fields with valid numbers."); return; } if (age <= 0 || weight <= 0 || creatinine <= 0) { showError("Age, weight, and creatinine must be positive values."); return; } const genderFactor = (gender === 'male') ? 1 : 0.85; const creatinineClearanceMlMin = genderFactor * ((140 - age) / creatinine) * (weight / 72); if (creatinineClearanceMlMin <= 0) { showError("Calculation resulted in a non-positive value. Please check the age input."); return; } resultMlMin.textContent = creatinineClearanceMlMin.toFixed(2); resultMlHr.textContent = (creatinineClearanceMlMin * 60).toFixed(2); resultLHr.textContent = ((creatinineClearanceMlMin * 60) / 1000).toFixed(3); updateRecommendation(creatinineClearanceMlMin); setTimeout(() => { resultsSection.classList.add('show'); }, 100); });
            resetBtn.addEventListener('click', () => { calculatorForm.reset(); resultsSection.classList.remove('show'); errorMessage.classList.add('hidden'); });
            function showError(message) { errorMessage.textContent = message; errorMessage.classList.remove('hidden'); }
            function updateRecommendation(clearanceValue) { let status, recommendations, cardClasses, textClasses, icon, iconClasses; const checkIcon = `<svg class="w-5 h-5 mr-2 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`; const warningIcon = `<svg class="w-5 h-5 mr-2 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>`; const dangerIcon = `<svg class="w-5 h-5 mr-2 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" /></svg>`; if (clearanceValue > 90) { status = 'Normal Kidney Function'; recommendations = ['Maintain a healthy, balanced diet and stay well-hydrated.', 'Regular physical activity is beneficial for overall health.', 'No immediate medical follow-up is typically required for this result.']; cardClasses = 'bg-green-50 border-green-200'; textClasses = 'text-green-800'; icon = checkIcon; iconClasses = 'text-green-500'; } else if (clearanceValue >= 60) { status = 'Mild Reduction'; recommendations = ['Monitor blood pressure and blood sugar levels regularly.', 'Consider reducing intake of processed foods and sodium.', 'Discuss these results with your doctor at your next routine check-up.']; cardClasses = 'bg-yellow-50 border-yellow-200'; textClasses = 'text-yellow-800'; icon = warningIcon; iconClasses = 'text-yellow-500'; } else if (clearanceValue >= 30) { status = 'Moderate Reduction'; recommendations = ['Medical consultation is strongly recommended to manage kidney health.', 'Your doctor may need to adjust dosages of certain medications.', 'Follow a kidney-friendly diet as advised by a healthcare professional.']; cardClasses = 'bg-orange-50 border-orange-200'; textClasses = 'text-orange-800'; icon = dangerIcon; iconClasses = 'text-orange-500'; } else { status = 'Severe Reduction or Failure'; recommendations = ['Immediate medical consultation is necessary.', 'Avoid over-the-counter pain relievers (NSAIDs) unless approved by your doctor.', 'A specialist (nephrologist) referral is highly likely.']; cardClasses = 'bg-red-50 border-red-200'; textClasses = 'text-red-800'; icon = dangerIcon; iconClasses = 'text-red-500'; } recommendationTitle.innerHTML = `<span class="${iconClasses}">${icon}</span> ${status}`; recommendationCard.className = `mt-6 p-5 rounded-lg transition-colors duration-300 border ${cardClasses}`; recommendationTitle.className = `text-lg font-semibold mb-3 flex items-center ${textClasses}`; recommendationList.innerHTML = ''; recommendations.forEach(text => { const li = document.createElement('li'); li.className = `flex items-start ${textClasses}`; li.innerHTML = `<span class="mt-1">${checkIcon}</span> <span>${text}</span>`; recommendationList.appendChild(li); }); }
        })();

// --- MAP SCRIPT ---
        (() => {
            const mapScreen = document.getElementById('map-calc-screen');
            if (!mapScreen) return;
            const calculatorForm = mapScreen.querySelector('#map-calculator-form');
            const resetBtn = mapScreen.querySelector('#map-reset-btn');
            const resultsSection = mapScreen.querySelector('#map-results-section');
            const errorMessage = mapScreen.querySelector('#map-error-message');
            const systolicInput = mapScreen.querySelector('#map-systolic');
            const diastolicInput = mapScreen.querySelector('#map-diastolic');
            const mapCard = mapScreen.querySelector('#map-card');
            const mapValue = mapScreen.querySelector('#map-value');
            const mapLevel = mapScreen.querySelector('#map-level');
            const ppValue = mapScreen.querySelector('#map-pp-value');
            const ppLevel = mapScreen.querySelector('#map-pp-level');
            const recommendationList = mapScreen.querySelector('#map-recommendation-list');
            calculatorForm.addEventListener('submit', (e) => { e.preventDefault(); resultsSection.classList.remove('show'); errorMessage.classList.add('hidden'); const sbp = parseFloat(systolicInput.value); const dbp = parseFloat(diastolicInput.value); if (isNaN(sbp) || isNaN(dbp)) { showError("Please enter valid numbers for both fields."); return; } if (sbp <= 0 || dbp <= 0) { showError("Blood pressure values must be positive."); return; } if (sbp <= dbp) { showError("Systolic pressure must be higher than diastolic pressure."); return; } const map = ((2 * dbp) + sbp) / 3; const pp = sbp - dbp; mapValue.textContent = `${map.toFixed(1)} mmHg`; ppValue.textContent = `${pp.toFixed(0)} mmHg`; updateMAPUI(map); updatePPUI(pp); updateRecommendations(map); setTimeout(() => { resultsSection.classList.add('show'); }, 100); });
            resetBtn.addEventListener('click', () => { calculatorForm.reset(); resultsSection.classList.remove('show'); errorMessage.classList.add('hidden'); });
            function showError(message) { errorMessage.textContent = message; errorMessage.classList.remove('hidden'); }
            function updateMAPUI(map) { let level, className; if (map < 60) { level = 'Very Low Level'; className = 'severity-very-low'; } else if (map < 70) { level = 'Low Level'; className = 'severity-low'; } else if (map <= 100) { level = 'Normal Level'; className = 'severity-normal'; } else { level = 'High Level'; className = 'severity-high'; } mapLevel.textContent = level; mapCard.className = `p-4 rounded-lg border-l-4 transition-colors duration-300 ${className}`; }
            function updatePPUI(pp) { let level = 'Normal'; if (pp < 40) { level = 'Low (Narrow)'; } else if (pp > 60) { level = 'High (Wide)'; } ppLevel.textContent = level; }
            function updateRecommendations(map) { let recs; const checkIcon = `<svg class="w-6 h-6 mr-3 text-indigo-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`; if (map < 70) { recs = ['Low MAP can indicate insufficient blood flow to vital organs. It is crucial to consult a doctor promptly.', 'Symptoms like dizziness, fainting, or confusion require immediate medical attention.', 'Your doctor may investigate causes like dehydration, severe infection, or heart conditions.', 'Do not attempt to self-medicate; follow professional medical guidance.', 'In an emergency setting, treatments may include intravenous fluids or medications to raise blood pressure.']; } else if (map <= 100) { recs = ["Your MAP is in the healthy range, indicating good perfusion to your organs.", "Continue a heart-healthy lifestyle with a balanced diet low in sodium and saturated fats.", "Engage in regular physical activity, aiming for at least 150 minutes of moderate exercise per week.", "Manage stress through techniques like mindfulness, yoga, or hobbies.", "Schedule regular check-ups with your doctor to monitor your blood pressure and overall health."]; } else { recs = ["High MAP suggests your heart is working harder than it should, which can stress the heart and blood vessels.", "It is important to consult a healthcare provider to identify the cause and create a management plan.", "Reduce sodium (salt) intake, as it is a major contributor to high blood pressure.", "Limit alcohol and caffeine consumption, and if you smoke, seek help to quit.", "Your doctor may prescribe medication to help control your blood pressure."]; } recommendationList.innerHTML = ''; recs.forEach(rec => { const li = document.createElement('li'); li.className = 'flex items-start text-gray-700'; li.innerHTML = `${checkIcon} <span>${rec}</span>`; recommendationList.appendChild(li); }); }
        })();
        
        // --- FLUID INTAKE CALCULATOR SCRIPT ---
(() => {
    const screen = document.getElementById('fluid-intake-calc-screen');
    if (!screen) return;
    
    // --- Element Selection ---
    const weightInput = screen.querySelector('#weight-input');
    const weightSlider = screen.querySelector('#weight-slider');
    const resultsSection = screen.querySelector('#fluid-results-section');
    const resultValue = screen.querySelector('#fluid-result-value');
    const resetBtn = screen.querySelector('#fluid-reset-btn');
    const chartCanvas = screen.querySelector('#fluid-breakdown-chart');

    let fluidChart = null; // To hold the chart instance

    // --- Holliday-Segar Calculation Logic ---
    const calculateFluidIntake = (weight) => {
        if (weight <= 0 || isNaN(weight)) {
            return { total: 0, breakdown: [0, 0, 0] };
        }
        let fluid = 0;
        const breakdown = [0, 0, 0];
        if (weight <= 10) {
            fluid = weight * 100;
            breakdown[0] = fluid;
        } else if (weight <= 20) {
            fluid = 10 * 100 + (weight - 10) * 50;
            breakdown[0] = 1000;
            breakdown[1] = (weight - 10) * 50;
        } else {
            fluid = 10 * 100 + 10 * 50 + (weight - 20) * 20;
            breakdown[0] = 1000;
            breakdown[1] = 500;
            breakdown[2] = (weight - 20) * 20;
        }
        return { total: Math.round(fluid), breakdown };
    };

    // --- Chart Creation and Update Logic ---
    const createOrUpdateChart = (breakdown) => {
        const chartData = {
            labels: ['First 10 kg (100mL/kg)', 'Next 10 kg (50mL/kg)', 'Above 20 kg (20mL/kg)'],
            datasets: [{
                label: 'Fluid Volume (mL)',
                data: breakdown,
                backgroundColor: ['rgba(0, 92, 151, 0.7)', 'rgba(54, 55, 149, 0.7)', 'rgba(0, 180, 216, 0.7)'],
                borderColor: ['#005c97', '#363795', '#00b4d8'],
                borderWidth: 2
            }]
        };
        const chartOptions = {
            responsive: true, maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
                y: { beginAtZero: true, grid: { color: 'rgba(0, 0, 0, 0.05)' }, ticks: { color: '#475569' } },
                x: { grid: { display: false }, ticks: { display: false } }
            }
        };
        if (fluidChart) {
            fluidChart.data.datasets[0].data = breakdown;
            fluidChart.update();
        } else {
            fluidChart = new Chart(chartCanvas, { type: 'bar', data: chartData, options: chartOptions });
        }
    };

    // --- Main Update Function ---
    const updateCalculator = () => {
        const weight = parseFloat(weightInput.value);
        const percentage = (weight > 0 ? weight / weightSlider.max : 0) * 100;
        weightSlider.style.background = `linear-gradient(90deg, #00b4d8 ${percentage}%, rgba(255,255,255,0.5) ${percentage}%)`;
        const { total, breakdown } = calculateFluidIntake(weight);
        if (weight > 0) {
            resultsSection.classList.add('show');
            resultValue.textContent = total.toLocaleString();
            createOrUpdateChart(breakdown);
        } else {
            resultsSection.classList.remove('show');
        }
    };

    // --- Event Listeners ---
    weightInput.addEventListener('input', () => {
        weightSlider.value = weightInput.value;
        updateCalculator();
    });
    weightSlider.addEventListener('input', () => {
        weightInput.value = weightSlider.value;
        updateCalculator();
    });
    resetBtn.addEventListener('click', () => {
        weightInput.value = '';
        weightSlider.value = 0;
        updateCalculator();
        if (fluidChart) { createOrUpdateChart([0, 0, 0]); }
    });
})();
        
        // --- AUSHADHI GYAN SCRIPT (FINAL) ---
(() => {
    const aushadhiGyanScreen = document.getElementById('aushadhi-gyan-screen');
    if (!aushadhiGyanScreen) return;

    const mainContent = aushadhiGyanScreen.querySelector('#aushadhi-gyan-content');
    const headerTitleEl = aushadhiGyanScreen.querySelector('#aushadhi-gyan-title');
    let navigationStack = ['search'];

    const medicineDB = {
        'paracetamol': {
            introduction: 'A common medication used to treat pain and fever. It belongs to the class of analgesics and antipyretics.',
            class: 'Analgesic and Antipyretic',
            pharmacokinetics: ["<b>Absorption:</b> Rapid oral absorption; peak ~1–2 h.", "<b>Distribution:</b> Widely distributed throughout most body tissues.", "<b>Metabolism:</b> Primarily in the liver via conjugation.", "<b>Elimination:</b> Renal; half-life is approximately 2 hours."],
            pharmacodynamics: 'Inhibits prostaglandin synthesis in the central nervous system.',
            indication: ["Fever reduction", "Mild to moderate pain relief", "Headaches and migraines"],
            contraindications: ["Known severe hypersensitivity", "Severe active liver disease", "Chronic alcoholism"],
            doses: 'Adults: 500mg to 1000mg every 4-6 hours. Maximum 4g per day.',
            sideEffects: 'Generally well-tolerated. Rare side effects include skin rashes, nausea, and allergic reactions.',
            adverseEffects: 'Severe liver damage (hepatotoxicity) can occur with overdose.',
            healthWarning: 'Do not exceed the recommended dose.'
        },
        'amoxicillin': {
            introduction: 'Amoxicillin is a penicillin-type antibiotic for bacterial infections.',
            class: 'Penicillin-like Antibiotic',
            pharmacokinetics: ["<b>Absorption:</b> Well absorbed from the GI tract.", "<b>Distribution:</b> Distributed to most body tissues.", "<b>Elimination:</b> Excreted primarily in the urine."],
            pharmacodynamics: 'Inhibits the synthesis of bacterial cell walls, leading to cell death.',
            indication: ["Pneumonia", "Strep throat", "Urinary tract infections (UTIs)", "Skin infections"],
            contraindications: ["History of allergic reaction to any penicillin", "Infectious mononucleosis"],
            doses: 'Adults: 250mg to 500mg every 8 hours or 875mg every 12 hours.',
            sideEffects: 'Diarrhea, nausea, rash, vomiting.',
            adverseEffects: 'Severe allergic reactions (anaphylaxis), C. difficile-associated diarrhea.',
            healthWarning: 'Complete the full course of treatment as prescribed.'
        }
    };

    const updateHeaderTitle = (title) => {
        headerTitleEl.textContent = title;
        headerTitleEl.classList.add('gradient-title');
    };
    
    const navigateBack = () => {
        if (navigationStack.length > 1) {
            navigationStack.pop();
            const lastSearchQuery = aushadhiGyanScreen.querySelector('#ag-search-input')?.value || '';
            renderSearchView(lastSearchQuery);
        }
    };
    
    aushadhiGyanScreen.querySelector('.back-button').addEventListener('click', () => {
        if (navigationStack.length > 1) {
            navigateBack();
        } else {
            if (window.showScreen) window.showScreen('home-screen');
        }
    });

    const renderSearchView = (query = '') => {
        updateHeaderTitle('Aushadhi Gyan');
        mainContent.innerHTML = `
            <div class="search-container bg-white p-4 rounded-2xl shadow-lg mb-8 fade-in">
                <div class="flex flex-col sm:flex-row items-center gap-3">
                    <div class="relative w-full">
                        <svg class="w-6 h-6 text-gray-400 absolute left-4 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        <input type="text" id="ag-search-input" placeholder="Search any medicine..." class="w-full text-lg pl-12 pr-4 py-3 border-2 border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-[--primary-color] transition-all" value="${query}">
                    </div>
                    <div class="flex items-center gap-2 w-full sm:w-auto">
                        <button id="ag-search-btn" class="w-full sm:w-auto flex-grow bg-[--primary-color] text-white font-semibold px-6 py-3 rounded-full hover:bg-[--primary-hover] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--primary-color] transition-all transform hover:scale-105">Search</button>
                    </div>
                </div>
            </div>
            <div id="ag-results-container"></div>`;

        const searchInput = mainContent.querySelector('#ag-search-input');
        const searchBtn = mainContent.querySelector('#ag-search-btn');
        
        const triggerSearch = () => {
            const currentQuery = searchInput.value.trim();
            performSearch(currentQuery);
        };

        searchBtn.onclick = triggerSearch;
        searchInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') triggerSearch(); });
        
        if (query) {
            performSearch(query);
        } else {
            mainContent.querySelector('#ag-results-container').innerHTML = `<div class="text-center text-gray-500 mt-20 fade-in"><svg class="w-24 h-24 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg><h2 class="text-2xl font-semibold mt-4">Medicine Database</h2><p class="mt-2">Enter a medicine name in the search bar to begin.</p></div>`;
        }
    };
    
    const performSearch = async (query) => {
        const resultsContainer = mainContent.querySelector('#ag-results-container');
        if (!query) {
             resultsContainer.innerHTML = `<div class="text-center text-gray-500 mt-20 fade-in"><h2 class="text-2xl font-semibold mt-4">Medicine Database</h2><p class="mt-2">Enter a medicine name to begin.</p></div>`;
            return;
        }
        
        resultsContainer.innerHTML = `<div class="flex justify-center mt-10"><div class="loader"></div></div>`;
        
        const lowerQuery = query.toLowerCase();
        
        const localResultKey = Object.keys(medicineDB).find(key => key.toLowerCase() === lowerQuery);
        if (localResultKey) {
            navigationStack.push({ view: 'detail', key: localResultKey });
            renderDetailView(localResultKey, medicineDB[localResultKey]);
            return;
        }

        try {
            const response = await fetch(`https://api.fda.gov/drug/label.json?search=openfda.brand_name:"${lowerQuery}"&limit=1`);
            const data = await response.json();

            if (data.results && data.results.length > 0) {
                const apiDrug = data.results[0];
                const openfda = apiDrug.openfda || {};
                
                const formattedDrug = {
                    introduction: formatApiText(apiDrug.description?.[0]),
                    class: formatApiText(openfda.pharm_class_epc?.[0] || openfda.pharm_class_moa?.[0]),
                    pharmacodynamics: formatApiText(apiDrug.pharmacodynamics?.[0]),
                    pharmacokinetics: formatApiText(apiDrug.pharmacokinetics?.[0]),
                    indication: formatApiText(apiDrug.indications_and_usage?.[0]),
                    contraindications: formatApiText(apiDrug.contraindications?.[0]),
                    doses: formatApiText(apiDrug.dosage_and_administration?.[0]),
                    sideEffects: formatApiText(apiDrug.adverse_reactions?.[0]),
                    adverseEffects: formatApiText(apiDrug.warnings?.[0]),
                    healthWarning: formatApiText(apiDrug.warnings_and_cautions?.[0])
                };
                
                const drugKey = openfda.brand_name?.[0] || query;
                navigationStack.push({ view: 'detail', key: drugKey });
                renderDetailView(drugKey, formattedDrug);

            } else {
                resultsContainer.innerHTML = `<div class="text-center text-gray-500 mt-10 fade-in"><h2 class="text-2xl font-semibold">No Results Found</h2><p class="mt-2">No medicine found for "${query}". Please check spelling.</p></div>`;
            }
        } catch (error) {
            resultsContainer.innerHTML = `<div class="text-center text-red-500 mt-10 fade-in"><h2 class="text-2xl font-semibold">Error</h2><p class="mt-2">Could not connect to online database. Please check your internet connection.</p></div>`;
        }
    };

    const formatApiText = (text) => {
        if (!text || typeof text !== 'string') return '<p>Not available.</p>';
        
        let cleanedText = text.replace(/\[see.*?\]/gi, '').replace(/\s+/g, ' ').trim();
        const points = cleanedText.match(/(\d+\.\d*\s|•\s|[-–—]\s)?(.*?)([.!?]|$)/g);

        if (!points) return `<p>${cleanedText}</p>`;

        const relevantPoints = points.map(p => p.replace(/^\d+\.\d*\s*|•\s*|[-–—]\s*/, '').trim()).filter(p => p.length > 10).slice(0, 5);

        if (relevantPoints.length > 1) return `<ul>${relevantPoints.map(p => `<li>${p}</li>`).join('')}</ul>`;
        if (relevantPoints.length === 1) return `<p>${relevantPoints[0]}</p>`;
        
        return `<p>${cleanedText.substring(0, 500)}...</p>`;
    };

    const renderDetailView = (drugKey, data) => {
        updateHeaderTitle(drugKey.charAt(0).toUpperCase() + drugKey.slice(1));
        
        mainContent.innerHTML = `
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl fade-in">
                <h2 class="text-4xl font-extrabold capitalize mb-6">${drugKey}</h2>
                <div class="space-y-1">
                    ${Object.entries(data).map(([key, value]) => {
                        if (value === '<p>Not available.</p>') return '';
                        return `
                        <div class="detail-section py-4">
                            <h3 class="capitalize">${key.replace(/([A-Z])/g, ' $1')}</h3>
                            ${Array.isArray(value) ? `<ul>${value.map(item => `<li>${item}</li>`).join('')}</ul>` : value}
                        </div>`;
                    }).join('')}
                </div>
                <div class="mt-8 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded-r-lg">
                    <h4 class="font-bold">Medical Disclaimer</h4>
                    <p class="text-sm mt-1">This information is for educational reference only. It is not medical advice and must not replace clinical judgment, local guidelines, or product literature. In case of emergency, follow institutional protocols.</p>
                </div>
            </div>`;
    };

    // Initial Render when the screen becomes visible
    const observer = new MutationObserver(() => {
        if (aushadhiGyanScreen.style.display === 'flex' && navigationStack.length < 2) {
            renderSearchView();
        }
    });
    observer.observe(aushadhiGyanScreen, { attributes: true, attributeFilter: ['style'] });

})();
        
        // --- ABG ANALYZER SCRIPT ---
        (() => {
            const abgScreen = document.getElementById('abg-calc-screen');
            if (!abgScreen) return;
            const disorderData = {
                respAcid: {
                    causes: ["Asthma", "Atelectasis", "Brain trauma", "Bronchiectasis", "Bronchitis", "CNS depressants", "Emphysema", "Hypoventilation", "Pneumonia", "Pulmonary edema", "Pulmonary emboli"],
                    interventions: ["Monitor for signs of respiratory distress", "Administer oxygen as prescribed", "Place the client in a semi-Fowler's position", "Encourage and assist the client to turn, cough, and deep-breathe", "Prepare to administer respiratory treatments as prescribed"]
                },
                respAlk: {
                    causes: ["Fever", "Hyperventilation", "Hypoxia", "Overventilation (by Mechanical Ventilator)", "Hysteria", "Pain"],
                    interventions: ["Monitor for signs of respiratory distress", "Provide emotional support", "Assist with breathing techniques", "Provide caution care with ventilator clients", "Prepare calcium gluconate"]
                },
                metAcid: {
                    causes: ["Diabetic ketoacidosis", "Acute/chronic kidney injury", "Malnutrition", "Severe diarrhea"],
                    interventions: ["Monitor intake & output", "Administer IV solution to bases & acids", "Initiate seizure precaution", "Monitor K+ levels"]
                },
                metAlk: {
                    causes: ["Too many antacids", "Diuretics", "Excess vomiting", "Hyperaldosteronism"],
                    interventions: ["Monitor Potassium & Calcium levels", "Administer IV fluids to help the kidneys get rid of bicarbonate", "Replace K+", "Give antiemetics for vomiting (Zofran or Phenergan)", "Watch for signs of respiratory distress"]
                },
                mixed: {
                    causes: ["Requires complex diagnosis based on the specific mix of disorders (e.g., Cardiopulmonary arrest, Sepsis)."],
                    interventions: ["Address each underlying disorder simultaneously", "Prioritize the most life-threatening condition", "Requires careful monitoring in an ICU setting"]
                }
            };

            const phRange = abgScreen.querySelector('#ph');
            const pco2Range = abgScreen.querySelector('#pco2');
            const hco3Range = abgScreen.querySelector('#hco3');
            const phVal = abgScreen.querySelector('#ph_val');
            const pco2Val = abgScreen.querySelector('#pco2_val');
            const hco3Val = abgScreen.querySelector('#hco3_val');
            const analyzeBtn = abgScreen.querySelector('#analyzeBtn');
            const resultContainer = abgScreen.querySelector('#result-container');
            const resultTitle = abgScreen.querySelector('#result-title');
            const resultSubtitle = abgScreen.querySelector('#result-subtitle');
            const resultDetails = abgScreen.querySelector('#result-details');
            const resetBtn = abgScreen.querySelector('#abg-reset-btn');
            
            phRange.addEventListener('input', (e) => phVal.value = e.target.value);
            pco2Range.addEventListener('input', (e) => pco2Val.value = e.target.value);
            hco3Range.addEventListener('input', (e) => hco3Val.value = e.target.value);
            phVal.addEventListener('input', (e) => phRange.value = e.target.value);
            pco2Val.addEventListener('input', (e) => pco2Range.value = e.target.value);
            hco3Val.addEventListener('input', (e) => hco3Range.value = e.target.value);

            analyzeBtn.addEventListener('click', analyzeABG);
            
            // Function to reset the calculator to its default state
function resetABG() {
    // Reset sliders and number inputs to their default values
    phRange.value = "7.40";
    phVal.value = "7.40";
    pco2Range.value = "40";
    pco2Val.value = "40";
    hco3Range.value = "25";
    hco3Val.value = "25";

    // Reset the result display to its initial state
    resultTitle.textContent = 'Awaiting Analysis...';
    resultSubtitle.textContent = 'Enter values for interpretation';
    resultDetails.innerHTML = '';
    
    // Reset the container's border color and title shadow
    resultContainer.classList.remove('border-red-500', 'border-blue-500', 'border-yellow-500');
    resultContainer.classList.add('border-cyan-700');
    resultTitle.style.textShadow = 'none';
}

// Attach the reset function to the new button's click event
resetBtn.addEventListener('click', resetABG);

            function analyzeABG() {
                const ph = parseFloat(phVal.value);
                const pco2 = parseFloat(pco2Val.value);
                const hco3 = parseFloat(hco3Val.value);

                const PH_LOW = 7.35, PH_HIGH = 7.45;
                const PCO2_LOW = 35, PCO2_HIGH = 45;
                const HCO3_LOW = 22, HCO3_HIGH = 28;

                let result = { key: '', title: '', subtitle: '', type: 'normal' };

                const isAcidosis = ph < PH_LOW;
                const isAlkalosis = ph > PH_HIGH;
                const pco2IsHigh = pco2 > PCO2_HIGH;
                const pco2IsLow = pco2 < PCO2_LOW;
                const hco3IsHigh = hco3 > HCO3_HIGH;
                const hco3IsLow = hco3 < HCO3_LOW;
                const pco2IsNormal = !pco2IsHigh && !pco2IsLow;
                const hco3IsNormal = !hco3IsHigh && !hco3IsLow;

if (isAcidosis) {
                    result.type = 'acidosis';
                    if (pco2IsHigh && hco3IsLow) {
                        result.key = 'mixed'; result.title = 'Mixed Respiratory & Metabolic Acidosis';
                    } else if (pco2IsHigh) {
                        result.key = 'respAcid';
                        result.title = hco3IsHigh ? 'Partially Compensated Respiratory Acidosis' : 'Respiratory Acidosis';
                    } else if (hco3IsLow) {
                        result.key = 'metAcid';
                        result.title = pco2IsLow ? 'Partially Compensated Metabolic Acidosis' : 'Metabolic Acidosis';
                    } else {
                        result.key = 'mixed'; result.title = 'Unusual Result / Mixed Disorder';
                    }
                } else if (isAlkalosis) {
                    result.type = 'alkalosis';
                    if (pco2IsLow && hco3IsHigh) {
                        result.key = 'mixed'; result.title = 'Mixed Respiratory & Metabolic Alkalosis';
                    } else if (pco2IsLow) {
                        result.key = 'respAlk';
                        result.title = hco3IsLow ? 'Partially Compensated Respiratory Alkalosis' : 'Respiratory Alkalosis';
                    } else if (hco3IsHigh) {
                        result.key = 'metAlk';
                        result.title = pco2IsHigh ? 'Partially Compensated Metabolic Alkalosis' : 'Metabolic Alkalosis';
                    } else {
                        result.key = 'mixed'; result.title = 'Unusual Result / Mixed Disorder';
                    }
                } else { // pH is Normal
                    if (pco2IsNormal && hco3IsNormal) {
                        result.title = 'Normal Acid-Base Balance';
                    } else if (pco2IsHigh && hco3IsHigh) {
                        result.key = 'respAcid'; result.title = 'Fully Compensated Respiratory Acidosis';
                    } else if (pco2IsLow && hco3IsLow) {
                        result.key = 'respAlk'; result.title = 'Fully Compensated Respiratory Alkalosis';
                    } else {
                        result.key = 'mixed'; result.title = 'Possible Mixed Disorder';
                    }
                }
                displayResults(result);
            }

            function displayResults(result) {
                resultTitle.textContent = result.title;
                resultSubtitle.textContent = result.subtitle || 'Clinical Interpretation';
                
                let detailsHtml = '';
                const data = disorderData[result.key];

                if (data) {
                    detailsHtml += createAccordion('Causes', data.causes);
                    detailsHtml += createAccordion('Interventions', data.interventions);
                } else if (result.title === 'Normal Acid-Base Balance') {
                    detailsHtml = `<p class="text-center text-cyan-300">All parameters are within the expected normal ranges.</p>`;
                } else {
                    detailsHtml = `<p class="text-center text-yellow-400">This combination of values is complex and requires careful clinical correlation.</p>`;
                }
                
                resultDetails.innerHTML = detailsHtml;
                resultContainer.classList.remove('border-cyan-700', 'border-red-500', 'border-blue-500', 'border-yellow-500');
                resultTitle.style.textShadow = 'none';
                if (result.key === 'mixed') {
                    resultContainer.classList.add('border-yellow-500');
                    resultTitle.style.textShadow = '0 0 10px #f59e0b';
                } else if (result.type === 'acidosis') {
                    resultContainer.classList.add('border-red-500');
                    resultTitle.style.textShadow = '0 0 10px #ef4444';
                } else if (result.type === 'alkalosis') {
                    resultContainer.classList.add('border-blue-500');
                    resultTitle.style.textShadow = '0 0 10px #3b82f6';
                } else {
                    resultContainer.classList.add('border-cyan-700');
                    resultTitle.style.textShadow = '0 0 10px #06b6d4';
                }
            }

            function createAccordion(title, items) {
                const listItems = items.map(item => `<li class="py-1">${item}</li>`).join('');
                return `
                    <details class="bg-black bg-opacity-20 rounded-lg">
                        <summary class="cursor-pointer p-3 font-semibold text-lg flex justify-between items-center text-cyan-300">
                            ${title}
                            <svg class="w-5 h-5 transition-transform transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="accordion-content px-4 pb-3 text-left">
                            <ul class="list-disc list-inside text-gray-300">${listItems}</ul>
                        </div>
                    </details>
                `;
            }
        })();
// --- Job Portal Initialization ---
        const APP_DOWNLOAD_LINK = "https://yourapp.download.link";
let jobs = []; // Start with an empty array

    // Function to fetch job data from your jobs.json file
    async function loadJobs() {
      try {
        // IMPORTANT: Replace the URL with the actual URL of your jobs.json file on GitHub
        const response = await fetch('https://github.com/Suresh-design462/suresh-design462.github.io/blob/main/jobs.json'); 
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const jobData = await response.json();
        jobs = jobData; // Update the global jobs array with live data
      } catch (error) {
        console.error("Could not load job data:", error);
        // Optional: You can keep the old hardcoded jobs here as a fallback
        // jobs = [ { facilityName: "Fallback Job...", ... } ]; 
      } finally {
        render(); // Render the jobs after fetching (or failing)
      }
        }
    const locations = {
      UAE: ["Abu Dhabi", "Dubai", "Sharjah", "Ajman", "Umm Al Quwain", "Ras Al Khaimah", "Fujairah"],
      India: ["Jaipur, Rajasthan", "Udaipur, Rajasthan", "Jodhpur, Rajasthan", "Ajmer, Rajasthan", "New Delhi", "Gurugram", "Noida, Uttar Pradesh", "Ahmedabad, Gujarat",  "Gandhinagar, Gujarat", "Pune, Maharashtra", "Ranchi", "Surat, Gujarat"]
    };

    const $ = (q, el=document) => el.querySelector(q);

    function autoDeleteOldPosts() {
        const threeMonthsAgo = new Date();
        threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);

        const initialCount = jobs.length;
        jobs = jobs.filter(job => new Date(job.datePosted) >= threeMonthsAgo);
        const finalCount = jobs.length;

        if (initialCount > finalCount) {
            console.log(`Auto-removed ${initialCount - finalCount} post(s) older than 3 months.`);
        }
    }

    function timeAgo(dateStr){
      const d = new Date(dateStr);
      const now = new Date();
      const diff = Math.max(0, (now - d) / 1000);
      if (diff < 60) return 'Posted just now';
      const map = [[60, 'sec'], [60, 'min'], [24, 'hr'], [7, 'day'], [4.345, 'wk'], [12, 'mo']];
      let val = diff, unit = 'yr';
      for(const [k,u] of map){
        if(val < k){ unit = u; break; }
        val /= k;
      }
      val = Math.floor(val);
      if (val <= 1 && unit === 'day') return 'Posted today';
      return `Posted ${val} ${unit}${val>1?'s':''} ago`;
    }

    function populateCities(country) {
        const citySelect = $('#city');
        citySelect.innerHTML = '<option value="">All Cities</option>'; // Reset
        if (country && locations[country]) {
            locations[country].forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });
        }
    }

    function jobHTML(j, index){
      const now = new Date();
      const postDate = new Date(j.datePosted);
      const isNew = (now - postDate) / (1000 * 60 * 60) < 24;
      const newBadge = isNew ? '<div class="new-ribbon"><span>New</span></div>' : '';

      let theme = 'pink';
      if (j.department.toLowerCase().includes('icu') || j.department.toLowerCase().includes('er')) {
        theme = 'blue';
      } else if (j.department.toLowerCase().includes('ot') || j.department.toLowerCase().includes('ped')) {
        theme = 'green';
      }

      const desc = j.notes ? `<p class="card-desc">${escapeHtml(j.notes)}</p>` : '';
      return `
        <article class="card card-theme-${theme}" id="job-card-${index}" role="article" aria-label="${escapeHtml(j.position)} at ${escapeHtml(j.facilityName)}">
          ${newBadge}
          <div class="card-head">
            <div class="avatar" aria-hidden="true">${(j.logoText||'JN')}</div>
            <div class="facility-info">
              <div class="facility">${escapeHtml(j.facilityName)}</div>
              <div class="address">${escapeHtml(j.address)}</div>
            </div>
          </div>
          <hr />
          <div class="card-body">
            <div class="details-grid">
              <strong>Position:</strong>   <span>${escapeHtml(j.position)}</span>
              <strong>Department:</strong> <span>${escapeHtml(j.department)}</span>
              <strong>Education:</strong>  <span>${escapeHtml(j.education)}</span>
              <strong>Experience:</strong> <span>${escapeHtml(j.experience)}</span>
              <strong>Salary:</strong>     <span>${escapeHtml(j.salary)}</span>
            </div>
            ${desc}
          </div>
          <hr />
          <div class="card-footer">
            <div class="posted">${timeAgo(j.datePosted)}</div>
            <button class="share-btn" data-index="${index}" title="Share as Image">Share</button>
            <a class="apply-btn" href="${encodeURI(j.applyUrl)}" target="_blank" rel="noopener noreferrer">ApplyNow</a>
          </div>
        </article>`;
    }

    function escapeHtml(str){
      return String(str||'').replace(/[&<>"]+/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[s]));
    }

    function render(){
      const country = $('#country').value;
      const city = $('#city').value;
      const searchTerm = $('#search').value.trim().toLowerCase();

      const list = jobs
        .slice()
        .sort((a,b)=> new Date(b.datePosted) - new Date(a.datePosted))
        .filter(j => {
            const countryMatch = !country || j.address.toLowerCase().includes(country.toLowerCase());
            const cityMatch = !city || j.address.toLowerCase().includes(city.toLowerCase().split(',')[0]);
            if (!countryMatch || !cityMatch) return false;

            if (!searchTerm) return true;
            const searchableText = [j.facilityName, j.address, j.position, j.department, j.notes].join(' ').toLowerCase();
            return searchableText.includes(searchTerm);
        });

      $('#resultCount').textContent = list.length;
      const html = list.map(jobHTML).join('');
      $('#grid').innerHTML = html || `<div class="empty">No jobs found. Try a different search or location.</div>`;
    }

    function showToast(message) {
        const toast = $('#toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }
async function handleShare(index) {
        const job = jobs[index];
        if (!job) {
            showToast('Could not find job details.');
            return;
        }

        // Construct the text message with all job details and the download link
        const shareDetailsText = `
*Job Opportunity via InstaNurse App!*

*Facility:* ${escapeHtml(job.facilityName)}
*Position:* ${escapeHtml(job.position)}
*Department:* ${escapeHtml(job.department)}
*Location:* ${escapeHtml(job.address)}
*Experience:* ${escapeHtml(job.experience)}
*Salary:* ${escapeHtml(job.salary)}
*Education:* ${escapeHtml(job.education)}
${job.notes ? `\n*Notes:*\n${escapeHtml(job.notes)}\n` : ''}
*Apply Here:* ${job.applyUrl}

---
*Find more nursing jobs with the InstaNurse App!*
*Download Now:* ${APP_DOWNLOAD_LINK}
        `.trim();

        // Use the Web Share API if the browser supports it (common on mobile)
        if (navigator.share) {
            try {
                await navigator.share({
                    title: `Job: ${escapeHtml(job.position)} at ${escapeHtml(job.facilityName)}`,
                    text: shareDetailsText,
                });
                console.log('Job details shared successfully.');
            } catch (error) {
                console.error('Sharing failed:', error);
                showToast('Could not share job details.');
            }
        } else {
            // Fallback for desktop or unsupported browsers: Copy to clipboard
            try {
                await navigator.clipboard.writeText(shareDetailsText);
                showToast('Job details copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy to clipboard:', err);
                showToast('Error copying details.');
            }
        }
    }
    

    function setupInteractions(){
      $('#search').addEventListener('input', render);
      $('#country').addEventListener('input', (e) => {
          populateCities(e.target.value);
          render();
      });
      $('#city').addEventListener('input', render);
      
      $('#footerHomeBtn').addEventListener('click', (e) => {
        e.preventDefault();
        $('#search').value = '';
        $('#country').value='';
        $('#city').innerHTML = '<option value="">All Cities</option>';
        render();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      $('#footerBackBtn').addEventListener('click', () => history.back());

      $('#grid').addEventListener('click', (e) => {
          if (e.target.classList.contains('share-btn')) {
              const index = e.target.dataset.index;
              handleShare(index);
          }
      });
    }
    
    function setupQuickPost(){
      const dlg = $('#postModal');
      const btn = $('#postBtn');
      const cancelBtn = $('#cancelPostBtn');

      btn.addEventListener('click',()=> dlg.showModal());
      cancelBtn.addEventListener('click', () => dlg.close());

      $('#postForm').addEventListener('submit', (e)=>{
        e.preventDefault();
        const fd = new FormData(e.target);
        const job = Object.fromEntries(fd.entries());
        job.datePosted = new Date().toISOString();
        job.logoText = (job.facilityName||'J4N').split(' ').map(s=>s[0]).join('').slice(0,2).toUpperCase();
        jobs.unshift(job);
        dlg.close();
        e.target.reset();
        render();
      });
    }

    // Init
    autoDeleteOldPosts(); // This can be removed if you manage jobs in JSON
    setupInteractions();
    setupQuickPost();
    loadJobs(); // Call loadJobs() instead of render()

        setLanguage(localStorage.getItem('medinest-lang') || 'en');
        showScreen('home-screen');
        loadAds();
    });
    </script>
</body>
</html>
